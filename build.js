!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return o(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var o,i=typeof e;if("number"===i)o=e>0?e>>>0:0;else if("string"===i)o=n.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&j(e.data)&&(e=e.data),o=+e.length>0?Math.floor(+e.length):0}if(o>B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(o)):(s=this,s.length=o,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(D(e))if(n.isBuffer(e))for(a=0;o>a;a++)s[a]=e.readUInt8(a);else for(a=0;o>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===i)s.write(e,0,t);else if("number"===i&&!n.TYPED_ARRAY_SUPPORT&&!r)for(a=0;o>a;a++)s[a]=0;return o>0&&o<=n.poolSize&&(s.parent=U),s}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var i=new n(e,t,r);return delete i.parent,i}function i(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function s(e,t,r,n){var o=P(L(t,e.length-r),e,r,n);return o}function a(e,t,r,n){var o=P(k(t),e,r,n);return o}function l(e,t,r,n){return a(e,t,r,n)}function f(e,t,r,n){var o=P(F(t),e,r,n);return o}function u(e,t,r,n){var o=P(R(t,e.length-r),e,r,n,2);return o}function c(e,t,r){return I.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function d(e,t,r){var n="",o="";r=Math.min(e.length,r);for(var i=t;r>i;i++)e[i]<=127?(n+=A(o)+String.fromCharCode(e[i]),o=""):o+="%"+e[i].toString(16);return n+A(o)}function h(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)n+=String.fromCharCode(127&e[o]);return n}function p(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)n+=String.fromCharCode(e[o]);return n}function g(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;i++)o+=S(e[i]);return o}function m(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function v(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,o,i,s){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||s>t)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range")}function _(e,t,r,n){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);i>o;o++)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function b(e,t,r,n){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);i>o;o++)e[r+o]=t>>>8*(n?o:3-o)&255}function y(e,t,r,n,o,i){if(t>o||i>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function w(e,t,r,n,o){return o||y(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),M.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,o){return o||y(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),M.write(e,t,r,n,52,8),r+8}function C(e){if(e=E(e).replace(O,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function E(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function D(e){return j(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function S(e){return 16>e?"0"+e.toString(16):e.toString(16)}function L(e,t){var r,n=e.length,o=null;t=t||1/0;for(var i=[],s=0;n>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(56320>r){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else o&&((t-=3)>-1&&i.push(239,191,189),o=null);if(128>r){if((t-=1)<0)break;i.push(r)}else if(2048>r){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function k(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function R(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function F(e){return I.toByteArray(C(e))}function P(e,t,r,n,o){o&&(n-=n%o);for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function A(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var I=e("base64-js"),M=e("ieee754"),j=e("is-array");r.Buffer=n,r.SlowBuffer=o,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var B=1073741823,U={};n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,o=t.length,i=0,s=Math.min(r,o);s>i&&e[i]===t[i];i++);return i!==s&&(r=e[i],o=t[i]),o>r?-1:r>o?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!j(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new n(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var o=new n(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(o,i),i+=s.length}return o},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=L(e).length;break;case"base64":r=F(e).length;break;default:r=e.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,r){var n=!1;if(t>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return g(this,t,r);case"utf8":case"utf-8":return d(this,t,r);case"ascii":return h(this,t,r);case"binary":return p(this,t,r);case"base64":return c(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return n.compare(this,e)},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var o=n;n=t,t=r,r=o}if(t=Number(t)||0,0>r||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var c=this.length-t;r?(r=Number(r),r>c&&(r=c)):r=c,n=String(n||"utf8").toLowerCase();var d;switch(n){case"hex":d=i(this,e,t,r);break;case"utf8":case"utf-8":d=s(this,e,t,r);break;case"ascii":d=a(this,e,t,r);break;case"binary":d=l(this,e,t,r);break;case"base64":d=f(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+n)}return d},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var o;if(n.TYPED_ARRAY_SUPPORT)o=n._augment(this.subarray(e,t));else{var i=t-e;o=new n(i,void 0,!0);for(var s=0;i>s;s++)o[s]=this[s+e]}return o.length&&(o.parent=this.parent||this),o},n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},n.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},n.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),M.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),M.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),M.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),M.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||x(this,e,t,r,Math.pow(2,8*r),0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o>>>0&255;return t+r},n.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||x(this,e,t,r,Math.pow(2,8*r),0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i>>>0&255;return t+r},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):_(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):b(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||x(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var o=0,i=1,s=0>e?1:0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=(e/i>>0)-s&255;return t+r},n.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||x(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var o=r-1,i=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=(e/i>>0)-s&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):_(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):_(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,o){var i=this;if(r||(r=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&r>o&&(o=r),o===r)return 0;if(0===e.length||0===i.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=i.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);var s=o-r;if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t);return s},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var o=L(e.toString()),i=o.length;for(n=t;r>n;n++)this[n]=o[n%i]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var z=n.prototype;n._augment=function(e){return e.constructor=n,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=z.get,e.set=z.set,e.write=z.write,e.toString=z.toString,e.toLocaleString=z.toString,e.toJSON=z.toJSON,e.equals=z.equals,e.compare=z.compare,e.copy=z.copy,e.slice=z.slice,e.readUIntLE=z.readUIntLE,e.readUIntBE=z.readUIntBE,e.readUInt8=z.readUInt8,e.readUInt16LE=z.readUInt16LE,e.readUInt16BE=z.readUInt16BE,e.readUInt32LE=z.readUInt32LE,e.readUInt32BE=z.readUInt32BE,e.readIntLE=z.readIntLE,e.readIntBE=z.readIntBE,e.readInt8=z.readInt8,e.readInt16LE=z.readInt16LE,e.readInt16BE=z.readInt16BE,e.readInt32LE=z.readInt32LE,e.readInt32BE=z.readInt32BE,e.readFloatLE=z.readFloatLE,e.readFloatBE=z.readFloatBE,e.readDoubleLE=z.readDoubleLE,e.readDoubleBE=z.readDoubleBE,e.writeUInt8=z.writeUInt8,e.writeUIntLE=z.writeUIntLE,e.writeUIntBE=z.writeUIntBE,e.writeUInt16LE=z.writeUInt16LE,e.writeUInt16BE=z.writeUInt16BE,e.writeUInt32LE=z.writeUInt32LE,e.writeUInt32BE=z.writeUInt32BE,e.writeIntLE=z.writeIntLE,e.writeIntBE=z.writeIntBE,e.writeInt8=z.writeInt8,e.writeInt16LE=z.writeInt16LE,e.writeInt16BE=z.writeInt16BE,e.writeInt32LE=z.writeInt32LE,e.writeInt32BE=z.writeInt32BE,e.writeFloatLE=z.writeFloatLE,e.writeFloatBE=z.writeFloatBE,e.writeDoubleLE=z.writeDoubleLE,e.writeDoubleBE=z.writeDoubleBE,e.fill=z.fill,e.inspect=z.inspect,e.toArrayBuffer=z.toArrayBuffer,e};var O=/[^+\/0-9A-z\-]/g},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===c?62:t===a||t===d?63:l>t?-1:l+10>t?t-l+26+26:u+26>t?t-u:f+26>t?t-f+26:void 0}function r(e){function r(e){f[c++]=e}var n,o,s,a,l,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;l="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,f=new i(3*e.length/4-l),s=l>0?e.length-4:e.length;var c=0;for(n=0,o=0;s>n;n+=4,o+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===l?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===l&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),f}function o(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,i,s,a=e.length%3,l="";for(o=0,s=e.length-a;s>o;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],l+=r(i);switch(a){case 1:i=e[e.length-1],l+=t(i>>2),l+=t(i<<4&63),l+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],l+=t(i>>10),l+=t(i>>4&63),l+=t(i<<2&63),l+="="}return l}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),f="a".charCodeAt(0),u="A".charCodeAt(0),c="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],3:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,f=l>>1,u=-7,c=r?o-1:0,d=r?-1:1,h=e[t+c];for(c+=d,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+e[t+c],c+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+e[t+c],c+=d,u-=8);if(0===i)i=1-f;else{if(i===l)return s?0/0:1/0*(h?-1:1);s+=Math.pow(2,n),i-=f}return(h?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,l,f=8*i-o-1,u=(1<<f)-1,c=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+c>=1?d/l:d*Math.pow(2,1-c),t*l>=2&&(s++,l/=2),s+c>=u?(a=0,s=u):s+c>=1?(a=(t*l-1)*Math.pow(2,o),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,f+=o;f>0;e[r+h]=255&s,h+=p,s/=256,f-=8);e[r+h-p]|=128*g}},{}],4:[function(e,t){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],5:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,l,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),l=1;o>l;l++)a[l-1]=arguments[l];r.apply(this,a)}else if(i(r)){for(o=arguments.length,a=new Array(o-1),l=1;o>l;l++)a[l-1]=arguments[l];for(f=r.slice(),o=f.length,l=0;o>l;l++)f[l].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=s;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],6:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],7:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],8:[function(e,t){function r(){if(!s){s=!0;for(var e,t=i.length;t;){e=i,i=[];for(var r=-1;++r<t;)e[r]();t=i.length}s=!1}}function n(){}var o=t.exports={},i=[],s=!1;o.nextTick=function(e){i.push(e),s||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],9:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":10}],10:[function(e,t){(function(r){function n(e){return this instanceof n?(l.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new n(e)}function o(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function i(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}t.exports=n;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var l=e("./_stream_readable"),f=e("./_stream_writable");a.inherits(n,l),i(s(f.prototype),function(e){n.prototype[e]||(n.prototype[e]=f.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":12,"./_stream_writable":14,_process:8,"core-util-is":15,inherits:6}],11:[function(e,t){function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":13,"core-util-is":15,inherits:6}],12:[function(e,t){(function(r){function n(t){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=e("string_decoder/").StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function o(e){return this instanceof o?(this._readableState=new n(e,this),this.readable=!0,void D.call(this)):new o(e)}function i(e,t,r,n,o){var i=f(t,r);if(i)e.emit("error",i);else if(null===r||void 0===r)t.reading=!1,t.ended||u(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!o){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&o){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||o||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,o?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&c(e),h(e,t);else o||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=k)e=k;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var r=null;return C.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function u(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?c(e):b(e)}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){d(e)}):d(e))}function d(e){e.emit("readable")}function h(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&m(e)}}function m(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):y(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(E.listenerCount(e,"data")>0&&x(e))):void(n.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function x(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var o=t||!1,i=!1;e.readable=!0,e.pipe=D.prototype.pipe,e.on=e.addListener=D.prototype.on,e.on("readable",function(){i=!0;for(var t;!o&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){o=!0,this.emit("pause")},e.resume=function(){o=!1,i?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function _(e,t){var r,n=t.buffer,o=t.length,i=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(s)r=n.shift();else if(!e||e>=o)r=i?n.join(""):C.concat(n,o),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=i?"":new C(e);for(var l=0,f=0,u=n.length;u>f&&e>l;f++){var a=n[0],c=Math.min(e-l,a.length);i?r+=a.slice(0,c):a.copy(r,l,0,c),c<a.length?n[0]=a.slice(c):n.shift(),l+=c}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function y(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function w(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=o;var T=e("isarray"),C=e("buffer").Buffer;o.ReadableState=n;var E=e("events").EventEmitter;E.listenerCount||(E.listenerCount=function(e,t){return e.listeners(t).length});var D=e("stream"),S=e("core-util-is");S.inherits=e("inherits");var L;S.inherits(o,D),o.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new C(e,t),t="")),i(this,r,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return i(this,t,e,"",!0)},o.prototype.setEncoding=function(t){L||(L=e("string_decoder/").StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t};var k=8388608;o.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c(this),null;if(e=l(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=_(e,t),t.length-=r.length),0===t.length&&b(this),r;var o=t.needReadable;return t.length-e<=t.highWaterMark&&(o=!0),(t.ended||t.reading)&&(o=!1),o&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=l(n,t)),r=e>0?_(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&b(this),r},o.prototype._read=function(){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(e,t){function n(e){e===u&&i()}function o(){e.end()}function i(){e.removeListener("close",a),e.removeListener("finish",l),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",n),u.removeListener("end",o),u.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&p()}function s(t){f(),e.removeListener("error",s),0===E.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",l),f()}function l(){e.removeListener("close",a),f()}function f(){u.unpipe(e)}var u=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=e;break;case 1:c.pipes=[c.pipes,e];break;default:c.pipes.push(e)}c.pipesCount+=1;var d=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,h=d?o:i;c.endEmitted?r.nextTick(h):u.once("end",h),e.on("unpipe",n);var p=g(u);return e.on("drain",p),e._events&&e._events.error?T(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",l),e.emit("pipe",u),c.flowing||(this.on("readable",v),c.flowing=!0,r.nextTick(function(){m(u)})),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;
for(var o=0;n>o;o++)r[o].emit("unpipe",this);return this}var o=w(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=D.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||x(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&c(this,n):this.read(0))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){x(this),this.read(0),this.emit("resume")},o.prototype.pause=function(){x(this,!0),this.emit("pause")},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(o){if(t.decoder&&(o=t.decoder.write(o)),(!t.objectMode||null!==o&&void 0!==o)&&(t.objectMode||o&&o.length)){var i=n.push(o);i||(r=!0,e.pause())}});for(var o in e)"function"==typeof e[o]&&"undefined"==typeof this[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return y(i,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(){r&&(r=!1,e.resume())},n},o._fromList=_}).call(this,e("_process"))},{_process:8,buffer:1,"core-util-is":15,events:5,inherits:6,isarray:7,stream:20,"string_decoder/":21}],13:[function(e,t){function r(e,t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),o&&o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){i(t,e)}):i(t)})}function i(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":10,"core-util-is":15,inherits:6}],14:[function(e,t){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function o(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(t){var r=e("./_stream_duplex");return this instanceof i||this instanceof r?(this._writableState=new o(t,this),this.writable=!0,void w.call(this)):new i(t)}function s(e,t,n){var o=new Error("write after end");e.emit("error",o),r.nextTick(function(){n(o)})}function a(e,t,n,o){var i=!0;if(!b.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){o(s)}),i=!1}return i}function l(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new b(t,r)),t}function f(e,t,r,o,i){r=l(t,r,o),b.isBuffer(r)&&(o="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,o,i)):u(e,t,s,r,o,i),a}function u(e,t,r,n,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,o,t.onwrite),t.sync=!1}function c(e,t,n,o,i){n?r.nextTick(function(){i(o)}):i(o),e._writableState.errorEmitted=!0,e.emit("error",o)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if(d(n),t)c(e,n,o,t,i);else{var s=v(e,n);s||n.bufferProcessing||!n.buffer.length||m(e,n),o?r.nextTick(function(){p(e,n,s,i)}):p(e,n,s,i)}}function p(e,t,r,n){r||g(e,t),n(),r&&x(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],o=n.chunk,i=n.encoding,s=n.callback,a=t.objectMode?1:o.length;if(u(e,t,a,o,i,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function x(e,t){var r=v(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function _(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=i;var b=e("buffer").Buffer;i.WritableState=o;var y=e("core-util-is");y.inherits=e("inherits");var w=e("stream");y.inherits(i,w),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,r){var n=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),b.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,e,r)&&(o=f(this,n,e,t,r)),o},i.prototype._write=function(e,t,r){r(new Error("not implemented"))},i.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||_(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":10,_process:8,buffer:1,"core-util-is":15,inherits:6,stream:20}],15:[function(e,t,r){(function(e){function t(e){return Array.isArray(e)}function n(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function f(e){return void 0===e}function u(e){return c(e)&&"[object RegExp]"===v(e)}function c(e){return"object"==typeof e&&null!==e}function d(e){return c(e)&&"[object Date]"===v(e)}function h(e){return c(e)&&("[object Error]"===v(e)||e instanceof Error)}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=o,r.isNullOrUndefined=i,r.isNumber=s,r.isString=a,r.isSymbol=l,r.isUndefined=f,r.isRegExp=u,r.isObject=c,r.isDate=d,r.isError=h,r.isFunction=p,r.isPrimitive=g,r.isBuffer=m}).call(this,e("buffer").Buffer)},{buffer:1}],16:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":11}],17:[function(e,t,r){var n=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":10,"./lib/_stream_passthrough.js":11,"./lib/_stream_readable.js":12,"./lib/_stream_transform.js":13,"./lib/_stream_writable.js":14,stream:20}],18:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":13}],19:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":14}],20:[function(e,t){function r(){n.call(this)}t.exports=r;var n=e("events").EventEmitter,o=e("inherits");o(r,n),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function o(){f.readable&&f.resume&&f.resume()}function i(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){f.removeListener("data",r),e.removeListener("drain",o),f.removeListener("end",i),f.removeListener("close",s),f.removeListener("error",a),e.removeListener("error",a),f.removeListener("end",l),f.removeListener("close",l),e.removeListener("close",l)}var f=this;f.on("data",r),e.on("drain",o),e._isStdio||t&&t.end===!1||(f.on("end",i),f.on("close",s));var u=!1;return f.on("error",a),e.on("error",a),f.on("end",l),f.on("close",l),e.on("close",l),e.emit("pipe",f),e}},{events:5,inherits:6,"readable-stream/duplex.js":9,"readable-stream/passthrough.js":16,"readable-stream/readable.js":17,"readable-stream/transform.js":18,"readable-stream/writable.js":19}],21:[function(e,t,r){function n(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function o(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=o)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,o),o-=this.charReceived),t+=e.toString(this.encoding,0,o);var o=t.length-1,n=t.charCodeAt(o);if(n>=55296&&56319>=n){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,o)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,o=this.encoding;t+=n.slice(0,r).toString(o)}return t}},{buffer:1}],22:[function(e,t){t.exports={timeline:[{canvas2d:{background:"#EDA",size:[800,600],draws:[{font:"bold 80px sans-serif",fillStyle:"#000",textBaseline:"middle",textAlign:"center"},["fillText","My Super Diaporama",400,300]]},duration:500,transitionNext:{duration:1e3}},{image:"./images/run.jpg",duration:5e3,kenburns:{from:[.5,[.5,.6]],to:[1,[.5,.6]]},transitionNext:{name:"crosszoom",duration:1e3}},{image:"./images/barley.jpg",duration:4e3,kenburns:{from:[.9],to:[.7,[.8,.6]]},transitionNext:{name:"linearblur",duration:1e3}},{image:"./images/leaves.jpg",duration:5e3,kenburns:{from:[.7,[0,.5]],to:[.7,[1,.5]]},transitionNext:{name:"DoomScreenTransition",duration:2e3}},{image:"./images/gladiator.jpg",duration:6e3,kenburns:{from:[.3,[.5,.8]],to:[1]},transitionNext:{name:"doorway",duration:2e3,uniforms:{reflection:.4,perspective:.4,depth:3},easing:[0,0,1,1]}},{image:"./images/train.jpg",duration:4e3,kenburns:{from:[1],to:[.3]},transitionNext:{name:"heartwipe",duration:1500}},{image:"./images/paris.jpg",duration:6e3,kenburns:{from:[.4,[1,.5]],to:[1,[.5,.5]],easing:[.3,0,1,1]},transitionNext:{name:"pagecurl",duration:2e3}}]}},{}],23:[function(e){function t(){var e=window.innerWidth,t=window.innerHeight;o.width=e,o.height=t,o.resolution=Math.min(window.devicePixelRatio||1,Math.ceil(i/(e*t)))}var r=e("diaporama");document.body.style.background="#000",document.body.style.margin="0",document.body.style.overflow="hidden";var n=document.createElement("div");n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",document.body.appendChild(n);var o=r(n,{GlslTransitions:e("glsl-transitions"),data:e("./diaporama.json"),autoplay:!0,loop:!0}),i=524288;window.addEventListener("resize",t),t(),document.body.addEventListener("keydown",function(e){switch(e.which){case 38:o.playbackRate*=1.5;break;case 40:o.playbackRate/=1.5;break;case 37:o.prev();break;case 39:o.next();break;case 32:o.paused=!o.paused}}),window.diaporama=o},{"./diaporama.json":22,diaporama:24,"glsl-transitions":65}],24:[function(e,t){t.exports=e("./lib/Diaporama")},{"./lib/Diaporama":26}],25:[function(e,t){t.exports={TRANSITION:0,KENBURNS:[1,2,3],CANVAS2D:[4,5,6],sort:function(e,t){return e-t}}},{}],26:[function(e,t){function r(e,t){return a.sort(e[1].channel,t[1].channel)}function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);if(!e||!e.nodeType)throw new Error("Diaporama: a DOM container is required.");t&&!r&&t.data&&(r=t,t=null),r||(r={}),this._runningSegments=[],this._rendering=new d(e,r.backgroundColor||this.backgroundColor),this._handleResize_bounded=this._handleResize.bind(this),this._handleRender_bounded=this._handleRender.bind(this),this._container=e;for(var o in r)this[o]=r[o];t&&(this.data=t),(null===this._width||null===this._height)&&this.fitToContainer();var i=this;this.once("canplaythrough",function(){i._autoplay?i._start():i._requestRender()}),this._requestResize()}var o=e("raf"),i=e("events").EventEmitter,s=e("object-assign"),a=e("./Channels"),l=e("./findTransitionByName"),f=e("./SegmentTransition"),u=e("./SegmentKenBurns"),c=e("./SegmentCanvas2d"),d=e("./DiaporamaRenderingCanvas"),h=e("./TimeInterval"),p=e("./DiaporamaFormatError"),g=0,m=1,v=2;n.prototype=s({},i.prototype,{backgroundColor:[0,0,0],destroy:function(){this.emit("destroy"),this.removeAllListeners(),this._stopCurrentDiaporamaLoading&&(this._stopCurrentDiaporamaLoading(),this._stopCurrentDiaporamaLoading=null),this._stop(),this._rendering.destroy()},play:function(){this.paused=!1},pause:function(){this.paused=!0},next:function(){var e=this._slideIndexForTime(this._currentTime);if(-1!==e){if(e++,e>=this._slideTimes.length){if(!this._loop)return;e=0}this.currentTime=this._slideTimes[e]}},prev:function(){var e=this._slideIndexForTime(this._currentTime);if(-1!==e){if(e--,0>e){if(!this._loop)return;e=this._slideTimes.length-1}this.currentTime=this._slideTimes[e]}},jump:function(e){if("number"!=typeof e)throw new Error("Diaporama#jump requires the slide index number.");if(!(0>e||e>=this._slideTimes.length)){var t=this._slideIndexForTime(this._currentTime);t!==e&&(this.currentTime=this._slideTimes[e])}},fitToContainer:function(){var e=this._container,t=e.getBoundingClientRect();this._width=t.width,this._height=t.height,this._requestResize()},_playbackRate:1,_loop:!1,_autoplay:!1,_paused:!0,_width:null,_height:null,_resolution:window.devicePixelRatio||1,_currentTime:0,_duration:0,_curLoop:null,_startLoopId:0,_needResize:null,_needRender:null,_loadImages:function(){function e(){c||(c=1,a.emit("canplay"))}function t(){d||(d=1,a.emit("canplaythrough"))}function r(){a.emit("load")}function n(){if(u.length===f.length)e(),t(),r(),s();else if(c||p&&-1===u.indexOf(p)||e(),c&&!d){var n=Date.now()-h,o=a._duration;.8*u.length/f.length>n/o&&t()}}function o(e){-1!==f.indexOf(e)&&(a.emit("progress",u.length/f.length),u.push(e),n())}function i(e,t){a.emit("error",new Error("Failure to load "+e),t),s()}function s(){l.removeListener("load",o),l.removeListener("error",i),clearInterval(g)}this._stopCurrentDiaporamaLoading&&(this._stopCurrentDiaporamaLoading(),this._stopCurrentDiaporamaLoading=null);var a=this,l=this._rendering.images,f=[],u=[];this._data.timeline.forEach(function(e){var t=e.image;t&&(l.has(t)||f.push(t))});var c,d;if(0===f.length)return e(),t(),void r();var h=Date.now(),p=f[0],g=setInterval(n,200);l.on("load",o),l.on("error",i);for(var m=0;m<f.length;++m)l.load(f[m]);this._stopCurrentDiaporamaLoading=s},_loadTransitions:function(){var e=this._rendering.transitions,t=this._data.transitions||this.GlslTransitions||{};this._data.timeline.forEach(function(r){var n=r.transitionNext&&r.transitionNext.name;if(n&&!e.has(n)){var o=l(n,t);o&&e.set(n,o)}})},_requestResize:function(){null===this._needResize&&(this._needResize=o(this._handleResize_bounded))},_handleResize:function(){null!==this._needResize&&(this._needResize=null,this._resize())},_resize:function(){var e=this._width,t=this._height,r=this._resolution;this._rendering.resize(e,t,r);for(var n=0;n<this._runningSegments.length;++n)this._runningSegments[n][1].resize(e,t,r);this.emit("resize",e,t),this._requestRender()},_computeTimelineSegments:function(){for(var e;e=this._runningSegments.pop();){var t=e[1].leave();t&&this.emit.apply(this,t)}for(var n=this._data,o=n.timeline.length,i=0,s=0,l=[],d=[],g=[],m=0;o>m;m++){l.push(i);var v=n.timeline[m],x=v.duration||0,_=v.transitionNext,b=_&&_.duration||0,y=m===o-1?2:m%2;if(v.image)e=new u(a.KENBURNS[y],v);else{if(!v.canvas2d)throw new p("timeline item can't be understood as a segment.",v);e=new c(a.CANVAS2D[y],v)}d.push([new h(i-s,i+x+b),e]),s=b,i+=x,b&&(g.push({interval:new h(i,i+b),index:m}),i+=b)}for(var w=[],T=0;T<g.length;++T){var C=g[T],E=C.index,D=E+1<n.timeline.length?E+1:0,S=d[E][1],L=d[D][1],k=n.timeline[E].transitionNext;(0!==D||this._loop)&&w.push([C.interval,new f(a.TRANSITION,k,S,L)])}d=w.concat(d),d.sort(r),this._slideTimes=l,this._segments=d,this._duration=i-s},_slideIndexForTime:function(e){var t=this._slideTimes;if(!t)return-1;if(0>e||e>=this._duration)return-1;for(var r=t.length,n=0;r>n;++n)if(e<t[n])return n-1;return r-1},renderNow:function(){this._needRender=!0,this._handleRender()},_requestRender:function(){null===this._curLoop&&null===this._needRender&&(this._needRender=o(this._handleRender_bounded))},_handleRender:function(){null!==this._needRender&&(this._needRender=null,this._render())},_render:function(){this._handleResize();var e=this._segments;if(0!==e.length){for(var t=this._currentTime,n=this._runningSegments,o=this._rendering,i=!1,s=0;s<e.length;++s){var a=e[s],l=n.indexOf(a),f=-1!==l;if(a[0].timeInside(t)){if(!f){if(!a[1].ready(o)){i=!0;continue}n.push(a);var u=a[1].enter(o);u&&this.emit.apply(this,u)}}else if(f){n.splice(l,1);var c=a[1].leave();c&&this.emit.apply(this,c)}}if(n.sort(r),n.length>0){for(var d=n.length-1;d>=0;d--){var h=n[d];h[1].render(h[0].interpolate(t))}return this._rendering.switchChannel(n[0][1].channel),i?m:v}return g}},_start:function(){var e,t=this,r=++this._startLoopId;this._curLoop=o(function n(i){if(t._startLoopId===r){o(n),e||(e=i,t.emit("play"));var s=i-e;e=i;var a=t._render();a===g?t.loop?t.currentTime=0:t._stop(!0):a===v&&(t._currentTime+=s*t._playbackRate)}})},_stop:function(e){this._startLoopId++,null!==this._curLoop&&(o.cancel(this._curLoop),this._curLoop=null,this.emit("pause"),e&&this.emit("ended"))}}),Object.defineProperty(n.prototype,"loop",{set:function(e){this._loop=e},get:function(){return this._loop}}),Object.defineProperty(n.prototype,"autoplay",{set:function(e){this._autoplay=e},get:function(){return this._autoplay}}),Object.defineProperty(n.prototype,"data",{set:function(e){var t=this._data;t!==e&&(this._data=e,0===e.timeline.length&&this._rendering.emptyChild(),this._computeTimelineSegments(t),this._loadTransitions(),this._loadImages(),this._requestRender())},get:function(){return this._data}}),Object.defineProperty(n.prototype,"resolution",{set:function(e){e!==this._resolution&&(this._resolution=e,this._requestResize())},get:function(){return this._resolution}}),Object.defineProperty(n.prototype,"width",{set:function(e){e!==this._width&&(this._width=e,this._requestResize())},get:function(){return this._width}}),Object.defineProperty(n.prototype,"height",{set:function(e){e!==this._height&&(this._height=e,this._requestResize())},get:function(){return this._height}}),Object.defineProperty(n.prototype,"currentTime",{set:function(e){e!==this._currentTime&&(this._currentTime=Math.max(0,e),this._requestRender())},get:function(){return this._currentTime}}),Object.defineProperty(n.prototype,"playbackRate",{set:function(e){this._playbackRate=e},get:function(){return this._playbackRate}}),Object.defineProperty(n.prototype,"paused",{set:function(e){var t=null===this._curLoop;e!==t&&(e?this._stop():this._start())},get:function(){return null===this._curLoop}}),Object.defineProperty(n.prototype,"duration",{get:function(){return this._duration},set:function(){throw new Error("Diaporama: duration is a read-only value.")}}),t.exports=n},{"./Channels":25,"./DiaporamaFormatError":27,"./DiaporamaRenderingCanvas":28,"./SegmentCanvas2d":29,"./SegmentKenBurns":30,"./SegmentTransition":32,"./TimeInterval":35,"./findTransitionByName":36,events:5,"object-assign":59,raf:60}],27:[function(e,t){function r(e){this.message=e,this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="DiaporamaFormatError",t.exports=r},{}],28:[function(e,t){function r(e,t){this._container=e,this._container.style.backgroundColor="rgb("+t.map(function(e){return~~(255*e)})+")",this._canvases={},this._ctxs={},this.createDOM(),this.images=new s,this.transitions=new a(this.getChannelContext(i.TRANSITION))}var n=e("glsl-transition-core"),o=e("kenburns-webgl"),i=e("./Channels"),s=e("./StoreImages"),a=e("./StoreTransitions");r.prototype={destroy:function(){this.emptyChild(),this.images.destroy(),this.transitions.destroy();for(var e in this._ctxs)this._ctxs[e].destroy&&this._ctxs[e].destroy();this._canvases=null,this._ctxs=null},resize:function(e,t,r){var n=e*r,o=t*r;for(var i in this._canvases){var s=this._canvases[i];s.style.width=e+"px",s.style.height=t+"px",s.width=n,s.height=o}this._container.style.width=e+"px",this._container.style.height=t+"px"},getChannel:function(e){return this._canvases[e]},getChannelContext:function(e){return this._ctxs[e]},switchChannel:function(e){e!==this._c&&(this._c=e,this._setChild(this._canvases[e]))},createDOM:function(){var e,t;e=document.createElement("canvas"),t=n(e),this._attachChannel(i.TRANSITION,e,t),i.KENBURNS.forEach(function(r){e=document.createElement("canvas"),t=new o(e),this._attachChannel(r,e,t)},this),i.CANVAS2D.forEach(function(r){e=document.createElement("canvas"),t=e.getContext("2d"),this._attachChannel(r,e,t)},this)},emptyChild:function(){return this._setChild()},_attachChannel:function(e,t,r){this._canvases[e]=t,this._ctxs[e]=r},_setChild:function(e){var t=this._container,r=t.children[0];r&&t.removeChild(r),e&&t.appendChild(e)}},t.exports=r},{"./Channels":25,"./StoreImages":33,"./StoreTransitions":34,"glsl-transition-core":56,"kenburns-webgl":58}],29:[function(e,t){function r(e,t){o.call(this,e,t),this._needRender=!1}var n=e("object-assign"),o=e("./SegmentTimeline"),i=e("rect-crop");r.prototype=n({},o.prototype,{ready:function(){return!0},enter:function(e){return this.ctx=e.getChannelContext(this.channel),this._render(),["slide",this.data]},resize:function(){this._needRender=!0},leave:function(){return["slideEnd",this.data]},render:function(){this._needRender&&this._render()},_render:function(){this._needRender=!1;var e=this.ctx,t=e.canvas,r=t.width,n=t.height,o=this.data.canvas2d,s=o.size||[1e3,1e3],a=s[0],l=s[1],f=o.background||"black",u=o.draws||[];e.save(),e.fillStyle=f,e.fillRect(0,0,r,n);var c=i.largest({width:a,height:l},t);e.translate(Math.round(c[0]),Math.round(c[1])),e.scale(c[2]/a,c[3]/l);for(var d=0;d<u.length;++d){var h=u[d];if(h instanceof Array){var p=h.slice(1);e[h[0]].apply(e,p)}else for(var g in h)e[g]=h[g]}e.restore()}}),t.exports=r},{"./SegmentTimeline":31,"object-assign":59,"rect-crop":63}],30:[function(e,t){function r(e,t){l.call(this,e,t),this.clamped=!0}var n=e("object-assign"),o=e("rect-clamp"),i=e("rect-crop"),s=e("rect-mix"),a=e("bezier-easing"),l=e("./SegmentTimeline");r.prototype=n({},l.prototype,{ready:function(e){return e.images.has(this.data.image)},enter:function(e){var t=this.data,r=e.images.get(t.image),n=e.getChannelContext(this.channel);this.kenburns=n,this.image=r,this.canvas=e.getChannel(this.channel);var o=i.largest,s=i.largest;return t.kenburns&&(t.kenburns.from&&(o=i.apply(null,t.kenburns.from)),t.kenburns.to&&(s=i.apply(null,t.kenburns.to))),this.from=o,this.to=s,this.easing=a.apply(null,t.kenburns&&t.kenburns.easing||[0,0,1,1]),this.viewport=[0,0,r.width,r.height],this.computeBounds(),n.runStart&&n.runStart(r),["slide",t]},resize:function(){this.computeBounds()},leave:function(){var e=this.kenburns;return e.runEnd&&e.runEnd(),["slideEnd",this.data]},render:function(e){var t=this.image,r=this.kenburns,n=s(this.fromCropBound,this.toCropBound,this.easing(e));this.clamped&&(n=o(n,this.viewport)),r.draw(t,n)},cropBound:function(e){var t=this.canvas,r=this.image,n=e(t,r);return this.clamped&&(n=o(n,this.viewport)),n},computeBounds:function(){this.fromCropBound=this.cropBound(this.from),this.toCropBound=this.cropBound(this.to)}}),t.exports=r},{"./SegmentTimeline":31,"bezier-easing":39,"object-assign":59,"rect-clamp":62,"rect-crop":63,"rect-mix":64}],31:[function(e,t){function r(e,t){this.channel=e,this.data=t}var n=e("./noop");r.prototype={ready:function(){return!0},enter:n,leave:n,render:n,resize:n},t.exports=r},{"./noop":38}],32:[function(e,t){function r(e,t,r,n){i.call(this,e,t),this.segmentFrom=r,this.segmentTo=n}var n=e("object-assign"),o=e("bezier-easing"),i=e("./SegmentTimeline");r.prototype=n({},i.prototype,{ready:function(e){return this.segmentFrom.ready(e)&&this.segmentTo.ready(e)&&(!this.data.name||e.transitions.has(this.data.name))},enter:function(e){var t=this.data,r=e.getChannel(this.segmentFrom.channel),i=e.getChannel(this.segmentTo.channel);this.from=r,this.to=i;var s=e.transitions.getOrFade(t.name);this.transition=s.t,this.transition.load(),this.duration=t.duration||1e3,this.easing=o.apply(null,t.easing||[0,0,1,1]);var a=n({},s.uniforms,t.uniforms||{});this.transition.bind();for(var l in a)this.transition.setUniform(l,a[l]);return this.transition.syncViewport(),["transition",this.data,this.segmentFrom.data,this.segmentTo.data]},resize:function(){this.transition.syncViewport()},leave:function(){return["transitionEnd",this.data,this.segmentFrom.data,this.segmentTo.data]},render:function(e){var t=this.transition;t.setProgress(this.easing(e)),t.setUniform("from",this.from),t.setUniform("to",this.to),t.draw()}}),t.exports=r},{"./SegmentTimeline":31,"bezier-easing":39,"object-assign":59}],33:[function(e,t){function r(e){this.imgs={},this._loading=[],this._threshold=e||3,this._queue=[]}var n=e("object-assign"),o=e("events").EventEmitter;r.prototype=n({},o.prototype,{destroy:function(){this.removeAllListeners(),this.imgs={},this._loading=[],this._queue=[]},has:function(e){return e in this.imgs},get:function(e){return this.imgs[e]},load:function(e){this._loading.length>=this._threshold?this._queue.push(e):this._loadImage(e)},_loadImage:function(e){if(-1===this._loading.indexOf(e)){var t=this,r=new window.Image;r.crossOrigin=!0,this._take(e),r.onload=function(){t._release(e)&&(t.imgs[e]=r,t.emit("load",e,r))},r.onabort=r.onerror=function(r){t._release(e)&&(t.imgs[e]=null,t.emit("error",e,r))},r.src=e}},_take:function(e){this._loading.push(e)},_release:function(e){var t=this._loading.indexOf(e);if(-1===t)return!1;if(this._loading.splice(t,1),this._queue.length>0){var r=this._queue.shift();this._loadImage(r)}return!0}}),t.exports=r},{events:5,"object-assign":59}],34:[function(e,t){function r(e){this.T=e,this.ts={},this.set("fade",n)}var n=e("glsl-transition-fade");r.prototype={destroy:function(){for(var e in this.ts)this.ts[e].t.destroy();this.ts=null},has:function(e){return e in this.ts},set:function(e,t){var r=this.T(t.glsl);this.ts[e]={t:r,uniforms:t.uniforms||{}}},get:function(e){return this.ts[e]},getOrFade:function(e){return e&&this.ts[e]||this.ts.fade}},t.exports=r},{"glsl-transition-fade":57}],35:[function(e,t){function r(e,t){this.startT=e,this.endT=t}var n=e("./mix");r.prototype={timeInside:function(e){return this.startT<=e&&e<this.endT},interpolate:function(e){return n(this.startT,this.endT,e)}},t.exports=r},{"./mix":37}],36:[function(e,t){t.exports=function(e,t){for(var r=0;r<t.length;++r)if(t[r].name.toLowerCase()===e.toLowerCase())return t[r]}},{}],37:[function(e,t){t.exports=function(e,t,r){return Math.max(0,Math.min(1,(r-e)/(t-e)))}},{}],38:[function(e,t){t.exports=function(){}},{}],39:[function(e,t,r){!function(e){"object"==typeof r?t.exports=e():"function"==typeof define&&define.amd?define([],e):window.BezierEasing=e()}(function(){function e(e,t,f,u){function c(e,t){return 1-3*t+3*e}function d(e,t){return 3*t-6*e}function h(e){return 3*e}function p(e,t,r){return((c(t,r)*e+d(t,r))*e+h(t))*e}function g(e,t,r){return 3*c(t,r)*e*e+2*d(t,r)*e+h(t)}function m(t,n){for(var o=0;r>o;++o){var i=g(n,e,f);if(0===i)return n;var s=p(n,e,f)-t;n-=s/i}return n}function v(){for(var t=0;s>t;++t)w[t]=p(t*a,e,f)}function x(t,r,n){var s,a,l=0;do a=r+(n-r)/2,s=p(a,e,f)-t,s>0?n=a:r=a;while(Math.abs(s)>o&&++l<i);return a}function _(t){for(var r=0,o=1,i=s-1;o!=i&&w[o]<=t;++o)r+=a;--o;var l=(t-w[o])/(w[o+1]-w[o]),u=r+l*a,c=g(u,e,f);return c>=n?m(t,u):0===c?u:x(t,r,r+a)}function b(){T=!0,(e!=t||f!=u)&&v()}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var y=0;4>y;++y)if("number"!=typeof arguments[y]||isNaN(arguments[y])||!isFinite(arguments[y]))throw new Error("BezierEasing arguments should be integers.");if(0>e||e>1||0>f||f>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var w=l?new Float32Array(s):new Array(s),T=!1,C=function(r){return T||b(),e===t&&f===u?r:0===r?0:1===r?1:p(_(r),t,u)};C.getControlPoints=function(){return[{x:e,y:t},{x:f,y:u}]};var E=[e,t,f,u],D="BezierEasing("+E+")";C.toString=function(){return D};var S="cubic-bezier("+E+")";return C.toCSS=function(){return S},C}var t=this,r=4,n=.001,o=1e-7,i=10,s=11,a=1/(s-1),l="Float32Array"in t;return e.css={ease:e(.25,.1,.25,1),linear:e(0,0,1,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1)},e})},{}],40:[function(e,t){"use strict";function r(e,t,r,n,o,i,s){this._gl=e,this._program=t,this._location=r,this._dimension=n,this._name=o,this._constFunc=i,this._relink=s}function n(e,t,n,o,i,s,a){for(var l=["gl","v"],f=[],u=0;o>u;++u)l.push("x"+u),f.push("x"+u);l.push(["if(x0.length===undefined){return gl.vertexAttrib",o,"f(v,",f.join(","),")}else{return gl.vertexAttrib",o,"fv(v,x0)}"].join(""));var c=Function.apply(void 0,l),d=new r(e,t,n,o,s,c,a);
Object.defineProperty(i,s,{set:function(t){return e.disableVertexAttribArray(d._location),c(e,d._location,t),t},get:function(){return d},enumerable:!0})}function o(e,t,r,o){for(var i={},s=0,a=r.length;a>s;++s){var l=r[s],f=l.name,u=l.type,c=e.getAttribLocation(t,f);switch(u){case"bool":case"int":case"float":n(e,t,c,1,i,f,o);break;default:if(!(u.indexOf("vec")>=0))throw new Error("Unknown data type for attribute "+f+": "+u);var d=u.charCodeAt(u.length-1)-48;if(2>d||d>4)throw new Error("Invalid data type for attribute "+f+": "+u);n(e,t,c,d,i,f,o)}}return i}t.exports=o;var i=r.prototype;i.pointer=function(e,t,r,n){var o=this._gl;o.vertexAttribPointer(this._location,this._dimension,e||o.FLOAT,t?o.TRUE:o.FALSE,r||0,n||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(i,"location",{get:function(){return this._location},set:function(e){e!==this._location&&(this._location=e,this._gl.bindAttribLocation(this._program,e,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],41:[function(e,t){"use strict";function r(e){var t=new Function("y","return function(){return y}");return t(e)}function n(e,t,n,s){function a(r){var n=new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+r+"])}");return n(e,t,s)}function l(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(n>=0&&1>=n&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var o=r.charCodeAt(r.length-1)-48;if(2>o||o>4)throw new Error("Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+o+"fv(locations["+t+"],false,obj"+e+")"}throw new Error("Unknown uniform data type for "+name+": "+r)}var o=r.charCodeAt(r.length-1)-48;if(2>o||o>4)throw new Error("Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+o+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+o+"fv(locations["+t+"],obj"+e+")";default:throw new Error("Unrecognized data type for vector "+name+": "+r)}}}function f(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var n in t){var o=t[n],i=e;i+=parseInt(n)+""===n?"["+n+"]":"."+n,"object"==typeof o?r.push.apply(r,f(i,o)):r.push([i,o])}return r}function u(r){for(var o=["return function updateProperty(obj){"],i=f("",r),a=0;a<i.length;++a){var u=i[a],c=u[0],d=u[1];s[d]&&o.push(l(c,d,n[d].type))}o.push("return obj}");var h=new Function("gl","prog","locations",o.join("\n"));return h(e,t,s)}function c(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(t>=0&&1>=t&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new Error("Invalid data type");return"b"===e.charAt(0)?o(r,!1):o(r)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new Error("Invalid uniform dimension type for matrix "+name+": "+e);return o([r,r])}throw new Error("Unknown uniform data type for "+name+": "+e)}}function d(e,t,o){if("object"==typeof o){var i=h(o);Object.defineProperty(e,t,{get:r(i),set:u(o),enumerable:!0,configurable:!1})}else s[o]?Object.defineProperty(e,t,{get:a(o),set:u(o),enumerable:!0,configurable:!1}):e[t]=c(n[o].type)}function h(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)d(t,r,e[r])}else{t={};for(var n in e)d(t,n,e[n])}return t}var p=i(n,!0);return{get:r(h(p)),set:u(p),enumerable:!0,configurable:!0}}var o=e("dup"),i=e("./reflect.js");t.exports=n},{"./reflect.js":42,dup:43}],42:[function(e,t){"use strict";function r(e,t){for(var r={},n=0;n<e.length;++n)for(var o=e[n].name,i=o.split("."),s=r,a=0;a<i.length;++a){var l=i[a].split("[");if(l.length>1){l[0]in s||(s[l[0]]=[]),s=s[l[0]];for(var f=1;f<l.length;++f){var u=parseInt(l[f]);f<l.length-1||a<i.length-1?(u in s||(s[u]=f<l.length-1?[]:{}),s=s[u]):s[u]=t?n:e[n].type}}else a<i.length-1?(l[0]in s||(s[l[0]]={}),s=s[l[0]]):s[l[0]]=t?n:e[n].type}return r}t.exports=r},{}],43:[function(e,t){"use strict";function r(e,t,n){var o=0|e[n];if(0>=o)return[];var i,s=new Array(o);if(n===e.length-1)for(i=0;o>i;++i)s[i]=t;else for(i=0;o>i;++i)s[i]=r(e,t,n+1);return s}function n(e,t){var r,n;for(r=new Array(e),n=0;e>n;++n)r[n]=t;return r}function o(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return n(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=o},{}],44:[function(e,t){"use strict";function r(e,t,r,n){this.gl=e,this.handle=t,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=r,this.fragmentShader=n}function n(e,t,r,n){for(var o=0;o<n.length;++o)r[o]=e.getUniformLocation(t,n[o].name)}function o(e,t,n,o,i){var s=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+e.getShaderInfoLog(s));var a=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+e.getShaderInfoLog(a));var l=e.createProgram();if(e.attachShader(l,a),e.attachShader(l,s),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw new Error("Error linking shader program: "+e.getProgramInfoLog(l));var f=new r(e,l,s,a);return f.updateExports(o,i),f}var i=e("./lib/create-uniforms.js"),s=e("./lib/create-attributes.js"),a=e("./lib/reflect.js");r.prototype.bind=function(){this.gl.useProgram(this.handle)},r.prototype.dispose=function(){var e=this.gl;e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader),e.deleteProgram(this.handle)},r.prototype.updateExports=function(e,t){var r=new Array(e.length),o=this.handle,l=this.gl,f=n.bind(void 0,l,o,r,e);f(),this.types={uniforms:a(e),attributes:a(t)},this.attributes=s(l,o,t,f),Object.defineProperty(this,"uniforms",i(l,o,e,r))},t.exports=o},{"./lib/create-attributes.js":40,"./lib/create-uniforms.js":41,"./lib/reflect.js":42}],45:[function(e,t){"use strict";function r(e){for(var t,r,n=[],r=0;r<e.children.length;++r){var o=e.children[r];if("placeholder"!==o.type)if("keyword"===o.type){if("uniform"===o.token.data||"attribute"===o.token.data)continue;t=o.token.data}else if("decllist"===o.type)for(var i=0;i<o.children.length;++i){var s=o.children[i];"ident"===s.type&&n.push(s.token.data)}}return{type:t,vars:n}}function n(e){var t={},n={},a=s();return a.pipe(o()).pipe(i()).on("data",function(e){if("decl"===e.type&&"keyword"===e.token.type)if("uniform"===e.token.data)for(var o=r(e),i=0;i<o.vars.length;++i)t[o.vars[i]]=o.type;else if("attribute"===e.token.data)for(var o=r(e),i=0;i<o.vars.length;++i)n[o.vars[i]]=o.type}),a.write(e),{uniforms:t,attributes:n}}var o=e("glsl-tokenizer"),i=e("glsl-parser"),s=e("through");t.exports=n},{"glsl-parser":46,"glsl-tokenizer":51,through:55}],46:[function(e,t){t.exports=e("./lib/index")},{"./lib/index":48}],47:[function(e,t){function r(){return this}function n(e,t){var r=v[e];return t=t||0,r?t>r.lbp&&(r.lbp=t):(r=Object.create(m),r.id=e,r.lbp=t,v[e]=r),r}function o(e){var t,r=h;for(u(),t=r.nud();e<h.lbp;)r=h,u(),t=r.led(t);return t}function i(e,t,r){var i=n(e,t);i.led=r||function(e){return this.children=[e,o(t)],this.type="binary",this}}function s(e,t,r){var i=n(e,t);return i.led=r||function(e){return this.children=[e,o(t-1)],this.type="binary",this},i}function a(e,t){var r=n(e);return r.nud=t||function(){return this.children=[o(70)],this.type="unary",this},r}function l(e){var t=n(e,150);t.led=function(e){return this.children=[e],this.type="suffix",this}}function f(e){return s(e,10,function(e){return this.children=[e,o(9)],this.assignment=!0,this.type="assign",this})}function u(e){var t,n,o,i;if(e&&h.data!==e)return d.unexpected("expected `"+e+"`, got `"+h.data+"`");if(g>=p.length)return void(h=v["(end)"]);if(t=p[g++],n=t.data,o=t.type,"ident"===o)i=d.scope.find(n)||d.create_node(),o=i.type;else if("builtin"===o)i=v["(builtin)"];else if("keyword"===o)i=v["(keyword)"];else if("operator"===o){if(i=v[n],!i)return d.unexpected("unknown operator `"+n+"`")}else{if("float"!==o&&"integer"!==o)return d.unexpected("unexpected token.");o="literal",i=v["(literal)"]}return i&&(i.nud||(i.nud=r),i.children||(i.children=[])),i=Object.create(i),i.token=t,i.type=o,i.data||(i.data=n),h=i}function c(e){return function(){return d.unexpected(e)}}var d,h,p,g,m={nud:function(){return this.children&&this.children.length?this:c("unexpected")()},led:c("missing operator")},v={};n("(ident)").nud=r,n("(keyword)").nud=r,n("(builtin)").nud=r,n("(literal)").nud=r,n("(end)"),n(":"),n(";"),n(","),n(")"),n("]"),n("}"),s("&&",30),s("||",30),i("|",43),i("^",44),i("&",45),i("==",46),i("!=",46),i("<",47),i("<=",47),i(">",47),i(">=",47),i(">>",48),i("<<",48),i("+",50),i("-",50),i("*",60),i("/",60),i("%",60),i("?",20,function(e){return this.children=[e,o(0),(u(":"),o(0))],this.type="ternary",this}),i(".",80,function(e){return h.type="literal",d.fake(h),this.children=[e,h],u(),this}),i("[",80,function(e){return this.children=[e,o(0)],this.type="binary",u("]"),this}),i("(",80,function(e){if(this.children=[e],this.type="call",")"!==h.data)for(;;){if(this.children.push(o(0)),","!==h.data)break;u(",")}return u(")"),this}),a("-"),a("+"),a("!"),a("~"),a("defined"),a("(",function(){return this.type="group",this.children=[o(0)],u(")"),this}),a("++"),a("--"),l("++"),l("--"),f("="),f("+="),f("-="),f("*="),f("/="),f("%="),f("&="),f("|="),f("^="),f(">>="),f("<<="),t.exports=function(e,t){function r(e){d.unshift(e,!1);for(var t=0,n=e.children.length;n>t;++t)r(e.children[t]);d.shift()}d=e,p=t,g=0;var n;if(p.length){if(u(),n=o(0),n.parent=d[0],r(n),g<p.length)throw new Error("did not use all tokens");n.parent.children=[n]}}},{}],48:[function(e,t){function r(){function e(e){if("whitespace"===e.type||"line-comment"===e.type||"block-comment"===e.type)return void Kt.push(e);for(Ht.push(e),Ft=Ft||Ht[0],Ft&&Kt.length&&(Ft.preceding=Ft.preceding||[],Ft.preceding=Ft.preceding.concat(Kt),Kt=[]);r();)switch(Vt[0].mode){case p:K();break;case g:z();break;case _:Q();break;case b:J();break;case C:rt();break;case m:bt(!0,!0);break;case E:yt();break;case h:tt();break;case L:et();break;case k:$();break;case v:Lt();break;case x:kt();break;case y:Tt();break;case w:Dt();break;case I:St();break;case R:Et();break;case T:Ct();break;case j:wt()}}function t(t){return arguments.length&&e(t),Vt.length>1?void ft("unexpected EOF"):void Xt.emit("end")}function r(){return Qt||!Vt.length?!1:(Ft=Ht[0])&&!Xt.paused}function d(e){Vt.unshift(e),Vt.shift()}function D(e,t){e.parent=Vt[0];var r=[].unshift.call(this,e);if(t=void 0===t?!0:t,c){for(var n="",o=0,i=this.length-1;i>o;++o)n+=" |";console.log(n,"\\"+e.type,e.token.data)}return t&&Pt!==e&&Pt.children.push(e),Pt=e,r}function S(){var e=[].shift.call(this),t=Wt[this.length],r=!1;if(c){for(var n="",o=0,i=this.length;i>o;++o)n+=" |";console.log(n,"/"+e.type)}return Wt.length?"function"==typeof Wt[0]?r=Wt[0](e):void 0!==t&&(r=t.test?t.test(e.type):t===e.type):r=!0,r&&Xt.emit("data",e),Pt=e.parent,e}function z(){function e(){if(Ft.data===Vt[0].expecting)return Vt.scope.exit(),Vt.shift();switch(Ft.type){case"preprocessor":return Vt.fake(ot()),void Ht.shift();default:return void Vt.unshift(It())}}return dt(function(){return Vt.scope.enter(),u},e)()}function K(){if(Vt[0].brace)return"}"!==Ft.data?ft("expected `}`, got "+Ft.data):(Vt[0].brace=!1,Ht.shift(),Vt.shift());switch(Ft.type){case"eof":return Vt.shift();case"keyword":switch(Ft.data){case"for":return Vt.unshift(Ot());case"if":return Vt.unshift(Zt());case"while":return Vt.unshift(Nt());case"do":return Vt.unshift(qt());case"break":return Vt.fake(n(F,Ft)),Ht.shift();case"continue":return Vt.fake(n(P,Ft)),Ht.shift();case"discard":return Vt.fake(n(A,Ft)),Ht.shift();case"return":return Vt.unshift(Gt());case"precision":return Vt.unshift(jt())}return Vt.unshift(it(q));case"ident":var e;if(e=Vt.scope.find(Ft.data))return Vt.unshift("struct"===e.parent.type?it(q):at(";"));case"operator":if("{"===Ft.data){Vt[0].brace=!0;var t=At();return t.expecting="}",Ht.shift(),Vt.unshift(t)}if(";"===Ft.data)return Ht.shift(),Vt.shift();default:return Vt.unshift(at(";"))}}function Q(){function e(){return"invariant"===Ft.data?p.flags&O?(Vt.unshift(lt()),u):ft("`invariant` is not allowed here"):(Vt.fake(n(M,{data:"",position:Ft.position})),u)}function t(){return o(Ft)?p.flags&Z?(Vt.unshift(lt()),u):ft("storage is not allowed here"):(Vt.fake(n(M,{data:"",position:Ft.position})),u)}function r(){return i(Ft)?p.flags&N?ft("parameter is not allowed here"):(Vt.unshift(lt()),u):(Vt.fake(n(M,{data:"",position:Ft.position})),u)}function a(){return s(Ft)?(Vt.unshift(lt()),u):(Vt.fake(n(M,{data:"",position:Ft.position})),u)}function l(){if("struct"===Ft.data)return p.flags&G?(Vt.unshift(st()),u):ft("cannot nest structs");if("keyword"===Ft.type)return Vt.unshift(lt()),u;var e=Vt.scope.find(Ft.data);return e?(Vt.fake(Object.create(e)),Ht.shift(),u):ft("expected user defined type, struct or keyword, got "+Ft.data)}function f(){return","!==Ft.data||p.flags&U?"["===Ft.data?void Vt.unshift(Yt()):")"===Ft.data?Vt.shift():";"===Ft.data?p.stage+3:"ident"!==Ft.type&&"builtin"!==Ft.type?ft("expected identifier, got "+Ft.data):(p.collected_name=Ht.shift(),u):Vt.shift()}function c(){return"("===Ft.data?(Ht.unshift(p.collected_name),delete p.collected_name,Vt.unshift(Ut()),p.stage+2):u}function d(){return Ht.unshift(p.collected_name),delete p.collected_name,Vt.unshift(Mt()),u}function h(){return Vt.shift()}var p=Vt[0];return dt(e,t,r,a,l,f,c,d,h)()}function J(){if("ident"===Ft.type){var e=Ft.data;return Vt.unshift(Bt()),void Vt.scope.define(e)}if("operator"===Ft.type){if(","===Ft.data)return Vt[1].flags&U?Ht.shift():Vt.shift();if("="===Ft.data)return Vt[1].flags&B?(Ht.shift(),void Vt.unshift(at(",",";"))):ft("`=` is not allowed here.");if("["===Ft.data)return void Vt.unshift(Yt())}return Vt.shift()}function $(){return"keyword"===Ft.type?(Vt[0].type="keyword",void(Vt[0].mode=L)):"ident"===Ft.type?(Vt[0].type="ident",void(Vt[0].mode=h)):ft("expected keyword or user-defined name, got "+Ft.data)}function et(){return"keyword"!==Ft.type?ft("expected keyword, got "+Ft.data):(Vt.shift(),Ht.shift())}function tt(){return"ident"!==Ft.type?ft("expected user-defined name, got "+Ft.data):(Vt[0].data=Ft.data,Vt.shift(),Ht.shift())}function rt(){function e(e){return l(Vt,e),Vt.shift()}var t=Vt[0].expecting;if(Vt[0].tokens=Vt[0].tokens||[],void 0===Vt[0].parenlevel&&(Vt[0].parenlevel=0,Vt[0].bracelevel=0),Vt[0].parenlevel<1&&t.indexOf(Ft.data)>-1)return e(Vt[0].tokens);switch("("===Ft.data?++Vt[0].parenlevel:")"===Ft.data&&--Vt[0].parenlevel,Ft.data){case"{":++Vt[0].bracelevel;break;case"}":--Vt[0].bracelevel;break;case"(":++Vt[0].parenlevel;break;case")":--Vt[0].parenlevel}return Vt[0].parenlevel<0?ft("unexpected `)`"):Vt[0].bracelevel<0?ft("unexpected `}`"):void Vt[0].tokens.push(Ht.shift())}function nt(e){return function(){return n(e,Ft)}}function ot(){return n(H[Ft.type],Ft,Pt)}function it(e){var t=n(_,Ft,Pt);return t.flags=e,t}function st(e,t){var r=n(m,Ft,Pt);return r.allow_assign=void 0===e?!0:e,r.allow_comma=void 0===t?!0:t,r}function at(){var e=n(C,Ft,Pt);return e.expecting=[].slice.call(arguments),e}function lt(e){var t=Ft;return e&&(t={type:"(implied)",data:"(default)",position:t.position}),n(L,t,Pt)}function ft(e){Qt=!0,Xt.emit("error",new Error((e||"unexpected "+Vt)+" at line "+Vt[0].token.line))}function ut(e,t){return ct(e,Ft.type)&&ct(t,Ft.data)}function ct(e,t){switch(typeof e){case"string":return t!==e&&ft("expected `"+e+"`, got "+t+"\n"+Ft.data),!Qt;case"object":return e&&-1===e.indexOf(t)&&ft("expected one of `"+e.join("`, `")+"`, got "+t),!Qt}return!0}function dt(){var e,t,r=[].slice.call(arguments);return function(){var n=Vt[0];return n.stage||(n.stage=0),(e=r[n.stage])?(t=e(),t===u?++n.stage:void(void 0!==t&&(n.stage=t))):ft("parser in undefined state!")}}function ht(e,t){return t=t||"operator",function(){if(ut(t,e)){var r=Ht.shift(),n=Vt[0].children,o=n[n.length-1];return o&&o.token&&r.preceding&&(o.token.succeeding=o.token.succeeding||[],o.token.succeeding=o.token.succeeding.concat(r.preceding)),u}}}function pt(e){return function(){return Vt.unshift(at(e)),u}}function gt(e){return e?function(){var e=Ft.data;return ut("ident")&&(Vt.unshift(Bt()),Vt.scope.define(e),u)}:function(){if(ut("ident")){var e=Object.create(Vt.scope.find(Ft.data));return e.token=Ft,Ht.shift(),u}}}function mt(){return function(){var e=At();return e.expecting="}",Vt.unshift(e),u}}function vt(e){return function(){var t=Vt[0].stage;return"{"!==Ft.data?(Vt.unshift(It()),t+e):(Ht.shift(),u)}}function xt(){return function(){return Vt.shift(),Vt.shift()}}function _t(){bt=dt(ht("struct","keyword"),function(){return"{"===Ft.data?(Vt.fake(n(h,{data:"",position:Ft.position,type:"ident"})),u):gt(!0)()},function(){return Vt.scope.enter(),u},ht("{"),function(){return"preprocessor"===Ft.type?(Vt.fake(ot()),void Ht.shift()):"}"===Ft.data?(Vt.scope.exit(),Ht.shift(),Vt.shift()):";"===Ft.data?void Ht.shift():void Vt.unshift(it(X))}),yt=dt(function(){return Ht.shift(),u},function(){return ut("keyword",["lowp","mediump","highp"])&&(Vt.unshift(lt()),u)},function(){return Vt.unshift(lt()),u},function(){return Vt.shift()}),wt=dt(ht("["),pt("]"),ht("]"),function(){return Vt.shift()}),Tt=dt(ht("for","keyword"),ht("("),function(){var e;if("ident"===Ft.type){if((e=Vt.scope.find(Ft.data))||(e=Vt.create_node()),"struct"===e.parent.type)return Vt.unshift(it(q)),u}else if("builtin"===Ft.type||"keyword"===Ft.type)return Vt.unshift(it(q)),u;return pt(";")()},ht(";"),pt(";"),ht(";"),pt(")"),ht(")"),vt(3),mt(),ht("}"),xt()),Ct=dt(ht("if","keyword"),ht("("),pt(")"),ht(")"),vt(3),mt(),ht("}"),function(){return"else"===Ft.data?(Ht.shift(),Vt.unshift(It()),u):xt()()},xt()),Et=dt(ht("return","keyword"),function(){return";"===Ft.data?u:(Vt.unshift(at(";")),u)},function(){Ht.shift(),xt()()}),Dt=dt(ht("while","keyword"),ht("("),pt(")"),ht(")"),vt(3),mt(),ht("}"),xt()),St=dt(ht("do","keyword"),vt(3),mt(),ht("}"),ht("while","keyword"),ht("("),pt(")"),ht(")"),xt()),Lt=dt(function(){for(var e=1,t=Vt.length;t>e;++e)if(Vt[e].mode===v)return ft("function definition is not allowed within another function");return u},function(){if(ut("ident")){var e=Ft.data,t=Vt.scope.find(e);return Vt.unshift(Bt()),Vt.scope.define(e),Vt.scope.enter(t?t.scope:null),u}},ht("("),function(){return Vt.unshift(zt()),u},ht(")"),function(){return";"===Ft.data?(Vt.scope.exit(),Vt.shift(),Vt.shift()):u},ht("{"),mt(),ht("}"),function(){return Vt.scope.exit(),u},function(){return Vt.shift(),Vt.shift(),Vt.shift()}),kt=dt(function(){return"void"===Ft.data?(Vt.fake(lt()),Ht.shift(),u):")"===Ft.data?void Vt.shift():"struct"===Ft.data?(Vt.unshift(st(W,V)),u):(Vt.unshift(it(Y)),u)},function(){return","===Ft.data?(Ht.shift(),0):")"===Ft.data?void Vt.shift():void ft("expected one of `,` or `)`, got "+Ft.data)})}var bt,yt,wt,Tt,Ct,Et,Dt,St,Lt,kt,Rt,Ft,Pt,At=nt(g),It=nt(p),Mt=nt(b),jt=nt(E),Bt=nt(h),Ut=(nt(k),nt(v)),zt=nt(x),Ot=nt(y),Zt=nt(T),Nt=nt(w),Gt=nt(R),qt=nt(I),Yt=nt(j),Xt=a(e,t),Wt=arguments.length?[].slice.call(arguments):[],Vt=[],Ht=[],Kt=[],Qt=!1;return Vt.shift=S,Vt.unshift=D,Vt.fake=d,Vt.unexpected=ft,Vt.scope=new f(Vt),Vt.create_node=function(){var e=n(h,Ft);return e.parent=Xt.program,e},_t(),Pt=At(),Pt.expecting="(eof)",Pt.mode=g,Pt.token={type:"(program)",data:"(program)"},Rt=Pt,Xt.program=Rt,Xt.scope=function(e){return 1===arguments.length&&(Vt.scope=e),Vt.scope},Vt.unshift(Pt),Xt}function n(e,t){return{mode:e,token:t,children:[],type:K[e],id:(4294967295*Math.random()).toString(16)}}function o(e){return"const"===e.data||"attribute"===e.data||"uniform"===e.data||"varying"===e.data}function i(e){return"in"===e.data||"inout"===e.data||"out"===e.data}function s(e){return"highp"===e.data||"mediump"===e.data||"lowp"===e.data}t.exports=r;var a=e("through"),l=e("./expr"),f=e("./scope"),u=new Object,c=!1,d=0,h=d++,p=d++,g=d++,m=d++,v=d++,x=d++,_=d++,b=d++,y=d++,w=d++,T=d++,C=d++,E=d++,D=d++,S=d++,L=d++,k=d++,R=d++,F=d++,P=d++,A=d++,I=d++,M=d++,j=d++,B=1,U=2,z=4,O=8,Z=16,N=32,G=64,q=255,Y=q&~(B|U|N|O|z),X=q&~(B|O|Z|G),W=!1,V=!1,H={"block-comment":D,"line-comment":D,preprocessor:S},K=d=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"]},{"./expr":47,"./scope":49,through:50}],49:[function(e,t){function r(e){return this.constructor!==r?new r(e):(this.state=e,this.scopes=[],void(this.current=null))}t.exports=r;var n=r,o=n.prototype;o.enter=function(e){this.scopes.push(this.current=this.state[0].scope=e||{})},o.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]},o.define=function(e){this.current[e]=this.state[0]},o.find=function(e){for(var t=this.scopes.length-1;t>-1;--t)if(this.scopes[t].hasOwnProperty(e))return this.scopes[t][e];return null}},{}],50:[function(e,t,r){(function(n){function o(e,t){function r(){for(;f.length&&!l.paused;){var e=f.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function o(){l.writable=!1,t.call(l),l.readable||l.destroy()}e=e||function(e){this.emit("data",e)},t=t||function(){this.emit("end")};var s=!1,a=!1,l=new i,f=[];return l.buffer=f,l.readable=l.writable=!0,l.paused=!1,l.write=function(t){return e.call(this,t),!l.paused},l.queue=function(e){f.push(e),r()},l.on("end",function(){l.readable=!1,l.writable||n.nextTick(function(){l.destroy()})}),l.end=function(e){s||(s=!0,arguments.length&&l.write(e),o())},l.destroy=function(){a||(a=!0,s=!0,f.length=0,l.writable=l.readable=!1,l.emit("close"))},l.pause=function(){l.paused||(l.paused=!0,l.emit("pause"))},l.resume=function(){l.paused&&(l.paused=!1),r(),l.paused||l.emit("drain")},l}var i=e("stream");r=t.exports=o,o.through=o}).call(this,e("_process"))},{_process:8,stream:20}],51:[function(e,t){function r(){function e(e){e.length&&j.queue({type:y[z],data:e,position:N,line:Z})}function t(e){for(B=0,Y+=e.toString(),M=Y.length;A=Y[B],M>B;)switch(z){case f:B=D();break;case u:B=E();break;case c:B=C();break;case d:B=S();break;case h:B=R();break;case b:B=k();break;case p:B=F();break;case l:B=P();break;case x:B=T();break;case a:B=w()}U+=B,Y=Y.slice(B)}function r(){O.length&&e(O.join("")),z=_,e("(eof)"),j.queue(null)}function w(){return O=O.length?[]:O,"/"===I&&"*"===A?(N=U+B-1,z=f,I=A,B+1):"/"===I&&"/"===A?(N=U+B-1,z=u,I=A,B+1):"#"===A?(z=c,N=U+B,B):/\s/.test(A)?(z=x,N=U+B,B):(G=/\d/.test(A),q=/[^\w_]/.test(A),N=U+B,z=G?h:q?d:l,B)}function T(){return"\n"===A&&++Z,/[^\s]/g.test(A)?(e(O.join("")),z=a,B):(O.push(A),I=A,B+1)}function C(){return"\n"===A&&++Z,"\n"===A&&"\\"!==I?(e(O.join("")),z=a,B):(O.push(A),I=A,B+1)}function E(){return C()}function D(){return"/"===A&&"*"===I?(O.push(A),e(O.join("")),z=a,B+1):("\n"===A&&++Z,O.push(A),I=A,B+1)}function S(){if("."===I&&/\d/.test(A))return z=p,B;if("/"===I&&"*"===A)return z=f,B;if("/"===I&&"/"===A)return z=u,B;if("."===A&&O.length){for(;L(O););return z=p,B}if(";"===A||")"===A||"("===A){if(O.length)for(;L(O););return e(A),z=a,B+1}var t=2===O.length&&"="!==A;if(/[\w_\d\s]/.test(A)||t){for(;L(O););return z=a,B}return O.push(A),I=A,B+1}function L(t){for(var r,n=0;;){r=i.indexOf(t.slice(0,t.length+n).join(""));{if(-1!==r)return e(i[r]),N+=i[r].length,O=O.slice(i[r].length),O.length;n-=1}}}function k(){return/[^a-fA-F0-9]/.test(A)?(e(O.join("")),z=a,B):(O.push(A),I=A,B+1)}function R(){return"."===A?(O.push(A),z=p,I=A,B+1):/[eE]/.test(A)?(O.push(A),z=p,I=A,B+1):"x"===A&&1===O.length&&"0"===O[0]?(z=b,O.push(A),I=A,B+1):/[^\d]/.test(A)?(e(O.join("")),z=a,B):(O.push(A),I=A,B+1)}function F(){return"f"===A&&(O.push(A),I=A,B+=1),/[eE]/.test(A)?(O.push(A),I=A,B+1):/[^\d]/.test(A)?(e(O.join("")),z=a,B):(O.push(A),I=A,B+1)}function P(){if(/[^\d\w_]/.test(A)){var t=O.join("");return z=o.indexOf(t)>-1?v:s.indexOf(t)>-1?m:g,e(O.join("")),z=a,B}return O.push(A),I=A,B+1}var A,I,M,j=n(t,r),B=0,U=0,z=a,O=[],Z=1,N=0,G=!1,q=!1,Y="";return j}t.exports=r;var n=e("through"),o=e("./lib/literals"),i=e("./lib/operators"),s=e("./lib/builtins"),a=999,l=9999,f=0,u=1,c=2,d=3,h=4,p=5,g=6,m=7,v=8,x=9,_=10,b=11,y=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":52,"./lib/literals":53,"./lib/operators":54,through:55}],52:[function(e,t){t.exports=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod"]},{}],53:[function(e,t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],54:[function(e,t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],55:[function(e,t,r){(function(n){function o(e,t,r){function o(){for(;f.length&&!c.paused;){var e=f.shift();if(null===e)return c.emit("end");c.emit("data",e)}}function s(){c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var a=!1,l=!1,f=[],u=!1,c=new i;return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(r&&r.autoDestroy===!1),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return u?c:(null==e&&(u=!0),f.push(e),o(),c)},c.on("end",function(){c.readable=!1,!c.writable&&c.autoDestroy&&n.nextTick(function(){c.destroy()})}),c.end=function(e){return a?void 0:(a=!0,arguments.length&&c.write(e),s(),c)},c.destroy=function(){return l?void 0:(l=!0,a=!0,f.length=0,c.writable=c.readable=!1,c.emit("close"),c)},c.pause=function(){return c.paused?void 0:(c.paused=!0,c)},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),o(),c.paused||c.emit("drain"),c},c}var i=e("stream");r=t.exports=o,o.through=o}).call(this,e("_process"))},{_process:8,stream:20}],56:[function(e,t){function r(e,t){if(e.getContext)for(var r=0;r<c.length;++r)try{var n=e.getContext(c[r],t||{});if(n)return n}catch(o){}}function n(e){for(var t=1;t<arguments.length;++t){var r=arguments[t];for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e}function o(e,t){function c(){y=[],_=r(e,w),e.addEventListener("webglcontextlost",d,!1),e.addEventListener("webglcontextrestored",h,!1)}function d(e){e.preventDefault(),_=null;for(var t=0;t<y.length;++t)y[t].onContextLost(e)}function h(t){_=r(e,w);var n;for(n=0;n<T.length;++n)T[n](t);for(n=0;n<y.length;++n)y[n].onContextRestored(t)}function p(){var e=_.createTexture();return _.bindTexture(_.TEXTURE_2D,e),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),e}function g(e,t){_.bindTexture(_.TEXTURE_2D,e),t?(_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,!0),"function"==typeof t?t(_):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,t)):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,2,2,0,_.RGBA,_.UNSIGNED_BYTE,null)}function m(e,t){var r,o=n({},t.uniforms,l.uniforms),s=n({},t.attributes,l.attributes),f=[],u=[];for(r in o)f.push({name:r,type:o[r]});for(r in s)u.push({name:r,type:s[r]});var c=i(_,a,e,f,u);return _.bindBuffer(_.ARRAY_BUFFER,_.createBuffer()),c.attributes.position.pointer(),c}function v(){_.drawArrays(_.TRIANGLES,0,6)}function x(t){function r(){if(_){w=m(t,E),T={},C={};var e=0;for(var r in E.uniforms){var n=E.uniforms[r];"sampler2D"===n&&(_.activeTexture(_.TEXTURE0+e),T[r]=e,C[r]=p(),e++)}}}function o(){w=null}function i(){r()}function a(){var t=e.width,r=e.height;_.viewport(0,0,t,r),b&&(b.uniforms[u]=new Float32Array([t,r]));var n=0,o=t,i=0,s=r;_.bufferData(_.ARRAY_BUFFER,new Float32Array([n,i,o,i,n,s,n,s,o,i,o,s]),_.STATIC_DRAW)}function l(e){w.uniforms[f]=e}function c(e,t){if(e in T){var r=T[e],n=C[e];_.activeTexture(_.TEXTURE0+r),_.bindTexture(_.TEXTURE_2D,n),g(n,t),w.uniforms[e]=r}else w.uniforms[e]=t}function d(){var e=!1;return w||(r(),e=!0),b!==w&&(b=w,w.bind(),e=!0),a(),e}function h(){b===w&&(b=null),w&&(w.dispose(),w=null)}function x(){return n({},E.uniforms)}var w,T,C,E=s(t),D={getGL:function(){return _},load:function(){w||r()},bind:function(){b!==w&&(b=w,w.bind())},isCurrentTransition:function(){return b===w},onContextLost:o,onContextRestored:i,syncViewport:a,setProgress:l,setUniform:c,reset:d,draw:v,destroy:h,getUniforms:x};return y.push(D),D}if(1!==arguments.length||!("getContext"in e))throw new Error("Bad arguments. usage: GlslTransitionCore(canvas)");var _,b,y,w=n({},t&&t.contextAttributes||{},o.defaults.contextAttributes),T=[];return x.onContextLost=function(e){T.push(e)},x.getGL=function(){return _},c(),x}var i=e("gl-shader-core"),s=e("glsl-exports"),a="attribute vec2 position; void main() { gl_Position = vec4(2.0*position-1.0, 0.0, 1.0);}",l=s(a),f="progress",u="resolution",c=["webgl","experimental-webgl"];
o.defaults={contextAttributes:{preserveDrawingBuffer:!0}},o.isSupported=function(){var e=document.createElement("canvas");return!!r(e)},t.exports=o},{"gl-shader-core":44,"glsl-exports":45}],57:[function(e,t){t.exports={glsl:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 resolution;uniform sampler2D from, to;uniform float progress;void main() {vec2 p = gl_FragCoord.xy / resolution;gl_FragColor = mix(texture2D(from, p), texture2D(to, p), progress);}",uniforms:{},id:"7e61b1f44a391f0c0894",name:"fade",owner:"glslioadmin",html_url:"https://gist.github.com/glslioadmin/7e61b1f44a391f0c0894",created_at:"2014-05-16T00:00:00Z",updated_at:"2014-05-16T00:00:00Z",stars:0}},{}],58:[function(e,t){function r(e){this.canvas=e;var t=this.gl=e.getContext("webgl"),r=this.program=t.createProgram(),i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,n),t.compileShader(i),t.attachShader(r,i);var s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,o),t.compileShader(s),t.attachShader(r,s),t.linkProgram(r),t.useProgram(r),this.positionLocation=t.getAttribLocation(r,"p"),this.imgResL=t.getUniformLocation(r,"imgRes"),this.posL=t.getUniformLocation(r,"pos"),this.dimL=t.getUniformLocation(r,"dim"),this.bgL=t.getUniformLocation(r,"bg"),this.buffer=t.createBuffer(),this._lastW=e.width,this._lastH=e.height}var n="uniform vec2 imgRes;uniform vec2 pos;uniform vec2 dim;attribute vec2 p;varying vec2 uv;void main() {uv = pos/imgRes + ((p * vec2(1.,-1.)+1.)/2.) * (dim/imgRes);gl_Position = vec4(p,0.,1.);}",o="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D img;uniform vec3 bg;varying vec2 uv;void main() {if(uv.x<0.||uv.x>1.||uv.y<0.||uv.y>1.)gl_FragColor = vec4(bg, 1.0);else gl_FragColor = texture2D(img, uv);}";r.prototype={clamped:!0,rgb:[0,0,0],runStart:function(e){{var t=this.gl;this.canvas}t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var r=this.positionLocation;t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.uniform2f(this.imgResL,e.width,e.height),t.uniform3fv(this.bgL,this.rgb);var n=this.texture=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)},runEnd:function(){this.gl.deleteTexture(this.texture)},draw:function(e,t){var r=this.gl,n=this.canvas;(this._lastW!==n.width||this._lastH!==n.height)&&(this._lastW=n.width,this._lastH=n.height,r.viewport(0,0,n.width,n.height)),r.uniform2f(this.posL,t[0],t[1]),r.uniform2f(this.dimL,t[2],t[3]),r.drawArrays(r.TRIANGLES,0,6)},destroy:function(){this.gl.deleteBuffer(this.buffer),this.gl.deleteProgram(this.program)},getViewport:function(){return this.canvas}},t.exports=r},{}],59:[function(e,t){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e){for(var t,n,o=r(e),i=1;i<arguments.length;i++){t=arguments[i],n=Object.keys(Object(t));for(var s=0;s<n.length;s++)o[n[s]]=t[n[s]]}return o}},{}],60:[function(e,t){for(var r=e("performance-now"),n="undefined"==typeof window?{}:window,o=["moz","webkit"],i="AnimationFrame",s=n["request"+i],a=n["cancel"+i]||n["cancelRequest"+i],l=!0,f=0;f<o.length&&!s;f++)s=n[o[f]+"Request"+i],a=n[o[f]+"Cancel"+i]||n[o[f]+"CancelRequest"+i];if(!s||!a){l=!1;var u=0,c=0,d=[],h=1e3/60;s=function(e){if(0===d.length){var t=r(),n=Math.max(0,h-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(r){setTimeout(function(){throw r},0)}},Math.round(n))}return d.push({handle:++c,callback:e,cancelled:!1}),c},a=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return l?s.call(n,function(){try{e.apply(this,arguments)}catch(t){setTimeout(function(){throw t},0)}}):s.call(n,e)},t.exports.cancel=function(){a.apply(n,arguments)}},{"performance-now":61}],61:[function(e,t){(function(e){(function(){var r,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-o)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},o=r()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:8}],62:[function(e,t){t.exports=function(e,t){var r=e[2],n=e[3],o=t[2],i=t[3],s=r/n;return r>o&&(r=o,n=~~(r/s)),n>i&&(n=i,r=~~(n*s)),[t[0]+Math.max(0,Math.min(e[0],o-r)),t[1]+Math.max(0,Math.min(e[1],i-n)),r,n]}},{}],63:[function(e,t){function r(e,t){return t||(t=[.5,.5]),function(r,n){var o=r.width/r.height,i=n.width/n.height,s=Math.max(o,i),a=[o/s*n.width*e,i/s*n.height*e];return[n.width*t[0]-a[0]/2,n.height*t[1]-a[1]/2,a[0],a[1]]}}r.largest=r(1),t.exports=r},{}],64:[function(e,t){function r(e,t,r){return e*(1-r)+t*r}t.exports=function(e,t,n){for(var o=[],i=0;4>i;++i)o[i]=r(e[i],t[i],n);return o}},{}],65:[function(e,t){t.exports=e("./transitions.min.json")},{"./transitions.min.json":66}],66:[function(e,t){t.exports=[{id:"1b4862e4e2050a3abebe",name:"glitch displace",owner:"mattdesl",uniforms:{},html_url:"https://gist.github.com/1b4862e4e2050a3abebe",created_at:"2015-01-15T19:48:03Z",updated_at:"2015-03-01T02:57:21Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;highp float random(vec2 co){highp float a=12.9898;highp float b=78.233;highp float c=43758.5453;highp float dt=dot(co.xy,vec2(a,b));highp float sn=mod(dt,3.14);return fract(sin(sn)*c);}float voronoi(in vec2 x){vec2 p=floor(x);vec2 f=fract(x);float res=8.0;for(float j=-1.;j<=1.;j++)for(float i=-1.;i<=1.;i++){vec2 b=vec2(i,j);vec2 r=b-f+random(p+b);float d=dot(r,r);res=min(res,d);}return sqrt(res);}vec2 displace(vec4 tex,vec2 texCoord,float dotDepth,float textureDepth,float strength){float b=voronoi(.003*texCoord+2.0);float g=voronoi(0.2*texCoord);float r=voronoi(texCoord-1.0);vec4 dt=tex*1.0;vec4 dis=dt*dotDepth+1.0-tex*textureDepth;dis.x=dis.x-1.0+textureDepth*dotDepth;dis.y=dis.y-1.0+textureDepth*dotDepth;dis.x*=strength;dis.y*=strength;vec2 res_uv=texCoord;res_uv.x=res_uv.x+dis.x-0.0;res_uv.y=res_uv.y+dis.y;return res_uv;}float ease1(float t){return t==0.0||t==1.0?t:t<0.5?+0.5*pow(2.0,(20.0*t)-10.0):-0.5*pow(2.0,10.0-(t*20.0))+1.0;}float ease2(float t){return t==1.0?t:1.0-pow(2.0,-10.0*t);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 color1=texture2D(from,p);vec4 color2=texture2D(to,p);vec2 disp=displace(color1,p,0.33,0.7,1.0-ease1(progress));vec2 disp2=displace(color2,p,0.33,0.5,ease2(progress));vec4 dColor1=texture2D(to,disp);vec4 dColor2=texture2D(from,disp2);float val=ease1(progress);vec3 gray=vec3(dot(min(dColor2,dColor1).rgb,vec3(0.299,0.587,0.114)));dColor2=vec4(gray,1.0);dColor2*=2.0;color1=mix(color1,dColor2,smoothstep(0.0,0.5,progress));color2=mix(color2,dColor1,smoothstep(1.0,0.5,progress));gl_FragColor=mix(color1,color2,val);}"},{id:"04fd9a7de4012cbb03f6",name:"crosshatch",owner:"pthrasher",uniforms:{},html_url:"https://gist.github.com/04fd9a7de4012cbb03f6",created_at:"2014-12-17T03:04:51Z",updated_at:"2015-03-01T03:00:05Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;const vec2 center=vec2(0.5,0.5);float quadraticInOut(float t){float p=2.0*t*t;return t<0.5?p:-p+(4.0*t)-1.0;}float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;if(progress==0.0){gl_FragColor=texture2D(from,p);}else if(progress==1.0){gl_FragColor=texture2D(to,p);}else{float x=progress;float dist=distance(center,p);float r=x-min(rand(vec2(p.y,0.0)),rand(vec2(0.0,p.x)));float m=dist<=r?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}}"},{id:"8e6226b215548ba12734",name:"undulating burn out",owner:"pthrasher",uniforms:{smoothness:.02},html_url:"https://gist.github.com/8e6226b215548ba12734",created_at:"2014-12-16T23:01:57Z",updated_at:"2015-03-01T02:58:13Z",stars:2,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define 	M_PI   3.14159265358979323846	/* pi */\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float smoothness;const vec2 center=vec2(0.5,0.5);float quadraticInOut(float t){float p=2.0*t*t;return t<0.5?p:-p+(4.0*t)-1.0;}float linearInterp(vec2 range,vec2 domain,float x){return mix(range.x,range.y,smoothstep(domain.x,domain.y,clamp(x,domain.x,domain.y)));}float getGradient(float r,float dist){float grad=smoothstep(-smoothness,0.0,r-dist*(1.0+smoothness));if(r-dist<0.005&&r-dist>-0.005){return -1.0;}else if(r-dist<0.01&&r-dist>-0.005){return -2.0;}return grad;}float round(float a){return floor(a+0.5);}float getWave(vec2 p){vec2 _p=p-center;float rads=atan(_p.y,_p.x);float degs=degrees(rads)+180.0;vec2 range=vec2(0.0,M_PI*30.0);vec2 domain=vec2(0.0,360.0);float ratio=(M_PI*30.0)/360.0;degs=degs*ratio;float x=progress;float magnitude=mix(0.02,0.09,smoothstep(0.0,1.0,x));float offset=mix(40.0,30.0,smoothstep(0.0,1.0,x));float ease_degs=quadraticInOut(sin(degs));float deg_wave_pos=(ease_degs*magnitude)*sin(x*offset);return x+deg_wave_pos;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;if(progress==0.0){gl_FragColor=texture2D(from,p);}else if(progress==1.0){gl_FragColor=texture2D(to,p);}else{float dist=distance(center,p);float m=getGradient(getWave(p),dist);if(m==-2.0){gl_FragColor=mix(texture2D(from,p),vec4(0.0,0.0,0.0,1.0),0.75);}else{gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}}}"},{id:"b3aa4a8b4f88dc228d4a",name:"test",owner:"brandonyoyo",uniforms:{},html_url:"https://gist.github.com/b3aa4a8b4f88dc228d4a",created_at:"2014-10-26T16:46:18Z",updated_at:"2015-03-01T02:58:08Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),progress);}"},{id:"d1f891c5585fc40b55ea",name:"Star Wipe",owner:"MemoryStomp",uniforms:{},html_url:"https://gist.github.com/d1f891c5585fc40b55ea",created_at:"2014-07-01T06:58:45Z",updated_at:"2015-03-01T03:00:06Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec2 circlePoint(float ang){ang+=6.28318*0.15;return vec2(cos(ang),sin(ang));}float cross2d(vec2 a,vec2 b){return (a.x*b.y-a.y*b.x);}float star(vec2 p,float size){if(size<=0.0){return 0.0;}p/=size;vec2 p0=circlePoint(0.0);vec2 p1=circlePoint(6.28318*1.0/5.0);vec2 p2=circlePoint(6.28318*2.0/5.0);vec2 p3=circlePoint(6.28318*3.0/5.0);vec2 p4=circlePoint(6.28318*4.0/5.0);float s0=(cross2d(p1-p0,p-p0));float s1=(cross2d(p2-p1,p-p1));float s2=(cross2d(p3-p2,p-p2));float s3=(cross2d(p4-p3,p-p3));float s4=(cross2d(p0-p4,p-p4));float s5=min(min(min(s0,s1),min(s2,s3)),s4);float s=max(1.0-sign(s0*s1*s2*s3*s4)+sign(s5),0.0);s=sign(2.6-length(p))*s;return max(s,0.0);}void main(){vec2 p=(gl_FragCoord.xy/resolution.xy);vec2 o=p*2.0-1.0;float t=progress*1.4;float c1=star(o,t);float c2=star(o,t-0.1);float border=max(c1-c2,0.0);gl_FragColor=mix(texture2D(from,p),texture2D(to,p),c1)+vec4(border,border,border,0.0);}"},{id:"5a4d1fb6711076d17e2e",name:"morph",owner:"paniq",uniforms:{},html_url:"https://gist.github.com/5a4d1fb6711076d17e2e",created_at:"2014-07-01T04:52:25Z",updated_at:"2015-03-01T02:55:12Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float strength=0.1;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 ca=texture2D(from,p);vec4 cb=texture2D(to,p);vec2 oa=(((ca.rg+ca.b)*0.5)*2.0-1.0);vec2 ob=(((cb.rg+cb.b)*0.5)*2.0-1.0);vec2 oc=mix(oa,ob,0.5)*strength;float w0=progress;float w1=1.0-w0;gl_FragColor=mix(texture2D(from,p+oc*w0),texture2D(to,p-oc*w1),progress);}"},{id:"00973cee8e0353c73305",name:"LumaWipe",owner:"rectalogic",uniforms:{lumaTex:"conical-asym.png",invertLuma:!0,softness:.25},html_url:"https://gist.github.com/00973cee8e0353c73305",created_at:"2014-06-17T02:11:27Z",updated_at:"2015-03-01T02:58:31Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform sampler2D lumaTex;uniform bool invertLuma;uniform float softness;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float luma=texture2D(lumaTex,p).x;if(invertLuma) luma=1.0-luma;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);float time=mix(0.0,1.0+softness,progress);if(luma<=time-softness) gl_FragColor=toColor;else if(luma>=time) gl_FragColor=fromColor;else{float alpha=(time-luma)/softness;gl_FragColor=mix(fromColor,toColor,alpha);}}"},{id:"0141a38779af3a652c22",name:"simple luma",owner:"gre",uniforms:{luma:"spiral-1.png"},html_url:"https://gist.github.com/0141a38779af3a652c22",created_at:"2014-06-13T08:16:10Z",updated_at:"2015-03-01T02:58:48Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform sampler2D luma;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),step(texture2D(luma,p).r,progress));}"},{id:"ee15128c2b87d0e74dee",name:"cube",owner:"gre",uniforms:{persp:.7,unzoom:.3,reflection:.4,floating:3},html_url:"https://gist.github.com/ee15128c2b87d0e74dee",created_at:"2014-06-12T17:13:17Z",updated_at:"2015-03-01T03:00:02Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float persp;uniform float unzoom;uniform float reflection;uniform float floating;vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-floating/100.);}bool inBounds(vec2 p){return all(lessThan(vec2(0.0),p))&&all(lessThan(p,vec2(1.0)));}vec4 bgColor(vec2 p,vec2 pfr,vec2 pto){vec4 c=vec4(0.0,0.0,0.0,1.0);pfr=project(pfr);if(inBounds(pfr)){c+=mix(vec4(0.0),texture2D(from,pfr),reflection*mix(1.0,0.0,pfr.y));}pto=project(pto);if(inBounds(pto)){c+=mix(vec4(0.0),texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}vec2 xskew(vec2 p,float persp,float center){float x=mix(p.x,1.0-p.x,center);return ((vec2(x,(p.y-0.5*(1.0-persp)*x)/(1.0+(persp-1.0)*x))-vec2(0.5-distance(center,0.5),0.0))*vec2(0.5/distance(center,0.5)*(center<0.5?1.0:-1.0),1.0)+vec2(center<0.5?0.0:1.0,0.0));}void main(){vec2 op=gl_FragCoord.xy/resolution.xy;float uz=unzoom*2.0*(0.5-distance(0.5,progress));vec2 p=-uz*0.5+(1.0+uz)*op;vec2 fromP=xskew((p-vec2(progress,0.0))/vec2(1.0-progress,1.0),1.0-mix(progress,0.0,persp),0.0);vec2 toP=xskew(p/vec2(progress,1.0),mix(pow(progress,2.0),1.0,persp),1.0);if(inBounds(fromP)){gl_FragColor=texture2D(from,fromP);}else if(inBounds(toP)){gl_FragColor=texture2D(to,toP);}else{gl_FragColor=bgColor(op,fromP,toP);}}"},{id:"9b99fc01fd5705008a5b",name:"Glitch Memories",owner:"niseh",uniforms:{},html_url:"https://gist.github.com/9b99fc01fd5705008a5b",created_at:"2014-05-29T19:32:52Z",updated_at:"2015-03-01T02:59:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void glitch_memories(sampler2D pic){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 block=floor(gl_FragCoord.xy/vec2(16));vec2 uv_noise=block/vec2(64);uv_noise+=floor(vec2(progress)*vec2(1200.0,3500.0))/vec2(64);float block_thresh=pow(fract(progress*1200.0),2.0)*0.2;float line_thresh=pow(fract(progress*2200.0),3.0)*0.7;vec2 red=p,green=p,blue=p,o=p;vec2 dist=(fract(uv_noise)-0.5)*0.3;red+=dist*0.1;green+=dist*0.2;blue+=dist*0.125;gl_FragColor.r=texture2D(pic,red).r;gl_FragColor.g=texture2D(pic,green).g;gl_FragColor.b=texture2D(pic,blue).b;gl_FragColor.a=1.0;}void main(void){float smoothed=smoothstep(0.,1.,progress);if((smoothed<0.4&&smoothed>0.1)){glitch_memories(from);}else if((smoothed>0.6&&smoothed<0.9)){glitch_memories(to);}else{vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),progress);}}"},{id:"fe67b3b5149738069537",name:"potleaf",owner:"Flexi23",uniforms:{},html_url:"https://gist.github.com/fe67b3b5149738069537",created_at:"2014-05-28T09:58:30Z",updated_at:"2015-03-01T02:58:25Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 uv=gl_FragCoord.xy/resolution.xy;vec2 leaf_uv=(uv-vec2(0.5))/10./pow(progress,3.5);leaf_uv.y+=0.35;float r=0.18;float o=atan(leaf_uv.y,leaf_uv.x);gl_FragColor=mix(texture2D(from,uv),texture2D(to,uv),1.-step(1.-length(leaf_uv)+r*(1.+sin(o))*(1.+0.9*cos(8.*o))*(1.+0.1*cos(24.*o))*(0.9+0.05*cos(200.*o)),1.));}"},{id:"b86b90161503a0023231",name:"CrossZoom",owner:"rectalogic",uniforms:{strength:.4},html_url:"https://gist.github.com/b86b90161503a0023231",created_at:"2014-05-25T01:24:39Z",updated_at:"2015-03-01T02:59:37Z",stars:2,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float strength;const float PI=3.141592653589793;float Linear_ease(in float begin,in float change,in float duration,in float time){return change*time/duration+begin;}float Exponential_easeInOut(in float begin,in float change,in float duration,in float time){if(time==0.0) return begin;else if(time==duration) return begin+change;time=time/(duration/2.0);if(time<1.0) return change/2.0*pow(2.0,10.0*(time-1.0))+begin;return change/2.0*(-pow(2.0,-10.0*(time-1.0))+2.0)+begin;}float Sinusoidal_easeInOut(in float begin,in float change,in float duration,in float time){return -change/2.0*(cos(PI*time/duration)-1.0)+begin;}float random(in vec3 scale,in float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}vec3 crossFade(in vec2 uv,in float dissolve){return mix(texture2D(from,uv).rgb,texture2D(to,uv).rgb,dissolve);}void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;vec2 center=vec2(Linear_ease(0.25,0.5,1.0,progress),0.5);float dissolve=Exponential_easeInOut(0.0,1.0,1.0,progress);float strength=Sinusoidal_easeInOut(0.0,strength,0.5,progress);vec3 color=vec3(0.0);float total=0.0;vec2 toCenter=center-texCoord;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);color+=crossFade(texCoord+toCenter*percent*strength,dissolve)*weight;total+=weight;}gl_FragColor=vec4(color/total,1.0);}"},{id:"ce9279de351984f0ad27",name:"Slide",owner:"rectalogic",uniforms:{translateX:1,translateY:0},html_url:"https://gist.github.com/ce9279de351984f0ad27",created_at:"2014-05-25T01:13:20Z",updated_at:"2015-03-01T02:59:56Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float translateX;uniform float translateY;void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;float x=progress*translateX;float y=progress*translateY;if(x>=0.0&&y>=0.0){if(texCoord.x>=x&&texCoord.y>=y){gl_FragColor=texture2D(from,texCoord-vec2(x,y));}else{vec2 uv;if(x>0.0) uv=vec2(x-1.0,y);else if(y>0.0) uv=vec2(x,y-1.0);gl_FragColor=texture2D(to,texCoord-uv);}}else if(x<=0.0&&y<=0.0){if(texCoord.x<=(1.0+x)&&texCoord.y<=(1.0+y)) gl_FragColor=texture2D(from,texCoord-vec2(x,y));else{vec2 uv;if(x<0.0) uv=vec2(x+1.0,y);else if(y<0.0) uv=vec2(x,y+1.0);gl_FragColor=texture2D(to,texCoord-uv);}}else gl_FragColor=vec4(0.0);}"},{id:"154a99fbe5300fb5c279",name:"pinwheel",owner:"mrspeaker",uniforms:{},html_url:"https://gist.github.com/154a99fbe5300fb5c279",created_at:"2014-05-23T21:56:59Z",updated_at:"2015-03-01T03:00:00Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float circPos=atan(p.y-0.5,p.x-0.5)+progress;float modPos=mod(circPos,3.1415/4.);float signed=sign(progress-modPos);float smoothed=smoothstep(0.,1.,signed);if(smoothed>0.5){gl_FragColor=texture2D(to,p);}else{gl_FragColor=texture2D(from,p);}}"},{id:"e54a807cdb66c8b16a34",name:"Kaleidoscope",owner:"nwoeanhinnogaehr",uniforms:{speed:1,angle:2,power:2},html_url:"https://gist.github.com/e54a807cdb66c8b16a34",created_at:"2014-05-23T19:02:46Z",updated_at:"2015-03-01T02:55:53Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float speed;uniform float angle;uniform float power;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 q=p;float t=pow(progress,power)*speed;p=p-0.5;for(int i=0;i<7;i++){p=vec2(sin(t)*p.x+cos(t)*p.y,sin(t)*p.y-cos(t)*p.x);t+=angle;p=abs(mod(p,2.0)-1.0);}abs(mod(p,1.0));gl_FragColor=mix(mix(texture2D(from,q),texture2D(to,q),progress),mix(texture2D(from,p),texture2D(to,p),progress),1.0-2.0*abs(progress-0.5));}"},{id:"408045772d255df97520",name:"SimpleFlip",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/408045772d255df97520",created_at:"2014-05-23T18:42:58Z",updated_at:"2015-03-01T02:55:54Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 q=p;p.x=(p.x-0.5)/abs(progress-0.5)*0.5+0.5;vec4 a=texture2D(from,p);vec4 b=texture2D(to,p);gl_FragColor=vec4(mix(a,b,step(0.5,progress)).rgb*step(abs(q.x-0.5),abs(progress-0.5)),1.0);}"},{id:"a070cbd69e2535e757f1",name:"DoomScreenTransition",owner:"zeh",uniforms:{barWidth:10,noise:.2,amplitude:2,frequency:1},html_url:"https://gist.github.com/a070cbd69e2535e757f1",created_at:"2014-05-23T18:00:18Z",updated_at:"2015-03-01T02:51:48Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform int barWidth;uniform float amplitude;uniform float noise;uniform float frequency;float rand(int num){return fract(mod(float(num)*67123.313,12.0)*sin(float(num)*10.3)*cos(float(num)));}float wave(int num){float fn=float(num)*frequency*0.1*float(barWidth);return cos(fn*0.5)*cos(fn*0.13)*sin((fn+10.0)*0.3)/2.0+0.5;}float pos(int num){return noise==0.0?wave(num):mix(wave(num),rand(num),noise);}void main(){int bar=int(gl_FragCoord.x)/barWidth;float scale=1.0+pos(bar)*amplitude;float phase=progress*scale;float posY=gl_FragCoord.y/resolution.y;vec2 p;vec4 c;if(phase+posY<1.0){p=vec2(gl_FragCoord.x,gl_FragCoord.y+mix(0.0,resolution.y,phase))/resolution.xy;c=texture2D(from,p);}else{p=gl_FragCoord.xy/resolution.xy;c=texture2D(to,p);}gl_FragColor=c;}"},{id:"a830822b23e846e25d2d",name:"DreamyZoom",owner:"zeh",uniforms:{rotation:6,scale:1.2},html_url:"https://gist.github.com/a830822b23e846e25d2d",created_at:"2014-05-23T15:27:25Z",updated_at:"2015-03-01T02:54:38Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define DEG2RAD 0.03926990816987241548078304229099 // 1/180*PI\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float rotation;uniform float scale;void main(){float phase=progress<0.5?progress*2.0:(progress-0.5)*2.0;float angleOffset=progress<0.5?mix(0.0,rotation*DEG2RAD,phase):mix(-rotation*DEG2RAD,0.0,phase);float newScale=progress<0.5?mix(1.0,scale,phase):mix(scale,1.0,phase);vec2 center=vec2(0,0);float maxRes=max(resolution.x,resolution.y);float resX=resolution.x/maxRes*0.5;float resY=resolution.y/maxRes*0.5;vec2 p=(gl_FragCoord.xy/maxRes-vec2(resX,resY))/newScale;float angle=atan(p.y,p.x)+angleOffset;float dist=distance(center,p);p.x=cos(angle)*dist+resX;p.y=sin(angle)*dist+resY;vec4 c=progress<0.5?texture2D(from,p):texture2D(to,p);gl_FragColor=c+(progress<0.5?mix(0.0,1.0,phase):mix(1.0,0.0,phase));}"},{id:"b6720916aa3f035949bc",name:"squareswipe",owner:"gre",uniforms:{squares:[10,10],direction:[1,-.5],smoothness:1.6},html_url:"https://gist.github.com/b6720916aa3f035949bc",created_at:"2014-05-23T12:09:38Z",updated_at:"2015-03-01T02:56:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform ivec2 squares;uniform vec2 direction;uniform float smoothness;const vec2 center=vec2(0.5,0.5);void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 v=normalize(direction);if(v!=vec2(0.0)) v/=abs(v.x)+abs(v.y);float d=v.x*center.x+v.y*center.y;float offset=smoothness;float pr=smoothstep(-offset,0.0,v.x*p.x+v.y*p.y-(d-0.5+progress*(1.+offset)));vec2 squarep=fract(p*vec2(squares));vec2 squaremin=vec2(pr/2.0);vec2 squaremax=vec2(1.0-pr/2.0);float a=all(lessThan(squaremin,squarep))&&all(lessThan(squarep,squaremax))?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),a);}"},{id:"169781bb76f310e2bfde",name:"TilesWaveBottomLeftToTopRight",owner:"numb3r23",uniforms:{},html_url:"https://gist.github.com/169781bb76f310e2bfde",created_at:"2014-05-21T22:50:48Z",updated_at:"2015-03-01T02:52:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const vec2 tileSize=vec2(64,64);const float checkerDistance=0.015;const bool flipX=true;const bool flipY=false;const bool preTileSingleColor=false;const bool postTileSingleColor=false;vec2 tile2Global(vec2 tex,vec2 tileNum,bool tileSingleColor){vec2 perTile=tileSize/resolution.xy;return tileNum*perTile+(tileSingleColor?vec2(0):tex*perTile);}void main(void){vec2 uv=gl_FragCoord.xy/resolution.xy;vec4 fragColor=vec4(1,1,0,1);vec2 posInTile=mod(vec2(gl_FragCoord),tileSize);vec2 tileNum=floor(vec2(gl_FragCoord)/tileSize);int num=int(tileNum.x);vec2 totalTiles=ceil(resolution.xy/tileSize);float countTiles=totalTiles.x*totalTiles.y;vec2 perTile=ceil(tileSize/resolution.xy);float offset=0.0;offset=(tileNum.y+tileNum.x*perTile.y)/(sqrt(countTiles)*2.0);float timeOffset=(progress-offset)*countTiles;timeOffset=clamp(timeOffset,0.0,0.5);float sinTime=1.0-abs(cos(fract(timeOffset)*3.1415926));fragColor.rg=uv;fragColor.b=sinTime;vec2 texC=posInTile/tileSize;if(sinTime<=0.5){if(flipX){if((texC.x<sinTime)||(texC.x>1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}}if(flipY){if((texC.y<sinTime)||(texC.y>1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}}fragColor=texture2D(from,tile2Global(texC,tileNum,preTileSingleColor));}else{if(flipX){if((texC.x>sinTime)||(texC.x<1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}texC.x=1.0-texC.x;}if(flipY){if((texC.y>sinTime)||(texC.y<1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}texC.y=1.0-texC.y;}fragColor.rgb=texture2D(to,tile2Global(texC,tileNum,postTileSingleColor)).rgb;}gl_FragColor=fragColor;}"},{id:"5ebd3442a208861c7a8a",name:"TilesScanline",owner:"numb3r23",uniforms:{},html_url:"https://gist.github.com/5ebd3442a208861c7a8a",created_at:"2014-05-21T22:49:22Z",updated_at:"2015-03-01T02:57:17Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const vec2 tileSize=vec2(64,64);const float checkerDistance=0.015;const bool flipX=true;const bool flipY=false;const bool preTileSingleColor=false;const bool postTileSingleColor=false;vec2 tile2Global(vec2 tex,vec2 tileNum,bool tileSingleColor){vec2 perTile=tileSize/resolution.xy;return tileNum*perTile+(tileSingleColor?vec2(0):tex*perTile);}void main(void){vec2 uv=gl_FragCoord.xy/resolution.xy;vec4 fragColor=vec4(1,1,0,1);vec2 posInTile=mod(vec2(gl_FragCoord),tileSize);vec2 tileNum=floor(vec2(gl_FragCoord)/tileSize);int num=int(tileNum.x);vec2 totalTiles=ceil(resolution.xy/tileSize);float countTiles=totalTiles.x*totalTiles.y;vec2 perTile=ceil(tileSize/resolution.xy);float offset=0.0;offset=(tileNum.x+tileNum.y*totalTiles.x)/countTiles;float timeOffset=(progress-offset)*countTiles;timeOffset=clamp(timeOffset,0.0,0.5);float sinTime=1.0-abs(cos(fract(timeOffset)*3.1415926));fragColor.rg=uv;fragColor.b=sinTime;vec2 texC=posInTile/tileSize;if(sinTime<=0.5){if(flipX){if((texC.x<sinTime)||(texC.x>1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}}if(flipY){if((texC.y<sinTime)||(texC.y>1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}}fragColor=texture2D(from,tile2Global(texC,tileNum,preTileSingleColor));}else{if(flipX){if((texC.x>sinTime)||(texC.x<1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}texC.x=1.0-texC.x;}if(flipY){if((texC.y>sinTime)||(texC.y<1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}texC.y=1.0-texC.y;}fragColor.rgb=texture2D(to,tile2Global(texC,tileNum,postTileSingleColor)).rgb;}gl_FragColor=fragColor;}"},{id:"9e86d2712e123542758b",name:"Dreamy",owner:"mikolalysenko",uniforms:{},html_url:"https://gist.github.com/9e86d2712e123542758b",created_at:"2014-05-21T14:55:01Z",updated_at:"2015-03-01T02:56:19Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec2 offset(float progress,float x,float theta){float phase=progress*progress+progress+theta;float shifty=0.03*progress*cos(10.0*(progress+x));return vec2(0,shifty);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p+offset(progress,p.x,0.0)),texture2D(to,p+offset(1.0-progress,p.x,3.14)),progress);}"},{id:"21d2fdd24c706952dc8c",name:"AdvancedMosaic",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/21d2fdd24c706952dc8c",created_at:"2014-05-21T14:45:52Z",updated_at:"2015-03-01T02:58:57Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(void){vec2 p=gl_FragCoord.xy/resolution.xy;float T=progress;float S0=1.0;float S1=50.0;float S2=1.0;float Half=0.5;float PixelSize=(T<Half)?mix(S0,S1,T/Half):mix(S1,S2,(T-Half)/Half);vec2 D=PixelSize/resolution.xy;vec2 UV=(p+vec2(-0.5))/D;vec2 Coord=clamp(D*(ceil(UV+vec2(-0.5)))+vec2(0.5),vec2(0.0),vec2(1.0));vec4 C0=texture2D(from,Coord);vec4 C1=texture2D(to,Coord);gl_FragColor=mix(C0,C1,T);}"},{id:"cacfedb8cca0f5ce3f7c",name:"Swirl",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/cacfedb8cca0f5ce3f7c",created_at:"2014-05-21T14:43:04Z",updated_at:"2015-03-01T02:57:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(void){float Radius=1.0;float T=progress;vec2 UV=gl_FragCoord.xy/resolution.xy;UV-=vec2(0.5,0.5);float Dist=length(UV);if(Dist<Radius){float Percent=(Radius-Dist)/Radius;float A=(T<=0.5)?mix(0.0,1.0,T/0.5):mix(1.0,0.0,(T-0.5)/0.5);float Theta=Percent*Percent*A*8.0*3.14159;float S=sin(Theta);float C=cos(Theta);UV=vec2(dot(UV,vec2(C,-S)),dot(UV,vec2(S,C)));}UV+=vec2(0.5,0.5);vec4 C0=texture2D(from,UV);vec4 C1=texture2D(to,UV);gl_FragColor=mix(C0,C1,T);}"},{id:"b9f8e5675c647e615419",name:"DefocusBlur",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/b9f8e5675c647e615419",created_at:"2014-05-21T10:12:14Z",updated_at:"2015-03-01T02:55:46Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform float progress;uniform vec2 resolution;uniform sampler2D from;uniform sampler2D to;void main(void){vec2 p=gl_FragCoord.xy/resolution.xy;float T=progress;float S0=1.0;float S1=50.0;float S2=1.0;float Half=0.5;float PixelSize=(T<Half)?mix(S0,S1,T/Half):mix(S1,S2,(T-Half)/Half);vec2 D=PixelSize/resolution.xy;vec2 UV=(gl_FragCoord.xy/resolution.xy);const int NumTaps=12;vec2 Disk[NumTaps];Disk[0]=vec2(-.326,-.406);Disk[1]=vec2(-.840,-.074);Disk[2]=vec2(-.696,.457);Disk[3]=vec2(-.203,.621);Disk[4]=vec2(.962,-.195);Disk[5]=vec2(.473,-.480);Disk[6]=vec2(.519,.767);Disk[7]=vec2(.185,-.893);Disk[8]=vec2(.507,.064);Disk[9]=vec2(.896,.412);Disk[10]=vec2(-.322,-.933);Disk[11]=vec2(-.792,-.598);vec4 C0=texture2D(from,UV);vec4 C1=texture2D(to,UV);for(int i=0;i!=NumTaps;i++){C0+=texture2D(from,Disk[i]*D+UV);C1+=texture2D(to,Disk[i]*D+UV);}C0/=float(NumTaps+1);C1/=float(NumTaps+1);gl_FragColor=mix(C0,C1,T);}"},{id:"2a5fa2f77c883dd661f9",name:"colourDistance",owner:"P-Seebauer",uniforms:{interpolationPower:5},html_url:"https://gist.github.com/2a5fa2f77c883dd661f9",created_at:"2014-05-21T07:10:21Z",updated_at:"2015-03-01T02:51:29Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float interpolationPower;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fTex=texture2D(from,p);vec4 tTex=texture2D(to,p);gl_FragColor=mix(distance(fTex,tTex)>progress?fTex:tTex,tTex,pow(progress,interpolationPower));}"},{id:"b93818de23d4511fde10",name:"Dissolve",owner:"nwoeanhinnogaehr",uniforms:{blocksize:1},html_url:"https://gist.github.com/b93818de23d4511fde10",created_at:"2014-05-20T23:40:57Z",updated_at:"2015-03-01T03:00:06Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float blocksize;float rand(vec2 co){return fract(sin(dot(co,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),step(rand(floor(gl_FragCoord.xy/blocksize)),progress));}"},{id:"b185145363d65751009b",name:"HSVfade",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/b185145363d65751009b",created_at:"2014-05-20T23:21:27Z",updated_at:"2015-03-01T02:58:24Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec3 hsv2rgb(vec3 c){const vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb2hsv(vec3 c){const vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);return vec3(abs(q.z+(q.w-q.y)/(6.0*d+0.001)),d/(q.x+0.001),q.x);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec3 a=rgb2hsv(texture2D(from,p).rgb);vec3 b=rgb2hsv(texture2D(to,p).rgb);vec3 m=mix(a,b,progress);gl_FragColor=vec4(hsv2rgb(m),1.0);}"},{id:"f6fc39f4cfcbb97f96a6",name:"Fold",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/f6fc39f4cfcbb97f96a6",created_at:"2014-05-20T23:14:23Z",updated_at:"2015-03-01T02:57:16Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 a=texture2D(from,(p-vec2(progress,0.0))/vec2(1.0-progress,1.0));vec4 b=texture2D(to,p/vec2(progress,1.0));gl_FragColor=mix(a,b,step(p.x,progress));}"},{id:"80c2d40cac3f98453176",name:"linearblur",owner:"gre",uniforms:{intensity:.1},html_url:"https://gist.github.com/80c2d40cac3f98453176",created_at:"2014-05-20T22:02:35Z",updated_at:"2015-03-01T02:56:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float intensity;const int PASSES=8;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 c1=vec4(0.0),c2=vec4(0.0);float disp=intensity*(0.5-distance(0.5,progress));for(int xi=0;xi<PASSES;++xi){float x=float(xi)/float(PASSES)-0.5;for(int yi=0;yi<PASSES;++yi){float y=float(yi)/float(PASSES)-0.5;vec2 v=vec2(x,y);float d=disp;c1+=texture2D(from,p+d*v);c2+=texture2D(to,p+d*v);}}c1/=float(PASSES*PASSES);c2/=float(PASSES*PASSES);gl_FragColor=mix(c1,c2,progress);}"},{id:"c528607361d90a072e98",name:"pixelize",owner:"benraziel",uniforms:{},html_url:"https://gist.github.com/c528607361d90a072e98",created_at:"2014-05-20T19:32:42Z",updated_at:"2015-03-01T02:56:48Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){float revProgress=(1.0-progress);float distFromEdges=min(progress,revProgress);float squareSize=(50.0*distFromEdges)+1.0;vec2 p=(floor((gl_FragCoord.xy+squareSize*0.5)/squareSize)*squareSize)/resolution.xy;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);gl_FragColor=mix(fromColor,toColor,progress);}"},{id:"abd06f4d23ab2ff4ed7a",name:"random_squares",owner:"benraziel",uniforms:{},html_url:"https://gist.github.com/abd06f4d23ab2ff4ed7a",created_at:"2014-05-20T19:07:25Z",updated_at:"2015-03-01T02:52:17Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){float revProgress=(1.0-progress);float distFromEdges=min(progress,revProgress);vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);float squareSize=20.0;float flickerSpeed=60.0;vec2 seed=floor(gl_FragCoord.xy/squareSize)*floor(distFromEdges*flickerSpeed);gl_FragColor=mix(fromColor,toColor,progress)+rand(seed)*distFromEdges*0.5;}"},{id:"791d0f058ae6a83e0c15",name:"PolkaDotsCurtain",owner:"bobylito",uniforms:{center:[1,1],dots:20},html_url:"https://gist.github.com/791d0f058ae6a83e0c15",created_at:"2014-05-20T16:55:46Z",updated_at:"2015-03-01T02:59:23Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float SQRT_2=1.414213562373;uniform float dots;uniform vec2 center;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=progress/2.0;bool nextImage=distance(fract(p*dots),vec2(0.5,0.5))<(2.0*x/distance(p,center));if(nextImage) gl_FragColor=texture2D(to,p);else gl_FragColor=texture2D(from,p);}"},{id:"166e496a19a4fdbf1aae",name:"PageCurl",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/166e496a19a4fdbf1aae",created_at:"2014-05-20T12:37:15Z",updated_at:"2015-03-01T02:56:42Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float MIN_AMOUNT=-0.16;const float MAX_AMOUNT=1.3;float amount=progress*(MAX_AMOUNT-MIN_AMOUNT)+MIN_AMOUNT;const float PI=3.141592653589793;const float scale=512.0;const float sharpness=3.0;float cylinderCenter=amount;float cylinderAngle=2.0*PI*amount;const float cylinderRadius=1.0/PI/2.0;vec3 hitPoint(float hitAngle,float yc,vec3 point,mat3 rrotation){float hitPoint=hitAngle/(2.0*PI);point.y=hitPoint;return rrotation*point;}vec4 antiAlias(vec4 color1,vec4 color2,float distanc){distanc*=scale;if(distanc<0.0) return color2;if(distanc>2.0) return color1;float dd=pow(1.0-distanc/2.0,sharpness);return ((color2-color1)*dd)+color1;}float distanceToEdge(vec3 point){float dx=abs(point.x>0.5?1.0-point.x:point.x);float dy=abs(point.y>0.5?1.0-point.y:point.y);if(point.x<0.0) dx=-point.x;if(point.x>1.0) dx=point.x-1.0;if(point.y<0.0) dy=-point.y;if(point.y>1.0) dy=point.y-1.0;if((point.x<0.0||point.x>1.0)&&(point.y<0.0||point.y>1.0)) return sqrt(dx*dx+dy*dy);return min(dx,dy);}vec4 seeThrough(float yc,vec2 p,mat3 rotation,mat3 rrotation){float hitAngle=PI-(acos(yc/cylinderRadius)-cylinderAngle);vec3 point=hitPoint(hitAngle,yc,rotation*vec3(p,1.0),rrotation);if(yc<=0.0&&(point.x<0.0||point.y<0.0||point.x>1.0||point.y>1.0)){vec2 texCoord=gl_FragCoord.xy/resolution.xy;return texture2D(to,texCoord);}if(yc>0.0) return texture2D(from,p);vec4 color=texture2D(from,point.xy);vec4 tcolor=vec4(0.0);return antiAlias(color,tcolor,distanceToEdge(point));}vec4 seeThroughWithShadow(float yc,vec2 p,vec3 point,mat3 rotation,mat3 rrotation){float shadow=distanceToEdge(point)*30.0;shadow=(1.0-shadow)/3.0;if(shadow<0.0) shadow=0.0;else shadow*=amount;vec4 shadowColor=seeThrough(yc,p,rotation,rrotation);shadowColor.r-=shadow;shadowColor.g-=shadow;shadowColor.b-=shadow;return shadowColor;}vec4 backside(float yc,vec3 point){vec4 color=texture2D(from,point.xy);float gray=(color.r+color.b+color.g)/15.0;gray+=(8.0/10.0)*(pow(1.0-abs(yc/cylinderRadius),2.0/10.0)/2.0+(5.0/10.0));color.rgb=vec3(gray);return color;}vec4 behindSurface(float yc,vec3 point,mat3 rrotation){float shado=(1.0-((-cylinderRadius-yc)/amount*7.0))/6.0;shado*=1.0-abs(point.x-0.5);yc=(-cylinderRadius-cylinderRadius-yc);float hitAngle=(acos(yc/cylinderRadius)+cylinderAngle)-PI;point=hitPoint(hitAngle,yc,point,rrotation);if(yc<0.0&&point.x>=0.0&&point.y>=0.0&&point.x<=1.0&&point.y<=1.0&&(hitAngle<PI||amount>0.5)){shado=1.0-(sqrt(pow(point.x-0.5,2.0)+pow(point.y-0.5,2.0))/(71.0/100.0));shado*=pow(-yc/cylinderRadius,3.0);shado*=0.5;}else{shado=0.0;}vec2 texCoord=gl_FragCoord.xy/resolution.xy;return vec4(texture2D(to,texCoord).rgb-shado,1.0);}void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;const float angle=30.0*PI/180.0;float c=cos(-angle);float s=sin(-angle);mat3 rotation=mat3(c,s,0,-s,c,0,0.12,0.258,1);c=cos(angle);s=sin(angle);mat3 rrotation=mat3(c,s,0,-s,c,0,0.15,-0.5,1);vec3 point=rotation*vec3(texCoord,1.0);float yc=point.y-cylinderCenter;if(yc<-cylinderRadius){gl_FragColor=behindSurface(yc,point,rrotation);return;}if(yc>cylinderRadius){gl_FragColor=texture2D(from,texCoord);return;}float hitAngle=(acos(yc/cylinderRadius)+cylinderAngle)-PI;float hitAngleMod=mod(hitAngle,2.0*PI);if((hitAngleMod>PI&&amount<0.5)||(hitAngleMod>PI/2.0&&amount<0.0)){gl_FragColor=seeThrough(yc,texCoord,rotation,rrotation);return;}point=hitPoint(hitAngle,yc,point,rrotation);if(point.x<0.0||point.y<0.0||point.x>1.0||point.y>1.0){gl_FragColor=seeThroughWithShadow(yc,texCoord,point,rotation,rrotation);return;}vec4 color=backside(yc,point);vec4 otherColor;if(yc<0.0){float shado=1.0-(sqrt(pow(point.x-0.5,2.0)+pow(point.y-0.5,2.0))/0.71);shado*=pow(-yc/cylinderRadius,3.0);shado*=0.5;otherColor=vec4(0.0,0.0,0.0,shado);}else{otherColor=texture2D(from,texCoord);}color=antiAlias(color,otherColor,cylinderRadius-abs(yc));vec4 cl=seeThroughWithShadow(yc,texCoord,point,rotation,rrotation);float dist=distanceToEdge(point);gl_FragColor=antiAlias(color,cl,dist);}"},{id:"06450f79cab706705bf9",name:"Polka_dots",owner:"bobylito",uniforms:{dots:5},html_url:"https://gist.github.com/06450f79cab706705bf9",created_at:"2014-05-20T12:09:38Z",updated_at:"2015-03-01T02:55:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float dots;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=progress;bool nextImage=distance(fract(p*dots),vec2(0.5,0.5))<x;if(nextImage) gl_FragColor=texture2D(to,p);else gl_FragColor=texture2D(from,p);}"},{id:"3da654388c3f3cd031c0",name:"burn",owner:"gre",uniforms:{color:[.9,.4,.2]},html_url:"https://gist.github.com/3da654388c3f3cd031c0",created_at:"2014-05-20T09:06:02Z",updated_at:"2015-03-01T02:55:55Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform vec3 color;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p)+vec4(progress*color,1.0),texture2D(to,p)+vec4((1.0-progress)*color,1.0),progress);}"},{id:"e5f807b5dffb09fc7527",name:"FinalGaussianNoise",owner:"mandubian",uniforms:{},html_url:"https://gist.github.com/e5f807b5dffb09fc7527",created_at:"2014-05-19T21:34:07Z",updated_at:"2015-03-01T02:59:02Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float Rand(vec2 v){return fract(sin(dot(v.xy,vec2(12.9898,78.233)))*43758.5453);}float Gaussian(float p,float center,float c){return 0.75*exp(-pow((p-center)/c,2.));}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float c=cos(Gaussian(progress*(1.+Gaussian(progress*Rand(p),0.5,0.5)),0.5,0.25));vec2 d=p*c;gl_FragColor=mix(texture2D(from,d),texture2D(to,d),progress);}"},{id:"130bb7b7affedbda9df5",name:"Mosaic",owner:"Xaychru",uniforms:{endx:0,endy:-1},html_url:"https://gist.github.com/130bb7b7affedbda9df5",created_at:"2014-05-19T16:51:58Z",updated_at:"2015-03-01T02:56:19Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define PI 3.14159265358979323\n\n#define POW2(X) X*X\n\n#define POW3(X) X*X*X\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform int endx;uniform int endy;float Rand(vec2 v){return fract(sin(dot(v.xy,vec2(12.9898,78.233)))*43758.5453);}vec2 Rotate(vec2 v,float a){mat2 rm=mat2(cos(a),-sin(a),sin(a),cos(a));return rm*v;}float CosInterpolation(float x){return -cos(x*PI)/2.+.5;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy-.5;vec2 rp=p;float rpr=(progress*2.-1.);float z=-(rpr*rpr*2.)+3.;float az=abs(z);rp*=az;rp+=mix(vec2(.5,.5),vec2(float(endx)+.5,float(endy)+.5),POW2(CosInterpolation(progress)));vec2 mrp=mod(rp,1.);vec2 crp=rp;bool onEnd=int(floor(crp.x))==endx&&int(floor(crp.y))==endy;if(!onEnd){float ang=float(int(Rand(floor(crp))*4.))*.5*PI;mrp=vec2(.5)+Rotate(mrp-vec2(.5),ang);}if(onEnd||Rand(floor(crp))>.5){gl_FragColor=texture2D(to,mrp);}else{gl_FragColor=texture2D(from,mrp);}}"},{id:"ce1d48f0ce00bb379750",name:"Radial",owner:"Xaychru",uniforms:{},html_url:"https://gist.github.com/ce1d48f0ce00bb379750",created_at:"2014-05-19T15:18:28Z",updated_at:"2015-03-01T02:59:31Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define PI 3.141592653589\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 rp=p*2.-1.;float a=atan(rp.y,rp.x);float pa=progress*PI*2.5-PI*1.25;vec4 fromc=texture2D(from,p);vec4 toc=texture2D(to,p);if(a>pa){gl_FragColor=mix(toc,fromc,smoothstep(0.,1.,(a-pa)));}else{gl_FragColor=toc;}}"},{id:"c3bc914de09227713787",name:"ButterflyWaveScrawler",owner:"mandubian",uniforms:{amplitude:1,waves:30,colorSeparation:.3},html_url:"https://gist.github.com/c3bc914de09227713787",created_at:"2014-05-19T11:48:15Z",updated_at:"2015-03-01T02:59:13Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float amplitude;uniform float waves;uniform float colorSeparation;float PI=3.14159265358979323846264;float compute(vec2 p,float progress,vec2 center){vec2 o=p*sin(progress*amplitude)-center;vec2 h=vec2(1.,0.);float theta=acos(dot(o,h))*waves;return (exp(cos(theta))-2.*cos(4.*theta)+pow(sin((2.*theta-PI)/24.),5.))/10.;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;vec2 dir=p-vec2(.5);float dist=length(dir);float disp=compute(p,progress,vec2(0.5,0.5));vec4 texTo=texture2D(to,p+inv*disp);vec4 texFrom=vec4(texture2D(from,p+progress*disp*(1.0-colorSeparation)).r,texture2D(from,p+progress*disp).g,texture2D(from,p+progress*disp*(1.0+colorSeparation)).b,1.0);gl_FragColor=texTo*progress+texFrom*inv;}"},{id:"4268c81d39bd4ca00ae2",name:"CrazyParametricFun",owner:"mandubian",uniforms:{a:4,b:1,amplitude:120,smoothness:.1},html_url:"https://gist.github.com/4268c81d39bd4ca00ae2",created_at:"2014-05-19T08:04:52Z",updated_at:"2015-03-01T02:56:13Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float a;uniform float b;uniform float amplitude;uniform float smoothness;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 dir=p-vec2(.5);float dist=length(dir);float x=(a-b)*cos(progress)+b*cos(progress*((a/b)-1.));float y=(a-b)*sin(progress)-b*sin(progress*((a/b)-1.));vec2 offset=dir*vec2(sin(progress*dist*amplitude*x),sin(progress*dist*amplitude*y))/smoothness;gl_FragColor=mix(texture2D(from,p+offset),texture2D(to,p),smoothstep(0.2,1.0,progress));}"},{id:"2bcfb59096fcaed82355",name:"powerdisformation",owner:"gre",uniforms:{power:3,powerDest:!0},html_url:"https://gist.github.com/2bcfb59096fcaed82355",created_at:"2014-05-17T10:58:29Z",updated_at:"2015-03-01T02:59:28Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float power;uniform bool powerDest;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 p2=mix(p,vec2(pow(p.x,power),pow(p.y,power)),(powerDest?0.5:1.0)-distance(progress,powerDest?0.5:1.0));gl_FragColor=mix(texture2D(from,p2),texture2D(to,powerDest?p2:p),progress);}"},{id:"2a3f2e907e1c0a152e60",name:"swap",owner:"gre",uniforms:{reflection:.4,perspective:.2,depth:3},html_url:"https://gist.github.com/2a3f2e907e1c0a152e60",created_at:"2014-05-16T13:59:07Z",updated_at:"2015-03-01T02:54:44Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float reflection;uniform float perspective;uniform float depth;const vec4 black=vec4(0.0,0.0,0.0,1.0);const vec2 boundMin=vec2(0.0,0.0);const vec2 boundMax=vec2(1.0,1.0);bool inBounds(vec2 p){return all(lessThan(boundMin,p))&&all(lessThan(p,boundMax));}vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-0.02);}vec4 bgColor(vec2 p,vec2 pfr,vec2 pto){vec4 c=black;pfr=project(pfr);if(inBounds(pfr)){c+=mix(black,texture2D(from,pfr),reflection*mix(1.0,0.0,pfr.y));}pto=project(pto);if(inBounds(pto)){c+=mix(black,texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 pfr,pto=vec2(-1.);float size=mix(1.0,depth,progress);float persp=perspective*progress;pfr=(p+vec2(-0.0,-0.5))*vec2(size/(1.0-perspective*progress),size/(1.0-size*persp*p.x))+vec2(0.0,0.5);size=mix(1.0,depth,1.-progress);persp=perspective*(1.-progress);pto=(p+vec2(-1.0,-0.5))*vec2(size/(1.0-perspective*(1.0-progress)),size/(1.0-size*persp*(0.5-p.x)))+vec2(1.0,0.5);bool fromOver=progress<0.5;if(fromOver){if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else{gl_FragColor=bgColor(p,pfr,pto);}}else{if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else{gl_FragColor=bgColor(p,pfr,pto);}}}"},{id:"94ffa2725b65aa8b9979",name:"ripple",owner:"gre",uniforms:{amplitude:100,speed:50},html_url:"https://gist.github.com/94ffa2725b65aa8b9979",created_at:"2014-05-16T13:58:42Z",updated_at:"2015-03-01T02:53:18Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float amplitude;uniform float speed;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 dir=p-vec2(.5);float dist=length(dir);vec2 offset=dir*(sin(progress*dist*amplitude-progress*speed)+.5)/30.;gl_FragColor=mix(texture2D(from,p+offset),texture2D(to,p),smoothstep(0.2,1.0,progress));}"},{id:"99bced7d9b5311fd166e",name:"flash",owner:"gre",uniforms:{flashPhase:.3,flashIntensity:3,flashZoomEffect:.5},html_url:"https://gist.github.com/99bced7d9b5311fd166e",created_at:"2014-05-16T13:58:17Z",updated_at:"2015-03-01T02:52:58Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float flashPhase;uniform float flashIntensity;uniform float flashZoomEffect;const vec3 flashColor=vec3(1.0,0.8,0.3);const float flashVelocity=3.0;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fc=texture2D(from,p);vec4 tc=texture2D(to,p);float intensity=mix(1.0,2.0*distance(p,vec2(0.5,0.5)),flashZoomEffect)*flashIntensity*pow(smoothstep(flashPhase,0.0,distance(0.5,progress)),flashVelocity);vec4 c=mix(texture2D(from,p),texture2D(to,p),smoothstep(0.5*(1.0-flashPhase),0.5*(1.0+flashPhase),progress));c+=intensity*vec4(flashColor,1.0);gl_FragColor=c;}"},{id:"81c6f2e6fce88f9075d2",name:"flyeye",owner:"gre",uniforms:{size:.04,zoom:30,colorSeparation:.3},html_url:"https://gist.github.com/81c6f2e6fce88f9075d2",created_at:"2014-05-16T13:56:53Z",updated_at:"2015-03-01T02:56:15Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;uniform float zoom;uniform float colorSeparation;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;vec2 disp=size*vec2(cos(zoom*p.x),sin(zoom*p.y));vec4 texTo=texture2D(to,p+inv*disp);vec4 texFrom=vec4(texture2D(from,p+progress*disp*(1.0-colorSeparation)).r,texture2D(from,p+progress*disp).g,texture2D(from,p+progress*disp*(1.0+colorSeparation)).b,1.0);gl_FragColor=texTo*progress+texFrom*inv;}"},{id:"979934722820b5e715fa",name:"doorway",owner:"gre",uniforms:{reflection:.4,perspective:.4,depth:3},html_url:"https://gist.github.com/979934722820b5e715fa",created_at:"2014-05-16T13:54:38Z",updated_at:"2015-03-01T02:51:25Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float reflection;uniform float perspective;uniform float depth;const vec4 black=vec4(0.0,0.0,0.0,1.0);const vec2 boundMin=vec2(0.0,0.0);const vec2 boundMax=vec2(1.0,1.0);bool inBounds(vec2 p){return all(lessThan(boundMin,p))&&all(lessThan(p,boundMax));}vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-0.02);}vec4 bgColor(vec2 p,vec2 pto){vec4 c=black;pto=project(pto);if(inBounds(pto)){c+=mix(black,texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 pfr=vec2(-1.),pto=vec2(-1.);float middleSlit=2.0*abs(p.x-0.5)-progress;if(middleSlit>0.0){pfr=p+(p.x>0.5?-1.0:1.0)*vec2(0.5*progress,0.0);float d=1.0/(1.0+perspective*progress*(1.0-middleSlit));pfr.y-=d/2.;pfr.y*=d;pfr.y+=d/2.;}float size=mix(1.0,depth,1.-progress);pto=(p+vec2(-0.5,-0.5))*vec2(size,size)+vec2(0.5,0.5);if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else{gl_FragColor=bgColor(p,pto);}}"},{id:"731fcad4f8956866f34a",name:"randomsquares",owner:"gre",uniforms:{size:[10,10],smoothness:.5},html_url:"https://gist.github.com/731fcad4f8956866f34a",created_at:"2014-05-16T13:52:46Z",updated_at:"2015-03-01T02:58:04Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform ivec2 size;uniform float smoothness;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float r=rand(floor(vec2(size)*p));float m=smoothstep(0.0,-smoothness,r-(progress*(1.0+smoothness)));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"df8797fd112e8e429064",name:"squeeze",owner:"gre",uniforms:{colorSeparation:.02},html_url:"https://gist.github.com/df8797fd112e8e429064",created_at:"2014-05-16T13:51:39Z",updated_at:"2015-03-01T02:54:05Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float colorSeparation;float progressY(float y){return 0.5+(y-0.5)/(1.0-progress);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float y=progressY(p.y);if(y<0.0||y>1.0){gl_FragColor=texture2D(to,p);}else{vec2 fp=vec2(p.x,y);vec3 c=vec3(texture2D(from,fp-progress*vec2(0.0,colorSeparation)).r,texture2D(from,fp).g,texture2D(from,fp+progress*vec2(0.0,colorSeparation)).b);gl_FragColor=vec4(c,1.0);}}"},{id:"90000743fedc953f11a4",name:"directionalwipe",owner:"gre",uniforms:{direction:[1,-1],smoothness:.5},html_url:"https://gist.github.com/90000743fedc953f11a4",created_at:"2014-05-16T13:50:51Z",updated_at:"2015-03-01T02:57:09Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform vec2 direction;uniform float smoothness;const vec2 center=vec2(0.5,0.5);void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 v=normalize(direction);v/=abs(v.x)+abs(v.y);float d=v.x*center.x+v.y*center.y;float m=smoothstep(-smoothness,0.0,v.x*p.x+v.y*p.y-(d-0.5+progress*(1.+smoothness)));gl_FragColor=mix(texture2D(to,p),texture2D(from,p),m);}"},{id:"7de3f4b9482d2b0bf7bb",name:"wind",owner:"gre",uniforms:{size:.2},html_url:"https://gist.github.com/7de3f4b9482d2b0bf7bb",created_at:"2014-05-16T13:49:36Z",updated_at:"2015-03-01T02:56:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float r=rand(vec2(0,p.y));float m=smoothstep(0.0,-size,p.x*(1.0-size)+size*r-(progress*(1.0+size)));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"d9f8b4df19584f1f0474",name:"fadegrayscale",owner:"gre",uniforms:{grayPhase:.3},html_url:"https://gist.github.com/d9f8b4df19584f1f0474",created_at:"2014-05-16T13:49:13Z",updated_at:"2015-03-01T02:59:50Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float grayPhase;vec3 grayscale(vec3 color){return vec3(0.2126*color.r+0.7152*color.g+0.0722*color.b);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fc=texture2D(from,p);vec4 tc=texture2D(to,p);gl_FragColor=mix(mix(vec4(grayscale(fc.rgb),1.0),texture2D(from,p),smoothstep(1.0-grayPhase,0.0,progress)),mix(vec4(grayscale(tc.rgb),1.0),texture2D(to,p),smoothstep(grayPhase,1.0,progress)),progress);}"},{id:"206b96128ad6085f9911",name:"dispersionblur",owner:"gre",uniforms:{size:.6},html_url:"https://gist.github.com/206b96128ad6085f9911",created_at:"2014-05-16T13:47:09Z",updated_at:"2015-03-01T02:57:31Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define QUALITY 32\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;const float GOLDEN_ANGLE=2.399963229728653;vec4 blur(sampler2D t,vec2 c,float radius){vec4 sum=vec4(0.0);float q=float(QUALITY);for(int i=0;i<QUALITY;++i){float fi=float(i);float a=fi*GOLDEN_ANGLE;float r=sqrt(fi/q)*radius;vec2 p=c+r*vec2(cos(a),sin(a));sum+=texture2D(t,p);}return sum/q;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;gl_FragColor=inv*blur(from,p,progress*size)+progress*blur(to,p,inv*size);}"},{id:"d71472a550601b96d69d",name:"heartwipe",owner:"gre",uniforms:{},html_url:"https://gist.github.com/d71472a550601b96d69d",created_at:"2014-05-16T13:46:31Z",updated_at:"2015-03-01T02:55:52Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;bool inHeart(vec2 p,vec2 center,float size){if(size==0.0) return false;vec2 o=(p-center)/(1.6*size);return pow(o.x*o.x+o.y*o.y-0.3,3.0)<o.x*o.x*pow(o.y,3.0);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float m=inHeart(p,vec2(0.5,0.4),progress)?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"f24651a01bf574e90122",name:"fadecolor",owner:"gre",uniforms:{color:[0,0,0],colorPhase:.4},html_url:"https://gist.github.com/f24651a01bf574e90122",created_at:"2014-05-16T13:45:46Z",updated_at:"2015-03-01T02:53:54Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform vec3 color;uniform float colorPhase;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(mix(vec4(color,1.0),texture2D(from,p),smoothstep(1.0-colorPhase,0.0,progress)),mix(vec4(color,1.0),texture2D(to,p),smoothstep(colorPhase,1.0,progress)),progress);}"},{id:"35e8c18557995c77278e",name:"circleopen",owner:"gre",uniforms:{smoothness:.3,opening:!0},html_url:"https://gist.github.com/35e8c18557995c77278e",created_at:"2014-05-16T13:40:51Z",updated_at:"2015-03-01T02:58:26Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float smoothness;uniform bool opening;const vec2 center=vec2(0.5,0.5);const float SQRT_2=1.414213562373;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=opening?progress:1.-progress;float m=smoothstep(-smoothness,0.0,SQRT_2*distance(center,p)-x*(1.+smoothness));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),opening?1.-m:m);}"}]
},{}]},{},[23]);