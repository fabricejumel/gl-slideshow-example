!function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){function o(e,t){var r=this;if(!(r instanceof o))return new o(e,t);var n,i=typeof e;if("number"===i)n=+e;else if("string"===i)n=o.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&j(e.data)&&(e=e.data),n=+e.length}if(n>k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");0>n?n=0:n>>>=0,o.TYPED_ARRAY_SUPPORT?r=o._augment(new Uint8Array(n)):(r.length=n,r._isBuffer=!0);var s;if(o.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)r._set(e);else if(A(e))if(o.isBuffer(e))for(s=0;n>s;s++)r[s]=e.readUInt8(s);else for(s=0;n>s;s++)r[s]=(e[s]%256+256)%256;else if("string"===i)r.write(e,0,t);else if("number"===i&&!o.TYPED_ARRAY_SUPPORT)for(s=0;n>s;s++)r[s]=0;return n>0&&n<=o.poolSize&&(r.parent=O),r}function n(e,t){if(!(this instanceof n))return new n(e,t);var r=new o(e,t);return delete r.parent,r}function i(e,t,r,o){r=Number(r)||0;var n=e.length-r;o?(o=Number(o),o>n&&(o=n)):o=n;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;o>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function s(e,t,r,o){var n=L(S(t,e.length-r),e,r,o);return n}function a(e,t,r,o){var n=L(I(t),e,r,o);return n}function l(e,t,r,o){return a(e,t,r,o)}function f(e,t,r,o){var n=L(F(t),e,r,o);return n}function u(e,t,r,o){var n=L(R(t,e.length-r),e,r,o);return n}function c(e,t,r){return U.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function h(e,t,r){var o="",n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)e[i]<=127?(o+=P(n)+String.fromCharCode(e[i]),n=""):n+="%"+e[i].toString(16);return o+P(n)}function p(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;r>n;n++)o+=String.fromCharCode(127&e[n]);return o}function d(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;r>n;n++)o+=String.fromCharCode(e[n]);return o}function g(e,t,r){var o=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>o)&&(r=o);for(var n="",i=t;r>i;i++)n+=D(e[i]);return n}function m(e,t,r){for(var o=e.slice(t,r),n="",i=0;i<o.length;i+=2)n+=String.fromCharCode(o[i]+256*o[i+1]);return n}function v(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||s>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function y(e,t,r,o){0>t&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-r,2);i>n;n++)e[r+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function x(e,t,r,o){0>t&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-r,4);i>n;n++)e[r+n]=t>>>8*(o?n:3-n)&255}function b(e,t,r,o,n,i){if(t>n||i>t)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function w(e,t,r,o,n){return n||b(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),N.write(e,t,r,o,23,4),r+4}function T(e,t,r,o,n){return n||b(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),N.write(e,t,r,o,52,8),r+8}function E(e){if(e=C(e).replace(M,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function C(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function A(e){return j(e)||o.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function D(e){return 16>e?"0"+e.toString(16):e.toString(16)}function S(e,t){t=t||1/0;for(var r,o=e.length,n=null,i=[],s=0;o>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!n){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(t-=3)>-1&&i.push(239,191,189);continue}n=r;continue}if(56320>r){(t-=3)>-1&&i.push(239,191,189),n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&((t-=3)>-1&&i.push(239,191,189),n=null);if(128>r){if((t-=1)<0)break;i.push(r)}else if(2048>r){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function I(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function R(e,t){for(var r,o,n,i=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),o=r>>8,n=r%256,i.push(n),i.push(o);return i}function F(e){return U.toByteArray(E(e))}function L(e,t,r,o){for(var n=0;o>n&&!(n+r>=t.length||n>=e.length);n++)t[n+r]=e[n];return n}function P(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var U=e("base64-js"),N=e("ieee754"),j=e("is-array");r.Buffer=o,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,o.poolSize=8192;var k=1073741823,O={};o.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);s>i&&e[i]===t[i];i++);return i!==s&&(r=e[i],n=t[i]),n>r?-1:r>n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!j(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new o(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,i),i+=s.length}return n},o.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=S(e).length;break;case"base64":r=F(e).length;break;default:r=e.length}return r},o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(e,t,r){var o=!1;if(t>>>=0,r=void 0===r||r===1/0?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return g(this,t,r);case"utf8":case"utf-8":return h(this,t,r);case"ascii":return p(this,t,r);case"binary":return d(this,t,r);case"base64":return c(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function r(e,t,r){for(var o=-1,n=0;r+n<e.length;n++)if(e[r+n]===t[-1===o?0:n-o]){if(-1===o&&(o=n),n-o+1===t.length)return r+o}else o=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return r(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,r,o){if(isFinite(t))isFinite(r)||(o=r,r=void 0);else{var n=o;o=t,t=r,r=n}if(t=Number(t)||0,0>r||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var c=this.length-t;r?(r=Number(r),r>c&&(r=c)):r=c,o=String(o||"utf8").toLowerCase();var h;switch(o){case"hex":h=i(this,e,t,r);break;case"utf8":case"utf-8":h=s(this,e,t,r);break;case"ascii":h=a(this,e,t,r);break;case"binary":h=l(this,e,t,r);break;case"base64":h=f(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+o)}return h},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(e,t));else{var i=t-e;n=new o(i,void 0);for(var s=0;i>s;s++)n[s]=this[s+e]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return o},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var o=this[e+--t],n=1;t>0&&(n*=256);)o+=this[e+--t]*n;return o},o.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var o=t,n=1,i=this[e+--o];o>0&&(n*=256);)i+=this[e+--o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},o.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),N.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),N.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),N.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),N.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,o){e=+e,t>>>=0,r>>>=0,o||_(this,e,t,r,Math.pow(2,8*r),0);var n=1,i=0;for(this[t]=255&e;++i<r&&(n*=256);)this[t+i]=e/n>>>0&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,o){e=+e,t>>>=0,r>>>=0,o||_(this,e,t,r,Math.pow(2,8*r),0);var n=r-1,i=1;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=e/i>>>0&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):x(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):x(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,o){e=+e,t>>>=0,o||_(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var n=0,i=1,s=0>e?1:0;for(this[t]=255&e;++n<r&&(i*=256);)this[t+n]=(e/i>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,o){e=+e,t>>>=0,o||_(this,e,t,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var n=r-1,i=1,s=0>e?1:0;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=(e/i>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):y(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):y(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):x(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(1e3>i||!o.TYPED_ARRAY_SUPPORT)for(var s=0;i>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+i),t);return i},o.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var o;if("number"==typeof e)for(o=t;r>o;o++)this[o]=e;else{var n=S(e.toString()),i=n.length;for(o=t;r>o;o++)this[o]=n[o%i]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var B=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=B.get,e.set=B.set,e.write=B.write,e.toString=B.toString,e.toLocaleString=B.toString,e.toJSON=B.toJSON,e.equals=B.equals,e.compare=B.compare,e.indexOf=B.indexOf,e.copy=B.copy,e.slice=B.slice,e.readUIntLE=B.readUIntLE,e.readUIntBE=B.readUIntBE,e.readUInt8=B.readUInt8,e.readUInt16LE=B.readUInt16LE,e.readUInt16BE=B.readUInt16BE,e.readUInt32LE=B.readUInt32LE,e.readUInt32BE=B.readUInt32BE,e.readIntLE=B.readIntLE,e.readIntBE=B.readIntBE,e.readInt8=B.readInt8,e.readInt16LE=B.readInt16LE,e.readInt16BE=B.readInt16BE,e.readInt32LE=B.readInt32LE,e.readInt32BE=B.readInt32BE,e.readFloatLE=B.readFloatLE,e.readFloatBE=B.readFloatBE,e.readDoubleLE=B.readDoubleLE,e.readDoubleBE=B.readDoubleBE,e.writeUInt8=B.writeUInt8,e.writeUIntLE=B.writeUIntLE,e.writeUIntBE=B.writeUIntBE,e.writeUInt16LE=B.writeUInt16LE,e.writeUInt16BE=B.writeUInt16BE,e.writeUInt32LE=B.writeUInt32LE,e.writeUInt32BE=B.writeUInt32BE,e.writeIntLE=B.writeIntLE,e.writeIntBE=B.writeIntBE,e.writeInt8=B.writeInt8,e.writeInt16LE=B.writeInt16LE,e.writeInt16BE=B.writeInt16BE,e.writeInt32LE=B.writeInt32LE,e.writeInt32BE=B.writeInt32BE,e.writeFloatLE=B.writeFloatLE,e.writeFloatBE=B.writeFloatBE,e.writeDoubleLE=B.writeDoubleLE,e.writeDoubleBE=B.writeDoubleBE,e.fill=B.fill,e.inspect=B.inspect,e.toArrayBuffer=B.toArrayBuffer,e};var M=/[^+\/0-9A-z\-]/g},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(e,t,r){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===c?62:t===a||t===h?63:l>t?-1:l+10>t?t-l+26+26:u+26>t?t-u:f+26>t?t-f+26:void 0}function r(e){function r(e){f[c++]=e}var o,n,s,a,l,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;l="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,f=new i(3*e.length/4-l),s=l>0?e.length-4:e.length;var c=0;for(o=0,n=0;s>o;o+=4,n+=3)a=t(e.charAt(o))<<18|t(e.charAt(o+1))<<12|t(e.charAt(o+2))<<6|t(e.charAt(o+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===l?(a=t(e.charAt(o))<<2|t(e.charAt(o+1))>>4,r(255&a)):1===l&&(a=t(e.charAt(o))<<10|t(e.charAt(o+1))<<4|t(e.charAt(o+2))>>2,r(a>>8&255),r(255&a)),f}function n(e){function t(e){return o.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var n,i,s,a=e.length%3,l="";for(n=0,s=e.length-a;s>n;n+=3)i=(e[n]<<16)+(e[n+1]<<8)+e[n+2],l+=r(i);switch(a){case 1:i=e[e.length-1],l+=t(i>>2),l+=t(i<<4&63),l+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],l+=t(i>>10),l+=t(i>>4&63),l+=t(i<<2&63),l+="="}return l}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),f="a".charCodeAt(0),u="A".charCodeAt(0),c="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=n}("undefined"==typeof r?this.base64js={}:r)},{}],3:[function(e,t,r){r.read=function(e,t,r,o,n){var i,s,a=8*n-o-1,l=(1<<a)-1,f=l>>1,u=-7,c=r?n-1:0,h=r?-1:1,p=e[t+c];for(c+=h,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+e[t+c],c+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=o;u>0;s=256*s+e[t+c],c+=h,u-=8);if(0===i)i=1-f;else{if(i===l)return s?0/0:(p?-1:1)*(1/0);s+=Math.pow(2,o),i-=f}return(p?-1:1)*s*Math.pow(2,i-o)},r.write=function(e,t,r,o,n,i){var s,a,l,f=8*i-n-1,u=(1<<f)-1,c=u>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:i-1,d=o?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+c>=1?h/l:h*Math.pow(2,1-c),t*l>=2&&(s++,l/=2),s+c>=u?(a=0,s=u):s+c>=1?(a=(t*l-1)*Math.pow(2,n),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;e[r+p]=255&a,p+=d,a/=256,n-=8);for(s=s<<n|a,f+=n;f>0;e[r+p]=255&s,p+=d,s/=256,f-=8);e[r+p-d]|=128*g}},{}],4:[function(e,t,r){var o=Array.isArray,n=Object.prototype.toString;t.exports=o||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],5:[function(e,t,r){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,r,o,i,l,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,i=new Array(o-1),l=1;o>l;l++)i[l-1]=arguments[l];r.apply(this,i)}else if(s(r)){for(o=arguments.length,i=new Array(o-1),l=1;o>l;l++)i[l-1]=arguments[l];for(f=r.slice(),o=f.length,l=0;o>l;l++)f[l].apply(this,i)}return!0},o.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},o.prototype.removeListener=function(e,t){var r,o,i,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=i;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],6:[function(e,t,r){function o(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var r=-1;++r<t;)e[r]();t=s.length}a=!1}}function n(){}var i=t.exports={},s=[],a=!1;i.nextTick=function(e){s.push(e),a||setTimeout(o,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],7:[function(e,t,r){t.exports={timeline:[{canvas2d:{background:"#EDA",size:[800,600],draws:[{font:"bold 80px sans-serif",fillStyle:"#000",textBaseline:"middle",textAlign:"center"},["fillText","My Super Diaporama",400,300]]},duration:500,transitionNext:{duration:1e3}},{image:"./images/run.jpg",duration:5e3,kenburns:{from:[.5,[.5,.6]],to:[1,[.5,.6]]},transitionNext:{name:"crosszoom",duration:1e3}},{image:"./images/barley.jpg",duration:4e3,kenburns:{from:[.9],to:[.7,[.8,.6]]},transitionNext:{name:"linearblur",duration:1e3}},{image:"./images/leaves.jpg",duration:5e3,kenburns:{from:[.7,[0,.5]],to:[.7,[1,.5]]},transitionNext:{name:"DoomScreenTransition",duration:2e3}},{image:"./images/gladiator.jpg",duration:6e3,kenburns:{from:[.3,[.5,.8]],to:[1]},transitionNext:{name:"doorway",duration:2e3,uniforms:{reflection:.4,perspective:.4,depth:3},easing:[0,0,1,1]}},{image:"./images/train.jpg",duration:4e3,kenburns:{from:[1],to:[.3]},transitionNext:{name:"heartwipe",duration:1500}},{image:"./images/paris.jpg",duration:6e3,kenburns:{from:[.4,[1,.5]],to:[1,[.5,.5]],easing:[.3,0,1,1]},transitionNext:{name:"pagecurl",duration:2e3}}]}},{}],8:[function(e,t,r){function o(){var e=window.innerWidth,t=window.innerHeight;s.width=e,s.height=t,s.resolution=Math.min(window.devicePixelRatio||1,Math.ceil(a/(e*t)))}var n=e("diaporama");document.body.style.background="#000",document.body.style.margin="0",document.body.style.overflow="hidden";var i=document.createElement("div");i.style.width=window.innerWidth+"px",i.style.height=window.innerHeight+"px",document.body.appendChild(i);var s=n(i,{GlslTransitions:e("glsl-transitions"),data:e("./diaporama.json"),autoplay:!0,loop:!0}),a=524288;window.addEventListener("resize",o),o(),document.body.addEventListener("keydown",function(e){switch(e.which){case 38:s.playbackRate*=1.5;break;case 40:s.playbackRate/=1.5;break;case 37:s.prev(500);break;case 39:s.next(500);break;case 32:s.paused=!s.paused}}),window.diaporama=s},{"./diaporama.json":7,diaporama:9,"glsl-transitions":61}],9:[function(e,t,r){t.exports=e("./lib/Diaporama")},{"./lib/Diaporama":11}],10:[function(e,t,r){t.exports={TRANSITION:0,KENBURNS:[1,2,3],CANVAS2D:[4,5,6],sort:function(e,t){return e-t}}},{}],11:[function(e,t,r){function o(e,t){return p.sort(e[1].channel,t[1].channel)}function n(e){if(l||(l=new y),e){if("webgl"===e||"canvas"===e)return l.supported()?"webgl":null}else e=l.supported()?"webgl":"dom";return e}function i(e,t,r){switch(r){case"webgl":return new g(e,t);case"dom":return new m(e,t)}return null}function s(e,t,r,o,n){var i=T(r/o)+r*n/(t-e);return e+(t-e)*Math.max(0,Math.min(i,1))}function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);if(!e||!e.nodeType)throw new Error("Diaporama: a DOM container is required.");t&&!r&&t.data&&(r=t,t=null),r||(r={}),this._runningSegments=[],this._renderingMode=n(r.renderingMode),this._rendering=i(e,r.backgroundColor||this._backgroundColor,this._renderingMode),delete r.renderingMode,delete r.backgroundColor,this._handleResize=this._handleResize.bind(this),this._handleRender=this._handleRender.bind(this),this._container=e;for(var o in r)this[o]=r[o];t&&(this.data=t),(null===this._width||null===this._height)&&this.fitToContainer();var s=this;this.once("canplay",function(){s.renderNow()}),this.once("canplaythrough",function(){s._autoplay?s._start():s._requestRender()}),this._requestResize()}var l,f=e("raf"),u=e("events").EventEmitter,c=e("object-assign"),h=e("bezier-easing"),p=e("./Channels"),d=e("./findTransitionByName"),g=e("./DiaporamaRenderingCanvas"),m=e("./DiaporamaRenderingDOM"),v=e("./TimeInterval"),_=e("./DiaporamaFormatError"),y=e("./WebGLDetector"),x=0,b=1,w=2,T=h(.4,0,.8,1);a.prototype=c({},u.prototype,{destroy:function(){this.emit("destroy"),this.removeAllListeners(),this._stopCurrentDiaporamaLoading&&(this._stopCurrentDiaporamaLoading(),this._stopCurrentDiaporamaLoading=null),this._stop(),this._rendering.destroy()},play:function(){this.paused=!1},pause:function(){this.paused=!0},next:function(e){var t=this._slideIndexForTime(this._slidingTarget?this._slidingTarget.to:this._currentTime);if(-1!==t){if(t++,t>=this._slideTimes.length){if(!this._loop)return;t=0}this._slideToTime(this._slideTimes[t],e)}},prev:function(e){var t=this._slideIndexForTime(this._slidingTarget?this._slidingTarget.to:this._currentTime);if(-1!==t){if(t--,0>t){if(!this._loop)return;t=this._slideTimes.length-1}this._slideToTime(this._slideTimes[t],e)}},jump:function(e,t){if("number"!=typeof e)throw new Error("Diaporama#jump requires the slide index number.");if(!(0>e||e>=this._slideTimes.length)){var r=this._slideIndexForTime(this._currentTime);r!==e&&this._slideToTime(this._slideTimes[e],t)}},fitToContainer:function(){var e=this._container,t=e.getBoundingClientRect();this._width=t.width,this._height=t.height,this._requestResize()},_playbackRate:1,_loop:!1,_autoplay:!1,_paused:!0,_width:null,_height:null,_resolution:window.devicePixelRatio||1,_currentTime:0,_duration:0,_backgroundColor:[0,0,0],_curLoop:null,_startLoopId:0,_needResize:null,_needRender:null,_slidingTarget:null,_loadImages:function(){function e(){c||(c=1,a.emit("canplay"),a._requestRender())}function t(){h||(h=1,a.emit("canplaythrough"),a._requestRender())}function r(){a.emit("load"),a._requestRender()}function o(){if(u.length===f.length)e(),t(),r(),s();else if(c||d&&-1===u.indexOf(d)||e(),c&&!h){var o=Date.now()-p,n=a.duration;.8*u.length/f.length>o/n&&t()}}function n(e){-1!==f.indexOf(e)&&(a.emit("progress",u.length/f.length),u.push(e),o())}function i(e,t){a.emit("error",new Error("Failure to load "+e),t),s()}function s(){l.removeListener("load",n),l.removeListener("error",i),clearInterval(g)}this._stopCurrentDiaporamaLoading&&(this._stopCurrentDiaporamaLoading(),this._stopCurrentDiaporamaLoading=null);var a=this,l=this._rendering.images,f=[],u=[];this._data.timeline.forEach(function(e){var t=e.image;t&&(l.has(t)||f.push(t))});var c,h;if(0===f.length)return e(),t(),void r();var p=Date.now(),d=f[0],g=setInterval(o,200);l.on("load",n),l.on("error",i);for(var m=0;m<f.length;++m)l.load(f[m]);this._stopCurrentDiaporamaLoading=s},_loadTransitions:function(){var e=this._rendering.transitions;if(e){var t=this._data.transitions||this.GlslTransitions||{};this._data.timeline.forEach(function(r){var o=r.transitionNext&&r.transitionNext.name;if(o&&!e.has(o)){var n=d(o,t);n&&e.set(o,n)}})}},_requestResize:function(){null===this._needResize&&(this._needResize=f(this._handleResize))},_handleResize:function(){null!==this._needResize&&(this._needResize=null,this._resize())},_resize:function(){var e=this._width,t=this._height,r=this._resolution;this._rendering.resize(e,t,r);for(var o=0;o<this._runningSegments.length;++o)this._runningSegments[o][1].resize(e,t,r);this.emit("resize",e,t),this._requestRender()},_computeTimelineSegments:function(){for(var e;e=this._runningSegments.pop();){var t=e[1].leave();t&&this.emit.apply(this,t)}for(var r,n=this.loop,i=this._data,s=i.timeline.length,a=0,l=0,f=[],u=[],h=[],d=0;s>d;d++){f.push(a);var g=i.timeline[d],m=g.duration||0,y=g.transitionNext,x=y&&y.duration||0,b=d===s-1?2:d%2;if(g.image){if(0===d){var w=c({},g);w.kenburns=c({},w.kenburns),w.kenburns.to=w.kenburns.from,r=new this._rendering.SegmentKenBurns(p.KENBURNS[b],w)}e=new this._rendering.SegmentKenBurns(p.KENBURNS[b],g)}else{if(!g.canvas2d)throw new _("timeline item can't be understood as a segment.",g);0===d&&(r=new this._rendering.SegmentCanvas2d(p.CANVAS2D[b],g)),e=new this._rendering.SegmentCanvas2d(p.CANVAS2D[b],g)}u.push([new v(a-l,n||d!==s-1?a+m+x:a+m),e]),l=x,a+=m,x&&(h.push({interval:new v(a,a+x),index:d}),a+=x)}for(var T=a-l,E=[],C=0;C<h.length;++C){var A=h[C],D=A.index,S=D+1<i.timeline.length?D+1:0,I=u[D][1],R=u[S][1],F=i.timeline[D].transitionNext;(0!==S||n)&&E.push([A.interval,new this._rendering.SegmentTransition(p.TRANSITION,F,I,R)])}if(n&&u.length){var L=u[0][0].clone();L.add(T),u.push([L,r])}u=E.concat(u),u.sort(o),this._slideTimes=f,this._segments=u,this._duration=T,this._lastTransitionDuration=l},_slideIndexForTime:function(e){var t=this._slideTimes;if(!t)return-1;e=this._normalizeTime(e);for(var r=t.length,o=0;r>o;++o)if(e<t[o])return o-1;return r-1},_slideToTime:function(e,t){var r=this._currentTime;

if(e!==r){if(this._loop){var o=this.duration,n=Math.abs(e-r),i=Math.abs(e+o-r),s=Math.abs(e-o-r);(n>i||n>s)&&(s>i?e+=o:e-=o)}if(this.paused||!t)this._currentTime=e,this._requestRender();else{var a=this._playbackRate;this._slidingTarget={from:r,to:e,startTime:null,duration:t,initialPlaybackRate:e>r==a>0?a:0}}}},renderNow:function(){this._needRender=!0,this._handleRender()},_requestRender:function(){null===this._curLoop&&null===this._needRender&&(this._needRender=f(this._handleRender))},_handleRender:function(){null!==this._needRender&&(this._needRender=null,this._render())},_normalizeTime:function(e){var t=this.duration;return this._loop?t?(e+t)%t:0:Math.max(0,Math.min(e,t))},_render:function(){this._handleResize();var e=this._segments;if(0!==e.length){var t,r,n=this._normalizeTime(this._currentTime),i=this._runningSegments,s=this._rendering,a=!1,l=[],f=[],u=e.length;for(t=0;u>t;++t){r=e[t];var c=i.indexOf(r),h=-1!==c;if(r[0].timeInside(n)){if(!h){if(!r[1].ready(s)){a=!0;continue}i.push(r),l.push(r[1])}}else h&&(i.splice(c,1),f.push(r[1]))}for(i.sort(o),t=f.length-1;t>=0;t--){r=f[t];var p=r.leave();p&&this.emit.apply(this,p)}for(t=l.length-1;t>=0;t--){r=l[t];var d=r.enter(s);d&&this.emit.apply(this,d)}if(i.length>0){for(var g=i.length-1;g>=0;g--){var m=i[g];m[1].render(m[0].interpolate(n))}return this._rendering.switchChannel(i[0][1].channel),a?b:w}return x}},_start:function(){var e,t=this,r=++this._startLoopId;this._curLoop=f(function o(n){if(t._startLoopId===r){f(o),e||(e=n,t.emit("play"));var i=n-e;e=n;var a=t._render();if(a===x)t.loop?t.currentTime=0:t._stop(!0);else if(a===w){var l=t._slidingTarget;if(null!==l){null===l.startTime&&(l.startTime=n);var u=n-l.startTime,c=s(l.from,l.to,u,l.duration,l.initialPlaybackRate);Math.abs(l.to-c)<10||u>=l.duration?(t._currentTime=l.to,t._slidingTarget=null):t._currentTime=c}else t._currentTime=t._normalizeTime(t._currentTime+i*t._playbackRate)}}})},_stop:function(e){this._startLoopId++,this._slidingTarget&&(this.currentTime=this._slidingTarget.endAt,this._slidingTarget=null),null!==this._curLoop&&(f.cancel(this._curLoop),this._curLoop=null,this.emit("pause"),e&&this.emit("ended"))}}),Object.defineProperties(a.prototype,{loop:{set:function(e){var t=!!e;this._loop!==t&&(this._loop=t,this._data&&(this._computeTimelineSegments(this._data),this._requestRender()))},get:function(){return this._loop}},autoplay:{set:function(e){this._autoplay=e},get:function(){return this._autoplay}},data:{set:function(e){var t=this._data;t!==e&&(this._data=e,0===e.timeline.length&&this._rendering.emptyChild(),this._computeTimelineSegments(t),this._loadTransitions(),this._loadImages(),this._requestRender())},get:function(){return this._data}},resolution:{set:function(e){e!==this._resolution&&(this._resolution=e,this._requestResize())},get:function(){return this._resolution}},width:{set:function(e){e!==this._width&&(this._width=e,this._requestResize())},get:function(){return this._width}},height:{set:function(e){e!==this._height&&(this._height=e,this._requestResize())},get:function(){return this._height}},currentTime:{set:function(e){e!==this._currentTime&&(this._currentTime=this._normalizeTime(e),this._requestRender())},get:function(){return this._currentTime}},playbackRate:{set:function(e){this._playbackRate=e},get:function(){return this._playbackRate}},paused:{set:function(e){var t=null===this._curLoop;e!==t&&(e?this._stop():this._start())},get:function(){return null===this._curLoop}},duration:{get:function(){var e=this._duration||0;return this._loop?e+(this._lastTransitionDuration||0):e},set:function(){throw new Error("Diaporama: duration is a read-only value.")}},renderingMode:{get:function(){return this._renderingMode},set:function(){throw new Error("Diaporama: setting renderingMode afterwards is not supported.")}},backgroundColor:{get:function(){return this._backgroundColor},set:function(){throw new Error("Diaporama: setting backgroundColor afterwards is not supported.")}}}),t.exports=a},{"./Channels":10,"./DiaporamaFormatError":12,"./DiaporamaRenderingCanvas":15,"./DiaporamaRenderingDOM":17,"./TimeInterval":22,"./WebGLDetector":23,"./findTransitionByName":24,"bezier-easing":27,events:5,"object-assign":53,raf:54}],12:[function(e,t,r){function o(e,t){this.message=e,this.stack=(new Error).stack}o.prototype=new Error,o.prototype.name="DiaporamaFormatError",t.exports=o},{}],13:[function(e,t,r){function o(e,t,r,o){a.call(this,e,t),this.segmentFrom=r,this.segmentTo=o}var n=e("object-assign"),i=e("gl-texture2d"),s=e("bezier-easing"),a=e("../SegmentTimeline");o.prototype=n({},a.prototype,{toString:function(){return"SegmentTransition("+this.channel+","+this.segmentFrom.channel+"~>"+this.segmentTo.channel+")"},ready:function(e){return this.segmentFrom.ready(e)&&this.segmentTo.ready(e)&&(!this.data.name||e.transitions.has(this.data.name))},enter:function(e){var t=this.data,r=e.transitions.getOrFade(t.name),o=e.getChannelContext(this.channel);return this.gl=o,this.from=e.getChannel(this.segmentFrom.channel),this.to=e.getChannel(this.segmentTo.channel),this.fromTexture=i(o,this.from),this.toTexture=i(o,this.to),this.uniforms=n({},r.uniforms,t.uniforms||{}),this.duration=t.duration||1e3,this.easing=s.apply(null,t.easing||[0,0,1,1]),this.t=r.t,["transition",this.data,this.segmentFrom.data,this.segmentTo.data]},resize:function(){this.fromTexture&&this.fromTexture.dispose(),this.toTexture&&this.toTexture.dispose(),this.fromTexture=i(this.gl,this.from),this.toTexture=i(this.gl,this.to),this.t.render(this.easing(this._p||0),this.fromTexture,this.toTexture,this.uniforms)},leave:function(){return this.fromTexture&&this.fromTexture.dispose(),this.toTexture&&this.toTexture.dispose(),this.fromTexture=null,this.toTexture=null,["transitionEnd",this.data,this.segmentFrom.data,this.segmentTo.data]},render:function(e){this._p=e,this.fromTexture.setPixels(this.from),this.toTexture.setPixels(this.to),this.t.render(this.easing(e),this.fromTexture,this.toTexture,this.uniforms)}}),t.exports=o},{"../SegmentTimeline":20,"bezier-easing":27,"gl-texture2d":38,"object-assign":53}],14:[function(e,t,r){function o(e){this.gl=e,this.ts={},this.set("fade",i)}var n=e("glsl-transition"),i=e("glsl-transition-fade");o.prototype={destroy:function(){for(var e in this.ts)this.ts[e].t.dispose();this.ts=null},has:function(e){return e in this.ts},set:function(e,t){var r=n(this.gl,t.glsl);this.ts[e]={t:r,uniforms:t.uniforms||{}}},get:function(e){return this.ts[e]},getOrFade:function(e){return e&&this.ts[e]||this.ts.fade}},t.exports=o},{"glsl-transition":40,"glsl-transition-fade":39}],15:[function(e,t,r){function o(e,t){this._container=e,this._container.style.backgroundColor="rgb("+t.map(function(e){return~~(255*e)})+")",this._canvases={},this._ctxs={},this.createDOM(),this.images=new f,this.transitions=new l(this.getChannelContext(u.TRANSITION))}var n=e("kenburns-webgl"),i=e("./SegmentGlslTransition"),s=e("../SegmentKenBurns"),a=e("../SegmentCanvas2d"),l=e("./StoreTransitions"),f=e("../StoreImages"),u=e("../Channels");o.prototype={SegmentTransition:i,SegmentKenBurns:s,SegmentCanvas2d:a,destroy:function(){this.emptyChild(),this.images.destroy(),this.transitions.destroy();for(var e in this._ctxs)this._ctxs[e].destroy&&this._ctxs[e].destroy();this._canvases=null,this._ctxs=null},resize:function(e,t,r){var o=e*r,n=t*r;for(var i in this._canvases){var s=this._canvases[i];s.style.width=e+"px",s.style.height=t+"px",s.width=o,s.height=n}this._container.style.width=e+"px",this._container.style.height=t+"px"},getChannel:function(e){return this._canvases[e]},getChannelContext:function(e){return this._ctxs[e]},switchChannel:function(e){e!==this._c&&this._setChild(this._canvases[e])},createDOM:function(){var e,t;e=document.createElement("canvas"),t=e.getContext("webgl"),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),this._attachChannel(u.TRANSITION,e,t),u.KENBURNS.forEach(function(r){e=document.createElement("canvas"),t=new n(e),this._attachChannel(r,e,t)},this),u.CANVAS2D.forEach(function(r){e=document.createElement("canvas"),t=e.getContext("2d"),this._attachChannel(r,e,t)},this)},emptyChild:function(){return this._setChild()},_attachChannel:function(e,t,r){this._canvases[e]=t,this._ctxs[e]=r},_setChild:function(e){this._c=e;var t=this._container,r=t.children[0];r&&t.removeChild(r),e&&t.appendChild(e)}},t.exports=o},{"../Channels":10,"../SegmentCanvas2d":18,"../SegmentKenBurns":19,"../StoreImages":21,"./SegmentGlslTransition":13,"./StoreTransitions":14,"kenburns-webgl":52}],16:[function(e,t,r){function o(e,t,r,o){s.call(this,e,t),this.segmentFrom=r,this.segmentTo=o}var n=e("object-assign"),i=e("bezier-easing"),s=e("../SegmentTimeline");o.prototype=n({},s.prototype,{toString:function(){return"SegmentTransition("+this.channel+","+this.segmentFrom.channel+"~>"+this.segmentTo.channel+")"},ready:function(e){return this.segmentFrom.ready(e)&&this.segmentTo.ready(e)},enter:function(e){var t=this.data,r=e.getChannel(this.segmentFrom.channel),o=e.getChannel(this.segmentTo.channel),n=e.getChannel(this.channel);return r.style.position="absolute",r.style.top=0,r.style.left=0,o.style.position="absolute",o.style.top=0,o.style.left=0,n.appendChild(o),n.appendChild(r),this.container=n,this.from=r,this.to=o,this.duration=t.duration||1e3,this.easing=i.apply(null,t.easing||[0,0,1,1]),["transition",t,this.segmentFrom.data,this.segmentTo.data]},resize:function(){},leave:function(){return this.container.removeChild(this.from),this.container.removeChild(this.to),this.from.style.opacity=1,this.to.style.opacity=1,["transitionEnd",this.data,this.segmentFrom.data,this.segmentTo.data]},render:function(e){var t=this.easing(e);this.from.style.opacity=1-t}}),t.exports=o},{"../SegmentTimeline":20,"bezier-easing":27,"object-assign":53}],17:[function(e,t,r){function o(e,t){this._container=e,this._container.style.backgroundColor="rgb("+t.map(function(e){return~~(255*e)})+")",this._nodes={},this._ctxs={},this.createDOM(),this.images=new s}var n=e("kenburns-dom"),i=e("../Channels"),s=e("../StoreImages"),a=e("./SegmentDomTransition"),l=e("../SegmentKenBurns"),f=e("../SegmentCanvas2d");o.prototype={SegmentTransition:a,SegmentKenBurns:l,SegmentCanvas2d:f,destroy:function(){this.emptyChild(),this.images.destroy();for(var e in this._ctxs)this._ctxs[e].destroy&&this._ctxs[e].destroy();this._nodes=null,this._ctxs=null},resize:function(e,t,r){this._w=e,this._h=t;var o=e*r,n=t*r;for(var i in this._nodes){var s=this._nodes[i];s.style.width=e+"px",s.style.height=t+"px","CANVAS"===s.nodeName&&(s.width=o,s.height=n)}this._container.style.width=e+"px",this._container.style.height=t+"px"},getSize:function(){return{width:this._w,height:this._h}},getChannel:function(e){return this._nodes[e]},getChannelContext:function(e){return this._ctxs[e]},switchChannel:function(e){e!==this._c&&(this._c=e,this._setChild(this._nodes[e]))},createDOM:function(){var e=document.createElement("div");this._attachChannel(i.TRANSITION,e,e),i.KENBURNS.forEach(function(e){var t=document.createElement("div"),r=new n(t);r.getViewport=this.getSize.bind(this),this._attachChannel(e,t,r)},this),i.CANVAS2D.forEach(function(e){var t=document.createElement("canvas"),r=t.getContext("2d");this._attachChannel(e,t,r)},this)},emptyChild:function(){return this._setChild()},_attachChannel:function(e,t,r){this._nodes[e]=t,this._ctxs[e]=r},_setChild:function(e){var t=this._container,r=t.children[0];r&&t.removeChild(r),e&&t.appendChild(e)}},t.exports=o},{"../Channels":10,"../SegmentCanvas2d":18,"../SegmentKenBurns":19,"../StoreImages":21,"./SegmentDomTransition":16,"kenburns-dom":50}],18:[function(e,t,r){function o(e,t){i.call(this,e,t),this._needRender=!1}var n=e("object-assign"),i=e("./SegmentTimeline"),s=e("rect-crop");o.prototype=n({},i.prototype,{toString:function(){return"SegmentCanvas2d("+this.channel+")"},ready:function(){return!0},enter:function(e){return this.ctx=e.getChannelContext(this.channel),this._render(),["slide",this.data]},resize:function(){this._needRender=!0},leave:function(){return["slideEnd",this.data]},render:function(){this._needRender&&this._render()},_render:function(){this._needRender=!1;var e=this.ctx,t=e.canvas,r=t.width,o=t.height,n=this.data.canvas2d,i=n.size||[1e3,1e3],a=i[0],l=i[1],f=n.background||"black",u=n.draws||[];e.save(),e.fillStyle=f,e.fillRect(0,0,r,o);var c=s.largest({width:a,height:l},t);e.translate(Math.round(c[0]),Math.round(c[1])),e.scale(c[2]/a,c[3]/l);for(var h=0;h<u.length;++h){var p=u[h];if(p instanceof Array){var d=p.slice(1);e[p[0]].apply(e,d)}else for(var g in p)e[g]=p[g]}e.restore()}}),t.exports=o},{"./SegmentTimeline":20,"object-assign":53,"rect-crop":57}],19:[function(e,t,r){function o(e,t){f.call(this,e,t),this.clamped=!0}var n=e("object-assign"),i=e("rect-clamp"),s=e("rect-crop"),a=e("rect-mix"),l=e("bezier-easing"),f=e("./SegmentTimeline");o.prototype=n({},f.prototype,{toString:function(){return"SegmentKenBurns("+this.channel+")"},ready:function(e){return e.images.has(this.data.image)},enter:function(e){var t=this.data,r=e.images.get(t.image),o=e.getChannelContext(this.channel);this.kenburns=o,this.image=r,this.div=e.getChannel(this.channel),e.getSize&&(this.getSize=e.getSize.bind(e));var n=s.largest,i=s.largest;return t.kenburns&&(t.kenburns.from&&(n=s.apply(null,t.kenburns.from)),t.kenburns.to&&(i=s.apply(null,t.kenburns.to))),this.from=n,this.to=i,this.easing=l.apply(null,t.kenburns&&t.kenburns.easing||[0,0,1,1]),this.viewport=[0,0,r.width,r.height],this.computeBounds(),o.runStart&&o.runStart(r),["slide",t]},resize:function(){this.computeBounds()},leave:function(){var e=this.kenburns;return e.runEnd&&e.runEnd(),["slideEnd",this.data]},render:function(e){var t=this.image,r=this.kenburns,o=a(this.fromCropBound,this.toCropBound,this.easing(e));this.clamped&&(o=i(o,this.viewport)),r.draw(t,o)},cropBound:function(e){var t=this.image,r=e(this.getSize?this.getSize():this.div,t);return this.clamped&&(r=i(r,this.viewport)),r},computeBounds:function(){this.fromCropBound=this.cropBound(this.from),this.toCropBound=this.cropBound(this.to)}}),t.exports=o},{"./SegmentTimeline":20,"bezier-easing":27,"object-assign":53,"rect-clamp":56,"rect-crop":57,"rect-mix":58}],20:[function(e,t,r){function o(e,t){this.channel=e,this.data=t}var n=e("./noop");o.prototype={toString:function(){return"SegmentTimeline("+this.channel+")"},ready:function(){return!0},enter:n,leave:n,render:n,resize:n},t.exports=o},{"./noop":26}],21:[function(e,t,r){function o(e){this.imgs={},this._loading=[],this._threshold=e||3,this._queue=[]}var n=e("object-assign"),i=e("events").EventEmitter;o.prototype=n({},i.prototype,{destroy:function(){this.removeAllListeners(),this.imgs={},this._loading=[],this._queue=[]},has:function(e){return e in this.imgs},get:function(e){return this.imgs[e]},load:function(e){this._loading.length>=this._threshold?this._queue.push(e):this._loadImage(e)},_loadImage:function(e){if(-1===this._loading.indexOf(e)){var t=this,r=new window.Image;r.crossOrigin=!0,this._take(e),r.onload=function(){t._release(e)&&(t.imgs[e]=r,t.emit("load",e,r))},r.onabort=r.onerror=function(r){t._release(e)&&(t.imgs[e]=null,t.emit("error",e,r))},r.src=e}},_take:function(e){this._loading.push(e)},_release:function(e){var t=this._loading.indexOf(e);if(-1===t)return!1;if(this._loading.splice(t,1),this._queue.length>0){var r=this._queue.shift();this._loadImage(r)}return!0}}),t.exports=o},{events:5,"object-assign":53}],22:[function(e,t,r){function o(e,t){this.startT=e,this.endT=t}var n=e("./mix");o.prototype={toString:function(){return"TimeInterval("+this.startT+","+this.endT+")"},clone:function(){return new o(this.startT,this.endT)},add:function(e){this.startT+=e,this.endT+=e},timeInside:function(e){return this.startT<=e&&e<this.endT},interpolate:function(e){return n(this.startT,this.endT,e)}},t.exports=o},{"./mix":25}],23:[function(e,t,r){function o(){this.canvas=document.createElement("canvas"),this.canvas.addEventListener("webglcontextlost",function(e){e.preventDefault(),this.gl=null}.bind(this),!1)}var n=e("webglew");o.prototype={supported:function(){if(this.gl||(this.gl=this.canvas.getContext("webgl")),!this.gl)return!1;var e=n(this.gl);return e.OES_texture_float}},t.exports=o},{webglew:60}],24:[function(e,t,r){t.exports=function(e,t){for(var r=0;r<t.length;++r)if(t[r].name.toLowerCase()===e.toLowerCase())return t[r]}},{}],25:[function(e,t,r){t.exports=function(e,t,r){return Math.max(0,Math.min(1,(r-e)/(t-e)))}},{}],26:[function(e,t,r){t.exports=function(){}},{}],27:[function(e,t,r){!function(e){"object"==typeof r?t.exports=e():"function"==typeof define&&define.amd?define([],e):window.BezierEasing=e()}(function(){function e(e,t){return 1-3*t+3*e}function t(e,t){return 3*t-6*e}function r(e){return 3*e}function o(o,n,i){return((e(n,i)*o+t(n,i))*o+r(n))*o}function n(o,n,i){return 3*e(n,i)*o*o+2*t(n,i)*o+r(n)}function i(e,t,r,n,i){var s,a,l=0;do a=t+(r-t)/2,s=o(a,n,i)-e,s>0?r=a:t=a;while(Math.abs(s)>u&&++l<c);return a}function s(e,t,r,s){function a(t,i){for(var s=0;l>s;++s){var a=n(i,e,r);if(0===a)return i;var f=o(i,e,r)-t;i-=f/a}return i}function u(){for(var t=0;h>t;++t)v[t]=o(t*p,e,r)}function c(t){for(var o=0,s=1,l=h-1;s!=l&&v[s]<=t;++s)o+=p;--s;var u=(t-v[s])/(v[s+1]-v[s]),c=o+u*p,d=n(c,e,r);return d>=f?a(t,c):0===d?c:i(t,o,o+p,e,r)}function g(){_=!0,(e!=t||r!=s)&&u()}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var m=0;4>m;++m)if("number"!=typeof arguments[m]||isNaN(arguments[m])||!isFinite(arguments[m]))throw new Error("BezierEasing arguments should be integers.");if(0>e||e>1||0>r||r>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var v=d?new Float32Array(h):new Array(h),_=!1,y=function(n){return _||g(),e===t&&r===s?n:0===n?0:1===n?1:o(c(n),t,s)};y.getControlPoints=function(){return[{x:e,y:t},{x:r,y:s}]};var x=[e,t,r,s],b="BezierEasing("+x+")";y.toString=function(){return b};var w="cubic-bezier("+x+")";return y.toCSS=function(){return w},y}var a=this,l=4,f=.001,u=1e-7,c=10,h=11,p=1/(h-1),d="Float32Array"in a;return s.css={ease:s(.25,.1,.25,1),linear:s(0,0,1,1),"ease-in":s(.42,0,1,1),"ease-out":s(0,0,.58,1),"ease-in-out":s(.42,0,.58,1)},s})},{}],28:[function(e,t,r){"use strict";function o(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function n(e){return s({args:e.args,pre:o(e.pre),body:o(e.body),post:o(e.proc),funcName:e.funcName})}function i(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var o=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return o(n(e))}var s=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in l){var t=l[e];r[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in f){var t=f[e];r[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var t=u[e];r[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];r[t+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=s({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=s({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=s({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=s({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=s({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=s({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=s({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=s({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":29}],29:[function(e,t,r){"use strict";function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function n(e){var t=new o;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var s=r[n];if("array"===s||"object"==typeof s&&s.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===s)t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if("index"===s){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===s){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof s||!s.offset)throw new Error("cwise: Unknown argument type "+r[n]);t.argTypes[n]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(n)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}var i=e("./lib/thunk.js");t.exports=n},{"./lib/thunk.js":31}],30:[function(e,t,r){"use strict";function o(e,t,r){var o,n,i=e.length,s=t.arrayArgs.length,a=t.indexArgs.length>0,l=[],f=[],u=0,c=0;for(o=0;i>o;++o)f.push(["i",o,"=0"].join(""));for(n=0;s>n;++n)for(o=0;i>o;++o)c=u,u=e[o],f.push(0===o?["d",n,"s",o,"=t",n,"p",u].join(""):["d",n,"s",o,"=(t",n,"p",u,"-s",c,"*t",n,"p",c,")"].join(""));for(l.push("var "+f.join(",")),o=i-1;o>=0;--o)u=e[o],l.push(["for(i",o,"=0;i",o,"<s",u,";++i",o,"){"].join(""));for(l.push(r),o=0;i>o;++o){for(c=u,u=e[o],n=0;s>n;++n)l.push(["p",n,"+=d",n,"s",o].join(""));a&&(o>0&&l.push(["index[",c,"]-=s",c].join("")),l.push(["++index[",u,"]"].join(""))),l.push("}")}return l.join("\n")}function n(e,t,r,n){for(var i=t.length,s=r.arrayArgs.length,a=r.blockSize,l=r.indexArgs.length>0,f=[],u=0;s>u;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=e;i>u;++u)f.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",a,"){"].join("")),f.push(["s",t[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",t[u],"=",a].join("")),f.push(["j",u,"-=",a,"}"].join("")),l&&f.push(["index[",t[u],"]=j",u].join(""));for(var u=0;s>u;++u){for(var c=["offset"+u],h=e;i>h;++h)c.push(["j",h,"*t",u,"p",t[h]].join(""));f.push(["p",u,"=(",c.join("+"),")"].join(""))}f.push(o(t,r,n));for(var u=e;i>u;++u)f.push("}");return f.join("\n")}function i(e){for(var t=0,r=e[0].length;r>t;){for(var o=1;o<e.length;++o)if(e[o][t]!==e[0][t])return t;++t}return t}function s(e,t,r){for(var o=e.body,n=[],i=[],s=0;s<e.args.length;++s){var a=e.args[s];if(!(a.count<=0)){var l=new RegExp(a.name,"g"),f="",u=t.arrayArgs.indexOf(s);switch(t.argTypes[s]){case"offset":var c=t.offsetArgIndex.indexOf(s),h=t.offsetArgs[c];u=h.array,f="+q"+c;case"array":f="p"+u+f;var p="l"+s,d="a"+u;if(0===t.arrayBlockIndices[u])1===a.count?"generic"===r[u]?a.lvalue?(n.push(["var ",p,"=",d,".get(",f,")"].join("")),o=o.replace(l,p),i.push([d,".set(",f,",",p,")"].join(""))):o=o.replace(l,[d,".get(",f,")"].join("")):o=o.replace(l,[d,"[",f,"]"].join("")):"generic"===r[u]?(n.push(["var ",p,"=",d,".get(",f,")"].join("")),o=o.replace(l,p),a.lvalue&&i.push([d,".set(",f,",",p,")"].join(""))):(n.push(["var ",p,"=",d,"[",f,"]"].join("")),o=o.replace(l,p),a.lvalue&&i.push([d,"[",f,"]=",p].join("")));else{for(var g=[a.name],m=[f],v=0;v<Math.abs(t.arrayBlockIndices[u]);v++)g.push("\\s*\\[([^\\]]+)\\]"),
m.push("$"+(v+1)+"*t"+u+"b"+v);if(l=new RegExp(g.join(""),"g"),f=m.join("+"),"generic"===r[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");o=o.replace(l,[d,"[",f,"]"].join(""))}break;case"scalar":o=o.replace(l,"Y"+t.scalarArgs.indexOf(s));break;case"index":o=o.replace(l,"index");break;case"shape":o=o.replace(l,"shape")}}}return[n.join("\n"),o,i.join("\n")].join("\n").trim()}function a(e){for(var t=new Array(e.length),r=!0,o=0;o<e.length;++o){var n=e[o],i=n.match(/\d+/);i=i?i[0]:"",t[o]=0===n.charAt(0)?"u"+n.charAt(1)+i:n.charAt(0)+i,o>0&&(r=r&&t[o]===t[o-1])}return r?t[0]:t.join("")}function l(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,l=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),c=0;c<e.arrayArgs.length;++c)u[c]=t[2*c],l[c]=t[2*c+1];for(var h=[],p=[],d=[],g=[],m=[],c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(d.push(0),g.push(r),h.push(r),p.push(r+e.arrayBlockIndices[c])):(d.push(e.arrayBlockIndices[c]),g.push(e.arrayBlockIndices[c]+r),h.push(0),p.push(e.arrayBlockIndices[c]));for(var v=[],_=0;_<l[c].length;_++)d[c]<=l[c][_]&&l[c][_]<g[c]&&v.push(l[c][_]-d[c]);m.push(v)}for(var y=["SS"],x=["'use strict'"],b=[],_=0;r>_;++_)b.push(["s",_,"=SS[",_,"]"].join(""));for(var c=0;c<e.arrayArgs.length;++c){y.push("a"+c),y.push("t"+c),y.push("p"+c);for(var _=0;r>_;++_)b.push(["t",c,"p",_,"=t",c,"[",d[c]+_,"]"].join(""));for(var _=0;_<Math.abs(e.arrayBlockIndices[c]);++_)b.push(["t",c,"b",_,"=t",c,"[",h[c]+_,"]"].join(""))}for(var c=0;c<e.scalarArgs.length;++c)y.push("Y"+c);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var w=new Array(r),c=0;r>c;++c)w[c]="0";b.push(["index=[",w.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){for(var T=e.offsetArgs[c],E=[],_=0;_<T.offset.length;++_)0!==T.offset[_]&&E.push(1===T.offset[_]?["t",T.array,"p",_].join(""):[T.offset[_],"*t",T.array,"p",_].join(""));b.push(0===E.length?"q"+c+"=0":["q",c,"=",E.join("+")].join(""))}var C=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));b=b.concat(C),x.push("var "+b.join(","));for(var c=0;c<e.arrayArgs.length;++c)x.push("p"+c+"|=0");e.pre.body.length>3&&x.push(s(e.pre,e,u));var A=s(e.body,e,u),D=i(m);x.push(r>D?n(D,m[0],e,A):o(m[0],e,A)),e.post.body.length>3&&x.push(s(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+x.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",D,a(u)].join(""),I=new Function(["function ",S,"(",y.join(","),"){",x.join("\n"),"} return ",S].join(""));return I()}var f=e("uniq");t.exports=l},{uniq:32}],31:[function(e,t,r){"use strict";function o(e){var t=["'use strict'","var CACHED={}"],r=[],o=e.funcName+"_cwise_thunk";t.push(["return function ",o,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],s=[],a=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[l]),e.arrayBlockIndices[l]<0?","+e.arrayBlockIndices[l]+")":")"].join("")],l=0;l<e.arrayArgs.length;++l){var f=e.arrayArgs[l];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),s.push("t"+f),s.push("r"+f+".join()"),a.push("array"+f+".data"),a.push("array"+f+".stride"),a.push("array"+f+".offset|0")}for(var l=0;l<e.scalarArgs.length;++l)a.push("scalar"+e.scalarArgs[l]);r.push(["type=[",s.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",a.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var u=new Function("compile",t.join("\n"));return u(n.bind(void 0,e))}var n=e("./compile.js");t.exports=o},{"./compile.js":30}],32:[function(e,t,r){"use strict";function o(e,t){for(var r=1,o=e.length,n=e[0],i=e[0],s=1;o>s;++s)if(i=n,n=e[s],t(n,i)){if(s===r){r++;continue}e[r++]=n}return e.length=r,e}function n(e){for(var t=1,r=e.length,o=e[0],n=e[0],i=1;r>i;++i,n=o)if(n=o,o=e[i],o!==n){if(i===t){t++;continue}e[t++]=o}return e.length=t,e}function i(e,t,r){return 0===e.length?e:t?(r||e.sort(t),o(e,t)):(r||e.sort(),n(e))}t.exports=i},{}],33:[function(e,t,r){(function(r){function o(e,t){return e[0]-t[0]}function n(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(o);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function i(e,t){var r=["View",t,"d",e].join("");0>t&&(r="View_Nil"+e);var o="generic"===e;if(-1===t){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",s=new Function(i);return s()}if(0===t){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",s=new Function("TrivialArray",i);return s(c[e][0])}var i=["'use strict'"],a=l(t),f=a.map(function(e){return"i"+e}),u="this.offset+"+a.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=a.map(function(e){return"b"+e}).join(","),p=a.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),4>t?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+f.join(",")+",v){"),i.push(o?"return this.data.set("+u+",v)}":"return this.data["+u+"]=v}"),i.push("proto.get=function "+r+"_get("+f.join(",")+"){"),i.push(o?"return this.data.get("+u+")}":"return this.data["+u+"]}"),i.push("proto.index=function "+r+"_index(",f.join(),"){return "+u+"}"),i.push("proto.hi=function "+r+"_hi("+f.join(",")+"){return new "+r+"(this.data,"+a.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+a.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=a.map(function(e){return"a"+e+"=this.shape["+e+"]"}),g=a.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+g.join(","));for(var m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+f.join(",")+"){var "+a.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+a.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"b"+e}).join(",")+",c)}");for(var v=new Array(t),_=new Array(t),m=0;t>m;++m)v[m]="a[i"+m+"]",_[m]="b[i"+m+"]";i.push("proto.transpose=function "+r+"_transpose("+f+"){"+f.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+_.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var m=0;t>m;++m)i.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(e){return"shape["+e+"]"}).join(",")+","+a.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var s=new Function("CTOR_LIST","ORDER",i.join("\n"));return s(c[e],n)}function s(e){if(u&&r.isBuffer(e))return"buffer";if(f)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function a(e,t,r,o){if(void 0===e){var n=c.array[0];return n([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===r){r=new Array(a);for(var l=a-1,f=1;l>=0;--l)r[l]=f,f*=t[l]}if(void 0===o){o=0;for(var l=0;a>l;++l)r[l]<0&&(o-=(t[l]-1)*r[l])}for(var u=s(e),h=c[u];h.length<=a+1;)h.push(i(u,h.length-1));var n=h[a+1];return n(e,t,r,o)}var l=e("iota-array"),f="undefined"!=typeof Float64Array,u="undefined"!=typeof r,c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=a}).call(this,e("buffer").Buffer)},{buffer:1,"iota-array":34}],34:[function(e,t,r){"use strict";function o(e){for(var t=new Array(e),r=0;e>r;++r)t[r]=r;return t}t.exports=o},{}],35:[function(e,t,r){"use strict";"use restrict";function o(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var n=32;r.INT_BITS=n,r.INT_MAX=2147483647,r.INT_MIN=-1<<n-1,r.sign=function(e){return(e>0)-(0>e)},r.abs=function(e){var t=e>>n-1;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(t>e)},r.max=function(e,t){return e^(e^t)&-(t>e)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},r.countTrailingZeros=o,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var i=new Array(256);!function(e){for(var t=0;256>t;++t){var r=t,o=t,n=7;for(r>>>=1;r;r>>>=1)o<<=1,o|=1&r,--n;e[t]=o<<n&255}}(i),r.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},r.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},r.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},r.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},r.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>o(e)+1}},{}],36:[function(e,t,r){"use strict";function o(e,t,r){var n=0|e[r];if(0>=n)return[];var i,s=new Array(n);if(r===e.length-1)for(i=0;n>i;++i)s[i]=t;else for(i=0;n>i;++i)s[i]=o(e,t,r+1);return s}function n(e,t){var r,o;for(r=new Array(e),o=0;e>o;++o)r[o]=t;return r}function i(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return n(0|e,t);break;case"object":if("number"==typeof e.length)return o(e,t,0)}return[]}t.exports=i},{}],37:[function(e,t,r){(function(t,o){"use strict";function n(e){if(e){var t=e.length||e.byteLength,r=_.log2(t);w[r].push(e)}}function i(e){n(e.buffer)}function s(e){var e=_.nextPow2(e),t=_.log2(e),r=w[t];return r.length>0?r.pop():new ArrayBuffer(e)}function a(e){return new Uint8Array(s(e),0,e)}function l(e){return new Uint16Array(s(2*e),0,e)}function f(e){return new Uint32Array(s(4*e),0,e)}function u(e){return new Int8Array(s(e),0,e)}function c(e){return new Int16Array(s(2*e),0,e)}function h(e){return new Int32Array(s(4*e),0,e)}function p(e){return new Float32Array(s(4*e),0,e)}function d(e){return new Float64Array(s(8*e),0,e)}function g(e){return x?new Uint8ClampedArray(s(e),0,e):a(e)}function m(e){return new DataView(s(e),0,e)}function v(e){e=_.nextPow2(e);var t=_.log2(e),r=T[t];return r.length>0?r.pop():new o(e)}var _=e("bit-twiddle"),y=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var x="undefined"!=typeof Uint8ClampedArray,b=t.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=y([32,0])),b.BUFFER||(b.BUFFER=y([32,0]));var w=b.DATA,T=b.BUFFER;r.free=function(e){if(o.isBuffer(e))T[_.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|_.log2(t);w[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=i,r.freeArrayBuffer=n,r.freeBuffer=function(e){T[_.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return s(e);switch(t){case"uint8":return a(e);case"uint16":return l(e);case"uint32":return f(e);case"int8":return u(e);case"int16":return c(e);case"int32":return h(e);case"float":case"float32":return p(e);case"double":case"float64":return d(e);case"uint8_clamped":return g(e);case"buffer":return v(e);case"data":case"dataview":return m(e);default:return null}return null},r.mallocArrayBuffer=s,r.mallocUint8=a,r.mallocUint16=l,r.mallocUint32=f,r.mallocInt8=u,r.mallocInt16=c,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=g,r.mallocDataView=m,r.mallocBuffer=v,r.clearCache=function(){for(var e=0;32>e;++e)b.UINT8[e].length=0,b.UINT16[e].length=0,b.UINT32[e].length=0,b.INT8[e].length=0,b.INT16[e].length=0,b.INT32[e].length=0,b.FLOAT[e].length=0,b.DOUBLE[e].length=0,b.UINT8C[e].length=0,w[e].length=0,T[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":35,buffer:1,dup:36}],38:[function(e,t,r){"use strict";function o(e){v=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],_=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],y=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function n(e,t,r){var o=e.gl,n=o.getParameter(o.MAX_TEXTURE_SIZE);if(0>t||t>n||0>r||r>n)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),o.texImage2D(o.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function i(e,t,r,o,n,i){this.gl=e,this.handle=t,this.format=n,this.type=i,this._shape=[r,o],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var s=this,a=[this._wrapS,this._wrapT];Object.defineProperties(a,[{get:function(){return s._wrapS},set:function(e){return s.wrapS=e}},{get:function(){return s._wrapT},set:function(e){return s.wrapT=e}}]),this._wrapVector=a;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return s._shape[0]},set:function(e){return s.width=e}},{get:function(){return s._shape[1]},set:function(e){return s.height=e}}]),this._shapeVector=l}function s(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function a(e,t,r,o,n,i,a,l){var f=l.dtype,u=l.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,h=0,m=s(u,l.stride.slice());"float32"===f?c=e.FLOAT:"float64"===f?(c=e.FLOAT,m=!1,f="float32"):"uint8"===f?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,m=!1,f="uint8");var v=1;if(2===u.length)h=e.LUMINANCE,u=[u[0],u[1],1],l=p(l.data,u,[l.stride[0],l.stride[1],1],l.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])h=e.ALPHA;else if(2===u[2])h=e.LUMINANCE_ALPHA;else if(3===u[2])h=e.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}v=u[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||n!==e.LUMINANCE&&n!==e.ALPHA||(h=n),h!==n)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var _=l.size,y=a.indexOf(o)<0;if(y&&a.push(o),c===i&&m)0===l.offset&&l.data.length===_?y?e.texImage2D(e.TEXTURE_2D,o,n,u[0],u[1],0,n,i,l.data):e.texSubImage2D(e.TEXTURE_2D,o,t,r,u[0],u[1],n,i,l.data):y?e.texImage2D(e.TEXTURE_2D,o,n,u[0],u[1],0,n,i,l.data.subarray(l.offset,l.offset+_)):e.texSubImage2D(e.TEXTURE_2D,o,t,r,u[0],u[1],n,i,l.data.subarray(l.offset,l.offset+_));else{var b;b=i===e.FLOAT?g.mallocFloat32(_):g.mallocUint8(_);var w=p(b,u,[u[2],u[2]*u[0],1]);c===e.FLOAT&&i===e.UNSIGNED_BYTE?x(w,l):d.assign(w,l),y?e.texImage2D(e.TEXTURE_2D,o,n,u[0],u[1],0,n,i,b.subarray(0,_)):e.texSubImage2D(e.TEXTURE_2D,o,t,r,u[0],u[1],n,i,b.subarray(0,_)),i===e.FLOAT?g.freeFloat32(b):g.freeUint8(b)}}function l(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function f(e,t,r,o,n){var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(0>t||t>s||0>r||r>s)throw new Error("gl-texture2d: Invalid texture shape");if(n===e.FLOAT&&!m(e).texture_float)throw new Error("gl-texture2d: Floating point textures not supported on this platform");var a=l(e);return e.texImage2D(e.TEXTURE_2D,0,o,t,r,0,o,n,null),new i(e,a,t,r,o,n)}function u(e,t,r,o){var n=l(e);return e.texImage2D(e.TEXTURE_2D,0,r,r,o,t),new i(e,n,0|t.width,0|t.height,r,o)}function c(e,t){var r=t.dtype,o=t.shape.slice(),n=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>n||o[1]<0||o[1]>n)throw new Error("gl-texture2d: Invalid texture size");var a=s(o,t.stride.slice()),f=0;"float32"===r?f=e.FLOAT:"float64"===r?(f=e.FLOAT,a=!1,r="float32"):"uint8"===r?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,a=!1,r="uint8");var u=0;if(2===o.length)u=e.LUMINANCE,o=[o[0],o[1],1],t=p(t.data,o,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])u=e.ALPHA;else if(2===o[2])u=e.LUMINANCE_ALPHA;else if(3===o[2])u=e.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");u=e.RGBA}}f!==e.FLOAT||m(e).texture_float||(f=e.UNSIGNED_BYTE,a=!1);var c,h,v=t.size;if(a)c=0===t.offset&&t.data.length===v?t.data:t.data.subarray(t.offset,t.offset+v);else{var _=[o[2],o[2]*o[0],1];h=g.malloc(v,r);var y=p(h,o,_,0);"float32"!==r&&"float64"!==r||f!==e.UNSIGNED_BYTE?d.assign(y,t):x(y,t),c=h.subarray(0,v)}var b=l(e);return e.texImage2D(e.TEXTURE_2D,0,u,o[0],o[1],0,u,f,c),a||g.free(h),new i(e,b,o[0],o[1],u,f)}function h(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(v||o(e),"number"==typeof arguments[1])return f(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return f(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData)return u(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return c(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var p=e("ndarray"),d=e("ndarray-ops"),g=e("typedarray-pool"),m=e("webglew");t.exports=h;var v=null,_=null,y=null,x=function(e,t){d.muls(e,t,255)},b=i.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&v.indexOf(e)>=0&&(m(t).texture_float_linear||(e=t.NEAREST)),_.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&v.indexOf(e)>=0&&(m(t).texture_float_linear||(e=t.NEAREST)),_.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=m(this.gl).EXT_texture_filter_anisotropic;r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),y.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;2>t;++t)if(y.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return n(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e=0|e,n(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e=0|e,n(this,this._shape[0],e),e}}}),b.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},b.dispose=function(){this.gl.deleteTexture(this.handle)},b.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},b.setPixels=function(e,t,r,o){var n=this.gl;if(this.bind(),Array.isArray(t)?(o=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),o=o||0,e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var i=this._mipLevels.indexOf(o)<0;i?(n.texImage2D(n.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(o)):n.texSubImage2D(n.TEXTURE_2D,o,t,r,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>o||r+e.shape[0]>this._shape[0]>>>o||0>t||0>r)throw new Error("gl-texture2d: Texture dimensions are out of bounds");a(n,t,r,o,this.format,this.type,this._mipLevels,e)}}},{ndarray:33,"ndarray-ops":28,"typedarray-pool":37,webglew:60}],39:[function(e,t,r){t.exports={glsl:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 resolution;uniform sampler2D from, to;uniform float progress;void main() {vec2 p = gl_FragCoord.xy / resolution;gl_FragColor = mix(texture2D(from, p), texture2D(to, p), progress);}",uniforms:{},id:"7e61b1f44a391f0c0894",name:"fade",owner:"glslioadmin",html_url:"https://gist.github.com/glslioadmin/7e61b1f44a391f0c0894",created_at:"2014-05-16T00:00:00Z",updated_at:"2014-05-16T00:00:00Z",stars:0}},{}],40:[function(e,t,r){function o(e,t){return this instanceof o?(this.gl=e,this.shader=n(e,i,t),void(this.buffer=e.createBuffer())):new o(e,t)}var n=e("gl-shader"),i="attribute vec2 position; void main() { gl_Position = vec4(2.0*position-1.0, 0.0, 1.0);}";t.exports=o,o.prototype={dispose:function(){this.shader.dispose(),this.gl.deleteBuffer(this.buffer),this.shader=null,this.buffer=null},render:function(e,t,r,o){var n=this.gl,i=this.shader,s=0;i.bind(),this._checkViewport(),i.uniforms.progress=e,i.uniforms.from=t.bind(s++),i.uniforms.to=r.bind(s++);for(var a in o){var l=o[a];l&&l.bind?i.uniforms[a]=l.bind(s++):i.uniforms[a]!==l&&(i.uniforms[a]=l)}n.drawArrays(n.TRIANGLES,0,6)},_checkViewport:function(){var e=this.gl,t=e.canvas,r=t.width,o=t.height;(this._w!==r||this._h!==o)&&(this._syncViewport(r,o),this._w=r,this._h=o)},_syncViewport:function(e,t){var r=this.gl,o=this.shader,n=this.buffer,i=0,s=e,a=0,l=t;o.uniforms.resolution=new Float32Array([e,t]),r.bindBuffer(r.ARRAY_BUFFER,n),o.attributes.position.pointer(),r.bufferData(r.ARRAY_BUFFER,new Float32Array([i,a,s,a,i,l,i,l,s,a,s,l]),r.STATIC_DRAW),r.viewport(i,a,s,l)}}},{"gl-shader":41}],41:[function(e,t,r){"use strict";function o(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function n(e,t){return e.name<t.name?-1:1}function i(e,t,r,n,i){var s=new o(e);return s.update(t,r,n,i),s}var s=e("./lib/create-uniforms"),a=e("./lib/create-attributes"),l=e("./lib/reflect"),f=e("./lib/shader-cache"),u=e("./lib/runtime-reflect"),c=o.prototype;c.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},c.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(e,t,r,o){function i(){h.program=f.program(p,h._vref,h._fref,y,x);for(var e=0;e<r.length;++e)D[e]=p.getUniformLocation(h.program,r[e].name)}if(!t||1===arguments.length){var c=e;e=c.vertex,t=c.fragment,r=c.uniforms,o=c.attributes}var h=this,p=h.gl,d=h._vref;h._vref=f.shader(p,p.VERTEX_SHADER,e),d&&d.dispose(),h.vertShader=h._vref.shader;var g=this._fref;if(h._fref=f.shader(p,p.FRAGMENT_SHADER,t),g&&g.dispose(),h.fragShader=h._fref.shader,!r||!o){var m=p.createProgram();if(p.attachShader(m,h.fragShader),p.attachShader(m,h.vertShader),p.linkProgram(m),!p.getProgramParameter(m,p.LINK_STATUS)){var v=p.getProgramInfoLog(m);throw console.error("gl-shader: Error linking program:",v),new Error("gl-shader: Error linking program:"+v)}r=r||u.uniforms(p,m),o=o||u.attributes(p,m),p.deleteProgram(m)}o=o.slice(),o.sort(n);for(var _=[],y=[],x=[],b=0;b<o.length;++b){var w=o[b];if(w.type.indexOf("mat")>=0){for(var T=0|w.type.charAt(w.type.length-1),E=new Array(T),C=0;T>C;++C)E[C]=x.length,y.push(w.name+"["+C+"]"),x.push("number"==typeof w.location?w.location+C:Array.isArray(w.location)&&w.location.length===T&&"number"==typeof w.location[C]?0|w.location[C]:-1);_.push({name:w.name,type:w.type,locations:E})}else _.push({name:w.name,type:w.type,locations:[x.length]}),y.push(w.name),x.push("number"==typeof w.location?0|w.location:-1)}for(var A=0,b=0;b<x.length;++b)if(x[b]<0){for(;x.indexOf(A)>=0;)A+=1;x[b]=A}var D=new Array(r.length);i(),h._relink=i,h.types={uniforms:l(r),attributes:l(o)},h.attributes=a(p,h,_,x),Object.defineProperty(h,"uniforms",s(p,h,r,D))},t.exports=i},{"./lib/create-attributes":42,"./lib/create-uniforms":43,"./lib/reflect":44,"./lib/runtime-reflect":45,"./lib/shader-cache":46}],42:[function(e,t,r){"use strict";function o(e,t,r,o,n,i){this._gl=e,this._wrapper=t,this._index=r,this._locations=o,this._dimension=n,this._constFunc=i}function n(e,t,r,n,i,s,a){for(var l=["gl","v"],f=[],u=0;i>u;++u)l.push("x"+u),f.push("x"+u);l.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var c=Function.apply(null,l),h=new o(e,t,r,n,i,c);Object.defineProperty(s,a,{set:function(t){return e.disableVertexAttribArray(n[r]),c(e,n[r],t),t},get:function(){return h},enumerable:!0})}function i(e,t,r,o,i,s,a){for(var l=new Array(i),f=new Array(i),u=0;i>u;++u)n(e,t,r[u],o,i,l,u),f[u]=l[u];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray)for(var t=0;i>t;++t)f[t].location=e[t];else for(var t=0;i>t;++t)result[t]=f[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;i>t;++t)e[t]=o[r[t]];return e},enumerable:!0}),l.pointer=function(t,n,s,a){t=t||e.FLOAT,n=!!n,s=s||i*i,a=a||0;for(var l=0;i>l;++l){var f=o[r[l]];e.vertexAttribPointer(f,i,t,n,s,a+l*i),e.enableVertexAttribArray(f)}};var c=new Array(i),h=e["vertexAttrib"+i+"fv"];Object.defineProperty(s,a,{set:function(t){for(var n=0;i>n;++n){var s=o[r[n]];if(e.disableVertexAttribArray(s),Array.isArray(t[0]))h.call(e,s,t[n]);else{for(var a=0;i>a;++a)c[a]=t[i*n+a];h.call(e,s,c)}}return t},get:function(){return l},enumerable:!0})}function s(e,t,r,o){for(var s={},a=0,l=r.length;l>a;++a){var f=r[a],u=f.name,c=f.type,h=f.locations;switch(c){case"bool":case"int":case"float":n(e,t,h[0],o,1,s,u);break;default:if(c.indexOf("vec")>=0){var p=c.charCodeAt(c.length-1)-48;if(2>p||p>4)throw new Error("gl-shader: Invalid data type for attribute "+u+": "+c);n(e,t,h[0],o,p,s,u)}else{if(!(c.indexOf("mat")>=0))throw new Error("gl-shader: Unknown data type for attribute "+u+": "+c);var p=c.charCodeAt(c.length-1)-48;if(2>p||p>4)throw new Error("gl-shader: Invalid data type for attribute "+u+": "+c);i(e,t,h,o,p,s,u)}}}return s}t.exports=s;var a=o.prototype;a.pointer=function(e,t,r,o){var n=this,i=n._gl,s=n._locations[n._index];i.vertexAttribPointer(s,n._dimension,e||i.FLOAT,!!t,r||0,o||0),i.enableVertexAttribArray(s)},a.set=function(e,t,r,o){return this._constFunc(this._locations[this._index],e,t,r,o)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{}],43:[function(e,t,r){"use strict";function o(e){var t=new Function("y","return function(){return y}");

return t(e)}function n(e,t){for(var r=new Array(e),o=0;e>o;++o)r[o]=t;return r}function i(e,t,r,i){function a(r){var o=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}");return o(e,t,i)}function l(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var o=r.indexOf("vec");if(!(o>=0&&1>=o&&r.length===4+o)){if(0===r.indexOf("mat")&&4===r.length){var n=r.charCodeAt(r.length-1)-48;if(2>n||n>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+n+"fv(locations["+t+"],false,obj"+e+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}var n=r.charCodeAt(r.length-1)-48;if(2>n||n>4)throw new Error("gl-shader: Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+n+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+n+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}}function f(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var o in t){var n=t[o],i=e;i+=parseInt(o)+""===o?"["+o+"]":"."+o,"object"==typeof n?r.push.apply(r,f(i,n)):r.push([i,n])}return r}function u(t){for(var o=["return function updateProperty(obj){"],n=f("",t),s=0;s<n.length;++s){var a=n[s],u=a[0],c=a[1];i[c]&&o.push(l(u,c,r[c].type))}o.push("return obj}");var h=new Function("gl","locations",o.join("\n"));return h(e,i)}function c(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(t>=0&&1>=t&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid data type");return"b"===e.charAt(0)?n(r,!1):n(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e);return n(r*r,0)}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}}function h(e,t,n){if("object"==typeof n){var s=p(n);Object.defineProperty(e,t,{get:o(s),set:u(n),enumerable:!0,configurable:!1})}else i[n]?Object.defineProperty(e,t,{get:a(n),set:u(n),enumerable:!0,configurable:!1}):e[t]=c(r[n].type)}function p(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)h(t,r,e[r])}else{t={};for(var o in e)h(t,o,e[o])}return t}var d=s(r,!0);return{get:o(p(d)),set:u(d),enumerable:!0,configurable:!0}}var s=e("./reflect");t.exports=i},{"./reflect":44}],44:[function(e,t,r){"use strict";function o(e,t){for(var r={},o=0;o<e.length;++o)for(var n=e[o].name,i=n.split("."),s=r,a=0;a<i.length;++a){var l=i[a].split("[");if(l.length>1){l[0]in s||(s[l[0]]=[]),s=s[l[0]];for(var f=1;f<l.length;++f){var u=parseInt(l[f]);f<l.length-1||a<i.length-1?(u in s||(s[u]=f<l.length-1?[]:{}),s=s[u]):s[u]=t?o:e[o].type}}else a<i.length-1?(l[0]in s||(s[l[0]]={}),s=s[l[0]]):s[l[0]]=t?o:e[o].type}return r}t.exports=o},{}],45:[function(e,t,r){"use strict";function o(e,t){if(!a){var r=Object.keys(s);a={};for(var o=0;o<r.length;++o){var n=r[o];a[e[n]]=s[n]}}return a[t]}function n(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],i=0;r>i;++i){var s=e.getActiveUniform(t,i);s&&n.push({name:s.name,type:o(e,s.type)})}return n}function i(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=[],i=0;r>i;++i){var s=e.getActiveAttrib(t,i);s&&n.push({name:s.name,type:o(e,s.type)})}return n}r.uniforms=n,r.attributes=i;var s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null},{}],46:[function(e,t,r){"use strict";function o(e,t,r,o,n,i,s){this.id=e,this.src=t,this.type=r,this.shader=o,this.count=i,this.programs=[],this.cache=s}function n(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function i(e,t,r){var o=e.createShader(t);if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(o);throw console.error("gl-shader: Error compiling shader:",n),new Error("gl-shader: Error compiling shader:"+n)}return o}function s(e,t,r,o,n){var i=e.createProgram();e.attachShader(i,t),e.attachShader(i,r);for(var s=0;s<o.length;++s)e.bindAttribLocation(i,n[s],o[s]);if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var a=e.getProgramInfoLog(i);throw console.error("gl-shader: Error linking program:",a),new Error("gl-shader: Error linking program:"+a)}return i}function a(e){var t=c.get(e);return t||(t=new n(e),c.set(e,t)),t}function l(e,t,r){return a(e).getShaderReference(t,r)}function f(e,t,r,o,n){return a(e).getProgram(t,r,o,n)}r.shader=l,r.program=f;var u="undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap,c=new u,h=0;o.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,r=this.programs,o=0,n=r.length;n>o;++o){var i=e.programs[r[o]];i&&(delete e.programs[o],t.deleteProgram(i))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var p=n.prototype;p.getShaderReference=function(e,t){var r=this.gl,n=this.shaders[e===r.FRAGMENT_SHADER|0],s=n[t];if(s)s.count+=1;else{var a=i(r,e,t);s=n[t]=new o(h++,t,e,a,[],1,this)}return s},p.getProgram=function(e,t,r,o){var n=[e.id,t.id,r.join(":"),o.join(":")].join("@"),i=this.programs[n];return i||(this.programs[n]=i=s(this.gl,e.shader,t.shader,r,o),e.programs.push(n),t.programs.push(n)),i}},{"weakmap-shim":49}],47:[function(e,t,r){function o(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}var n=e("./hidden-store.js");t.exports=o},{"./hidden-store.js":48}],48:[function(e,t,r){function o(e,t){var r={identity:t},o=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?o.apply(this,arguments):r},writable:!0}),r}t.exports=o},{}],49:[function(e,t,r){function o(){var e=n();return{get:function(t,r){var o=e(t);return o.hasOwnProperty("value")?o.value:r},set:function(t,r){e(t).value=r},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}var n=e("./create-store.js");t.exports=o},{"./create-store.js":47}],50:[function(e,t,r){function o(e){this.elt=e,"absolute"!==e.style.position&&(e.style.position="relative"),e.style.overflow="hidden"}var n=e("vendor-prefix"),i=n("transform"),s=n("transform-origin");o.prototype={clamped:!0,rgb:[0,0,0],getViewport:function(){return this.elt.getBoundingClientRect()},abort:function(){this.reset()},_transformForRect:function(e){var t=this.getViewport(),r=t.width/e[2],o=[-e[0]+"px",-e[1]+"px"];return"scale("+r+") translate("+o+")"},_reset:function(){this.elt.style.backgroundColor="rgb("+this.rgb.map(function(e){return 255*e})+")",this.elt.innerHTML=""},_setImage:function(e){e!==this.image&&(this._reset(),this.elt.appendChild(e),e.style.position="absolute",e.style.top=0,e.style.left=0,e.style[s]="0% 0%",this.image=e)},_positionImage:function(e){this.image.style[i]=this._transformForRect(e)},runStart:function(e){this._setImage(e)},draw:function(e,t){this._positionImage(t)}},t.exports=o},{"vendor-prefix":51}],51:[function(e,t,r){"use strict";function o(e){return e in u?u[e]:u[e]=n(e)}function n(e){var t,r=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),o=l.length;if(void 0!==a[r])return r;for(r=i(e);o--;)if(t=l[o]+r,void 0!==a[t])return t;throw new Error("unable to prefix "+e)}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){var t=o(e),r=/([A-Z])/g;return r.test(t)&&(t=(f.test(t)?"-":"")+t.replace(r,"-$1")),t.toLowerCase()}var a=document.createElement("p").style,l="O ms Moz webkit".split(" "),f=/^(o|ms|moz|webkit)/,u={};t.exports=o,t.exports.dash=s},{}],52:[function(e,t,r){function o(e){this.canvas=e;var t=this.gl=e.getContext("webgl"),r=this.program=t.createProgram(),o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,n),t.compileShader(o),t.attachShader(r,o);var s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,i),t.compileShader(s),t.attachShader(r,s),t.linkProgram(r),t.useProgram(r),this.positionLocation=t.getAttribLocation(r,"p"),this.imgResL=t.getUniformLocation(r,"imgRes"),this.posL=t.getUniformLocation(r,"pos"),this.dimL=t.getUniformLocation(r,"dim"),this.bgL=t.getUniformLocation(r,"bg"),this.buffer=t.createBuffer(),this._lastW=e.width,this._lastH=e.height}var n="uniform vec2 imgRes;uniform vec2 pos;uniform vec2 dim;attribute vec2 p;varying vec2 uv;void main() {uv = pos/imgRes + ((p * vec2(1.,-1.)+1.)/2.) * (dim/imgRes);gl_Position = vec4(p,0.,1.);}",i="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D img;uniform vec3 bg;varying vec2 uv;void main() {if(uv.x<0.||uv.x>1.||uv.y<0.||uv.y>1.)gl_FragColor = vec4(bg, 1.0);else gl_FragColor = texture2D(img, uv);}";o.prototype={clamped:!0,rgb:[0,0,0],runStart:function(e){{var t=this.gl;this.canvas}t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var r=this.positionLocation;t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.uniform2f(this.imgResL,e.width,e.height),t.uniform3fv(this.bgL,this.rgb);var o=this.texture=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)},runEnd:function(){this.gl.deleteTexture(this.texture)},draw:function(e,t){var r=this.gl,o=this.canvas;(this._lastW!==o.width||this._lastH!==o.height)&&(this._lastW=o.width,this._lastH=o.height,r.viewport(0,0,o.width,o.height)),r.uniform2f(this.posL,t[0],t[1]),r.uniform2f(this.dimL,t[2],t[3]),r.drawArrays(r.TRIANGLES,0,6)},destroy:function(){this.gl.deleteBuffer(this.buffer),this.gl.deleteProgram(this.program)},getViewport:function(){return this.canvas}},t.exports=o},{}],53:[function(e,t,r){"use strict";function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var r,n,i=o(e),s=1;s<arguments.length;s++){r=arguments[s],n=Object.keys(Object(r));for(var a=0;a<n.length;a++)i[n[a]]=r[n[a]]}return i}},{}],54:[function(e,t,r){for(var o=e("performance-now"),n="undefined"==typeof window?{}:window,i=["moz","webkit"],s="AnimationFrame",a=n["request"+s],l=n["cancel"+s]||n["cancelRequest"+s],f=!0,u=0;u<i.length&&!a;u++)a=n[i[u]+"Request"+s],l=n[i[u]+"Cancel"+s]||n[i[u]+"CancelRequest"+s];if(!a||!l){f=!1;var c=0,h=0,p=[],d=1e3/60;a=function(e){if(0===p.length){var t=o(),r=Math.max(0,d-(t-c));c=r+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(r){setTimeout(function(){throw r},0)}},Math.round(r))}return p.push({handle:++h,callback:e,cancelled:!1}),h},l=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}t.exports=function(e){return f?a.call(n,function(){try{e.apply(this,arguments)}catch(t){setTimeout(function(){throw t},0)}}):a.call(n,e)},t.exports.cancel=function(){l.apply(n,arguments)}},{"performance-now":55}],55:[function(e,t,r){(function(e){(function(){var r,o,n;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-n)/1e6},o=e.hrtime,r=function(){var e;return e=o(),1e9*e[0]+e[1]},n=r()):Date.now?(t.exports=function(){return Date.now()-n},n=Date.now()):(t.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:6}],56:[function(e,t,r){t.exports=function(e,t){var r=e[2],o=e[3],n=t[2],i=t[3],s=r/o;return r>n&&(r=n,o=~~(r/s)),o>i&&(o=i,r=~~(o*s)),[t[0]+Math.max(0,Math.min(e[0],n-r)),t[1]+Math.max(0,Math.min(e[1],i-o)),r,o]}},{}],57:[function(e,t,r){function o(e,t){return t||(t=[.5,.5]),function(r,o){var n=r.width/r.height,i=o.width/o.height,s=Math.max(n,i),a=[n/s*o.width*e,i/s*o.height*e];return[o.width*t[0]-a[0]/2,o.height*t[1]-a[1]/2,a[0],a[1]]}}o.largest=o(1),t.exports=o},{}],58:[function(e,t,r){function o(e,t,r){return e*(1-r)+t*r}t.exports=function(e,t,r){for(var n=[],i=0;4>i;++i)n[i]=o(e[i],t[i],r);return n}},{}],59:[function(e,t,r){!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function r(e){return!(e.substr(0,p.length)==p&&"___"===e.substr(e.length-3))}function o(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[d];if(t&&t.key===e)return t;if(!h(e))return void 0;t={key:e};try{return c(e,d,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(r){return void 0}}function n(e){return e.prototype=null,Object.freeze(e)}function i(){_||"undefined"==typeof console||(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var s=!1;if("function"==typeof WeakMap){var a=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var l=new a,f=Object.freeze({});if(l.set(f,1),1===l.get(f))return void(t.exports=WeakMap);s=!0}}var u=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),c=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var g=new ArrayBuffer(25),m=new Uint8Array(g);crypto.getRandomValues(m),d=p+"rand:"+Array.prototype.map.call(m,function(e){return(e%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(e){return u(e).filter(r)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(e){return v(e).filter(r)}})}!function(){var e=Object.freeze;c(Object,"freeze",{value:function(t){return o(t),e(t)}});var t=Object.seal;c(Object,"seal",{value:function(e){return o(e),t(e)}});var r=Object.preventExtensions;c(Object,"preventExtensions",{value:function(e){return o(e),r(e)}})}();var _=!1,y=0,x=function(){function e(e,t){var r,n=o(e);return n?f in n?n[f]:t:(r=a.indexOf(e),r>=0?l[r]:t)}function t(e){var t=o(e);return t?f in t:a.indexOf(e)>=0}function r(e,t){var r,n=o(e);return n?n[f]=t:(r=a.indexOf(e),r>=0?l[r]=t:(r=a.length,l[r]=t,a[r]=e)),this}function s(e){var t,r,n=o(e);return n?f in n&&delete n[f]:(t=a.indexOf(e),0>t?!1:(r=a.length-1,a[t]=void 0,l[t]=l[r],a[t]=a[r],a.length=r,l.length=r,!0))}this instanceof x||i();var a=[],l=[],f=y++;return Object.create(x.prototype,{get___:{value:n(e)},has___:{value:n(t)},set___:{value:n(r)},delete___:{value:n(s)}})};x.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof a?!function(){function r(){function t(e,t){return u?f.has(e)?f.get(e):u.get___(e,t):f.get(e,t)}function r(e){return f.has(e)||(u?u.has___(e):!1)}function o(e){var t=!!f["delete"](e);return u?u.delete___(e)||t:t}this instanceof x||i();var l,f=new a,u=void 0,c=!1;return l=s?function(e,t){return f.set(e,t),f.has(e)||(u||(u=new x),u.set(e,t)),this}:function(e,t){if(c)try{f.set(e,t)}catch(r){u||(u=new x),u.set___(e,t)}else f.set(e,t);return this},Object.create(x.prototype,{get___:{value:n(t)},has___:{value:n(r)},set___:{value:n(l)},delete___:{value:n(o)},permitHostObjects___:{value:n(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");c=!0})}})}s&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=x.prototype,t.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=x)}}()},{}],60:[function(e,t,r){"use strict";function o(e){return e.replace(/^[A-Z]+_/,"")}function n(e){var t=s.get(e);if(t)return t;for(var r={},n=e.getSupportedExtensions(),i=0;i<n.length;++i){var a=n[i];if(0!==a.indexOf("MOZ_")){var l=e.getExtension(n[i]);if(l)for(;;){r[a]=l;var f=o(a);if(f===a)break;a=f}}}return s.set(e,r),r}var i="undefined"==typeof WeakMap?e("weak-map"):WeakMap,s=new i;t.exports=n},{"weak-map":59}],61:[function(e,t,r){t.exports=e("./transitions.min.json")},{"./transitions.min.json":62}],62:[function(e,t,r){t.exports=[{id:"1b4862e4e2050a3abebe",name:"glitch displace",owner:"mattdesl",uniforms:{},html_url:"https://gist.github.com/1b4862e4e2050a3abebe",created_at:"2015-01-15T19:48:03Z",updated_at:"2015-04-17T02:57:21Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;highp float random(vec2 co){highp float a=12.9898;highp float b=78.233;highp float c=43758.5453;highp float dt=dot(co.xy,vec2(a,b));highp float sn=mod(dt,3.14);return fract(sin(sn)*c);}float voronoi(in vec2 x){vec2 p=floor(x);vec2 f=fract(x);float res=8.0;for(float j=-1.;j<=1.;j++)for(float i=-1.;i<=1.;i++){vec2 b=vec2(i,j);vec2 r=b-f+random(p+b);float d=dot(r,r);res=min(res,d);}return sqrt(res);}vec2 displace(vec4 tex,vec2 texCoord,float dotDepth,float textureDepth,float strength){float b=voronoi(.003*texCoord+2.0);float g=voronoi(0.2*texCoord);float r=voronoi(texCoord-1.0);vec4 dt=tex*1.0;vec4 dis=dt*dotDepth+1.0-tex*textureDepth;dis.x=dis.x-1.0+textureDepth*dotDepth;dis.y=dis.y-1.0+textureDepth*dotDepth;dis.x*=strength;dis.y*=strength;vec2 res_uv=texCoord;res_uv.x=res_uv.x+dis.x-0.0;res_uv.y=res_uv.y+dis.y;return res_uv;}float ease1(float t){return t==0.0||t==1.0?t:t<0.5?+0.5*pow(2.0,(20.0*t)-10.0):-0.5*pow(2.0,10.0-(t*20.0))+1.0;}float ease2(float t){return t==1.0?t:1.0-pow(2.0,-10.0*t);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 color1=texture2D(from,p);vec4 color2=texture2D(to,p);vec2 disp=displace(color1,p,0.33,0.7,1.0-ease1(progress));vec2 disp2=displace(color2,p,0.33,0.5,ease2(progress));vec4 dColor1=texture2D(to,disp);vec4 dColor2=texture2D(from,disp2);float val=ease1(progress);vec3 gray=vec3(dot(min(dColor2,dColor1).rgb,vec3(0.299,0.587,0.114)));dColor2=vec4(gray,1.0);dColor2*=2.0;color1=mix(color1,dColor2,smoothstep(0.0,0.5,progress));color2=mix(color2,dColor1,smoothstep(1.0,0.5,progress));gl_FragColor=mix(color1,color2,val);}"},{id:"04fd9a7de4012cbb03f6",name:"crosshatch",owner:"pthrasher",uniforms:{},html_url:"https://gist.github.com/04fd9a7de4012cbb03f6",created_at:"2014-12-17T03:04:51Z",updated_at:"2015-04-17T03:00:04Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;const vec2 center=vec2(0.5,0.5);float quadraticInOut(float t){float p=2.0*t*t;return t<0.5?p:-p+(4.0*t)-1.0;}float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;if(progress==0.0){gl_FragColor=texture2D(from,p);}else if(progress==1.0){gl_FragColor=texture2D(to,p);}else{float x=progress;float dist=distance(center,p);float r=x-min(rand(vec2(p.y,0.0)),rand(vec2(0.0,p.x)));float m=dist<=r?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}}"},{id:"8e6226b215548ba12734",name:"undulating burn out",owner:"pthrasher",uniforms:{smoothness:.02},html_url:"https://gist.github.com/8e6226b215548ba12734",created_at:"2014-12-16T23:01:57Z",updated_at:"2015-04-17T02:58:13Z",stars:2,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define 	M_PI   3.14159265358979323846	/* pi */\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float smoothness;const vec2 center=vec2(0.5,0.5);float quadraticInOut(float t){float p=2.0*t*t;return t<0.5?p:-p+(4.0*t)-1.0;}float linearInterp(vec2 range,vec2 domain,float x){return mix(range.x,range.y,smoothstep(domain.x,domain.y,clamp(x,domain.x,domain.y)));}float getGradient(float r,float dist){float grad=smoothstep(-smoothness,0.0,r-dist*(1.0+smoothness));if(r-dist<0.005&&r-dist>-0.005){return -1.0;}else if(r-dist<0.01&&r-dist>-0.005){return -2.0;}return grad;}float round(float a){return floor(a+0.5);}float getWave(vec2 p){vec2 _p=p-center;float rads=atan(_p.y,_p.x);float degs=degrees(rads)+180.0;vec2 range=vec2(0.0,M_PI*30.0);vec2 domain=vec2(0.0,360.0);float ratio=(M_PI*30.0)/360.0;degs=degs*ratio;float x=progress;float magnitude=mix(0.02,0.09,smoothstep(0.0,1.0,x));float offset=mix(40.0,30.0,smoothstep(0.0,1.0,x));float ease_degs=quadraticInOut(sin(degs));float deg_wave_pos=(ease_degs*magnitude)*sin(x*offset);return x+deg_wave_pos;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;if(progress==0.0){gl_FragColor=texture2D(from,p);}else if(progress==1.0){gl_FragColor=texture2D(to,p);}else{float dist=distance(center,p);float m=getGradient(getWave(p),dist);if(m==-2.0){gl_FragColor=mix(texture2D(from,p),vec4(0.0,0.0,0.0,1.0),0.75);}else{gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}}}"},{id:"b3aa4a8b4f88dc228d4a",name:"test",owner:"brandonyoyo",uniforms:{},html_url:"https://gist.github.com/b3aa4a8b4f88dc228d4a",created_at:"2014-10-26T16:46:18Z",updated_at:"2015-04-17T02:58:08Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),progress);}"},{id:"d1f891c5585fc40b55ea",name:"Star Wipe",owner:"MemoryStomp",uniforms:{},html_url:"https://gist.github.com/d1f891c5585fc40b55ea",created_at:"2014-07-01T06:58:45Z",updated_at:"2015-04-17T03:00:05Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec2 circlePoint(float ang){ang+=6.28318*0.15;return vec2(cos(ang),sin(ang));}float cross2d(vec2 a,vec2 b){return (a.x*b.y-a.y*b.x);}float star(vec2 p,float size){if(size<=0.0){return 0.0;}p/=size;vec2 p0=circlePoint(0.0);vec2 p1=circlePoint(6.28318*1.0/5.0);vec2 p2=circlePoint(6.28318*2.0/5.0);vec2 p3=circlePoint(6.28318*3.0/5.0);vec2 p4=circlePoint(6.28318*4.0/5.0);float s0=(cross2d(p1-p0,p-p0));float s1=(cross2d(p2-p1,p-p1));float s2=(cross2d(p3-p2,p-p2));float s3=(cross2d(p4-p3,p-p3));float s4=(cross2d(p0-p4,p-p4));float s5=min(min(min(s0,s1),min(s2,s3)),s4);float s=max(1.0-sign(s0*s1*s2*s3*s4)+sign(s5),0.0);s=sign(2.6-length(p))*s;return max(s,0.0);}void main(){vec2 p=(gl_FragCoord.xy/resolution.xy);vec2 o=p*2.0-1.0;float t=progress*1.4;float c1=star(o,t);float c2=star(o,t-0.1);float border=max(c1-c2,0.0);gl_FragColor=mix(texture2D(from,p),texture2D(to,p),c1)+vec4(border,border,border,0.0);}"},{id:"5a4d1fb6711076d17e2e",name:"morph",owner:"paniq",uniforms:{},html_url:"https://gist.github.com/5a4d1fb6711076d17e2e",created_at:"2014-07-01T04:52:25Z",updated_at:"2015-04-17T02:55:11Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float strength=0.1;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 ca=texture2D(from,p);vec4 cb=texture2D(to,p);vec2 oa=(((ca.rg+ca.b)*0.5)*2.0-1.0);vec2 ob=(((cb.rg+cb.b)*0.5)*2.0-1.0);vec2 oc=mix(oa,ob,0.5)*strength;float w0=progress;float w1=1.0-w0;gl_FragColor=mix(texture2D(from,p+oc*w0),texture2D(to,p-oc*w1),progress);}"},{id:"00973cee8e0353c73305",name:"LumaWipe",owner:"rectalogic",uniforms:{lumaTex:"conical-asym.png",invertLuma:!0,softness:.25},html_url:"https://gist.github.com/00973cee8e0353c73305",created_at:"2014-06-17T02:11:27Z",updated_at:"2015-04-17T02:58:31Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform sampler2D lumaTex;uniform bool invertLuma;uniform float softness;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float luma=texture2D(lumaTex,p).x;if(invertLuma) luma=1.0-luma;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);float time=mix(0.0,1.0+softness,progress);if(luma<=time-softness) gl_FragColor=toColor;else if(luma>=time) gl_FragColor=fromColor;else{float alpha=(time-luma)/softness;gl_FragColor=mix(fromColor,toColor,alpha);}}"},{id:"0141a38779af3a652c22",name:"simple luma",owner:"gre",uniforms:{luma:"spiral-1.png"},html_url:"https://gist.github.com/0141a38779af3a652c22",created_at:"2014-06-13T08:16:10Z",updated_at:"2015-04-17T02:58:48Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform sampler2D luma;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),step(texture2D(luma,p).r,progress));}"},{id:"ee15128c2b87d0e74dee",name:"cube",owner:"gre",uniforms:{persp:.7,unzoom:.3,reflection:.4,floating:3},html_url:"https://gist.github.com/ee15128c2b87d0e74dee",created_at:"2014-06-12T17:13:17Z",updated_at:"2015-04-17T03:00:02Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float persp;uniform float unzoom;uniform float reflection;uniform float floating;vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-floating/100.);}bool inBounds(vec2 p){return all(lessThan(vec2(0.0),p))&&all(lessThan(p,vec2(1.0)));}vec4 bgColor(vec2 p,vec2 pfr,vec2 pto){vec4 c=vec4(0.0,0.0,0.0,1.0);pfr=project(pfr);if(inBounds(pfr)){c+=mix(vec4(0.0),texture2D(from,pfr),reflection*mix(1.0,0.0,pfr.y));}pto=project(pto);if(inBounds(pto)){c+=mix(vec4(0.0),texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}vec2 xskew(vec2 p,float persp,float center){float x=mix(p.x,1.0-p.x,center);return ((vec2(x,(p.y-0.5*(1.0-persp)*x)/(1.0+(persp-1.0)*x))-vec2(0.5-distance(center,0.5),0.0))*vec2(0.5/distance(center,0.5)*(center<0.5?1.0:-1.0),1.0)+vec2(center<0.5?0.0:1.0,0.0));}void main(){vec2 op=gl_FragCoord.xy/resolution.xy;float uz=unzoom*2.0*(0.5-distance(0.5,progress));vec2 p=-uz*0.5+(1.0+uz)*op;vec2 fromP=xskew((p-vec2(progress,0.0))/vec2(1.0-progress,1.0),1.0-mix(progress,0.0,persp),0.0);vec2 toP=xskew(p/vec2(progress,1.0),mix(pow(progress,2.0),1.0,persp),1.0);if(inBounds(fromP)){gl_FragColor=texture2D(from,fromP);}else if(inBounds(toP)){gl_FragColor=texture2D(to,toP);}else{gl_FragColor=bgColor(op,fromP,toP);}}"},{id:"9b99fc01fd5705008a5b",name:"Glitch Memories",owner:"niseh",uniforms:{},html_url:"https://gist.github.com/9b99fc01fd5705008a5b",created_at:"2014-05-29T19:32:52Z",updated_at:"2015-04-17T02:59:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void glitch_memories(sampler2D pic){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 block=floor(gl_FragCoord.xy/vec2(16));vec2 uv_noise=block/vec2(64);uv_noise+=floor(vec2(progress)*vec2(1200.0,3500.0))/vec2(64);float block_thresh=pow(fract(progress*1200.0),2.0)*0.2;float line_thresh=pow(fract(progress*2200.0),3.0)*0.7;vec2 red=p,green=p,blue=p,o=p;vec2 dist=(fract(uv_noise)-0.5)*0.3;red+=dist*0.1;green+=dist*0.2;blue+=dist*0.125;gl_FragColor.r=texture2D(pic,red).r;gl_FragColor.g=texture2D(pic,green).g;gl_FragColor.b=texture2D(pic,blue).b;gl_FragColor.a=1.0;}void main(void){float smoothed=smoothstep(0.,1.,progress);if((smoothed<0.4&&smoothed>0.1)){glitch_memories(from);}else if((smoothed>0.6&&smoothed<0.9)){glitch_memories(to);}else{vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),progress);}}"},{id:"fe67b3b5149738069537",name:"potleaf",owner:"Flexi23",uniforms:{},html_url:"https://gist.github.com/fe67b3b5149738069537",created_at:"2014-05-28T09:58:30Z",updated_at:"2015-04-17T02:58:25Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 uv=gl_FragCoord.xy/resolution.xy;vec2 leaf_uv=(uv-vec2(0.5))/10./pow(progress,3.5);leaf_uv.y+=0.35;float r=0.18;float o=atan(leaf_uv.y,leaf_uv.x);gl_FragColor=mix(texture2D(from,uv),texture2D(to,uv),1.-step(1.-length(leaf_uv)+r*(1.+sin(o))*(1.+0.9*cos(8.*o))*(1.+0.1*cos(24.*o))*(0.9+0.05*cos(200.*o)),1.));}"},{id:"b86b90161503a0023231",name:"CrossZoom",owner:"rectalogic",uniforms:{strength:.4},html_url:"https://gist.github.com/b86b90161503a0023231",created_at:"2014-05-25T01:24:39Z",updated_at:"2015-04-17T02:59:37Z",stars:2,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float strength;const float PI=3.141592653589793;float Linear_ease(in float begin,in float change,in float duration,in float time){return change*time/duration+begin;}float Exponential_easeInOut(in float begin,in float change,in float duration,in float time){if(time==0.0) return begin;else if(time==duration) return begin+change;time=time/(duration/2.0);if(time<1.0) return change/2.0*pow(2.0,10.0*(time-1.0))+begin;return change/2.0*(-pow(2.0,-10.0*(time-1.0))+2.0)+begin;}float Sinusoidal_easeInOut(in float begin,in float change,in float duration,in float time){return -change/2.0*(cos(PI*time/duration)-1.0)+begin;}float random(in vec3 scale,in float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}vec3 crossFade(in vec2 uv,in float dissolve){return mix(texture2D(from,uv).rgb,texture2D(to,uv).rgb,dissolve);}void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;vec2 center=vec2(Linear_ease(0.25,0.5,1.0,progress),0.5);float dissolve=Exponential_easeInOut(0.0,1.0,1.0,progress);float strength=Sinusoidal_easeInOut(0.0,strength,0.5,progress);vec3 color=vec3(0.0);float total=0.0;vec2 toCenter=center-texCoord;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);color+=crossFade(texCoord+toCenter*percent*strength,dissolve)*weight;total+=weight;}gl_FragColor=vec4(color/total,1.0);}"},{id:"ce9279de351984f0ad27",name:"Slide",owner:"rectalogic",uniforms:{translateX:1,translateY:0},html_url:"https://gist.github.com/ce9279de351984f0ad27",created_at:"2014-05-25T01:13:20Z",updated_at:"2015-04-17T02:59:56Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float translateX;uniform float translateY;void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;float x=progress*translateX;float y=progress*translateY;if(x>=0.0&&y>=0.0){if(texCoord.x>=x&&texCoord.y>=y){gl_FragColor=texture2D(from,texCoord-vec2(x,y));}else{vec2 uv;if(x>0.0) uv=vec2(x-1.0,y);else if(y>0.0) uv=vec2(x,y-1.0);gl_FragColor=texture2D(to,texCoord-uv);}}else if(x<=0.0&&y<=0.0){if(texCoord.x<=(1.0+x)&&texCoord.y<=(1.0+y)) gl_FragColor=texture2D(from,texCoord-vec2(x,y));else{vec2 uv;if(x<0.0) uv=vec2(x+1.0,y);else if(y<0.0) uv=vec2(x,y+1.0);gl_FragColor=texture2D(to,texCoord-uv);}}else gl_FragColor=vec4(0.0);}"},{id:"154a99fbe5300fb5c279",name:"pinwheel",owner:"mrspeaker",uniforms:{},html_url:"https://gist.github.com/154a99fbe5300fb5c279",created_at:"2014-05-23T21:56:59Z",updated_at:"2015-04-17T03:00:00Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float circPos=atan(p.y-0.5,p.x-0.5)+progress;float modPos=mod(circPos,3.1415/4.);float signed=sign(progress-modPos);float smoothed=smoothstep(0.,1.,signed);if(smoothed>0.5){gl_FragColor=texture2D(to,p);}else{gl_FragColor=texture2D(from,p);}}"
},{id:"e54a807cdb66c8b16a34",name:"Kaleidoscope",owner:"nwoeanhinnogaehr",uniforms:{speed:1,angle:2,power:2},html_url:"https://gist.github.com/e54a807cdb66c8b16a34",created_at:"2014-05-23T19:02:46Z",updated_at:"2015-04-17T02:55:53Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float speed;uniform float angle;uniform float power;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 q=p;float t=pow(progress,power)*speed;p=p-0.5;for(int i=0;i<7;i++){p=vec2(sin(t)*p.x+cos(t)*p.y,sin(t)*p.y-cos(t)*p.x);t+=angle;p=abs(mod(p,2.0)-1.0);}abs(mod(p,1.0));gl_FragColor=mix(mix(texture2D(from,q),texture2D(to,q),progress),mix(texture2D(from,p),texture2D(to,p),progress),1.0-2.0*abs(progress-0.5));}"},{id:"408045772d255df97520",name:"SimpleFlip",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/408045772d255df97520",created_at:"2014-05-23T18:42:58Z",updated_at:"2015-04-17T02:55:54Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 q=p;p.x=(p.x-0.5)/abs(progress-0.5)*0.5+0.5;vec4 a=texture2D(from,p);vec4 b=texture2D(to,p);gl_FragColor=vec4(mix(a,b,step(0.5,progress)).rgb*step(abs(q.x-0.5),abs(progress-0.5)),1.0);}"},{id:"a070cbd69e2535e757f1",name:"DoomScreenTransition",owner:"zeh",uniforms:{barWidth:10,noise:.2,amplitude:2,frequency:1},html_url:"https://gist.github.com/a070cbd69e2535e757f1",created_at:"2014-05-23T18:00:18Z",updated_at:"2015-04-17T02:51:48Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform int barWidth;uniform float amplitude;uniform float noise;uniform float frequency;float rand(int num){return fract(mod(float(num)*67123.313,12.0)*sin(float(num)*10.3)*cos(float(num)));}float wave(int num){float fn=float(num)*frequency*0.1*float(barWidth);return cos(fn*0.5)*cos(fn*0.13)*sin((fn+10.0)*0.3)/2.0+0.5;}float pos(int num){return noise==0.0?wave(num):mix(wave(num),rand(num),noise);}void main(){int bar=int(gl_FragCoord.x)/barWidth;float scale=1.0+pos(bar)*amplitude;float phase=progress*scale;float posY=gl_FragCoord.y/resolution.y;vec2 p;vec4 c;if(phase+posY<1.0){p=vec2(gl_FragCoord.x,gl_FragCoord.y+mix(0.0,resolution.y,phase))/resolution.xy;c=texture2D(from,p);}else{p=gl_FragCoord.xy/resolution.xy;c=texture2D(to,p);}gl_FragColor=c;}"},{id:"a830822b23e846e25d2d",name:"DreamyZoom",owner:"zeh",uniforms:{rotation:6,scale:1.2},html_url:"https://gist.github.com/a830822b23e846e25d2d",created_at:"2014-05-23T15:27:25Z",updated_at:"2015-04-17T02:54:39Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define DEG2RAD 0.03926990816987241548078304229099 // 1/180*PI\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float rotation;uniform float scale;void main(){float phase=progress<0.5?progress*2.0:(progress-0.5)*2.0;float angleOffset=progress<0.5?mix(0.0,rotation*DEG2RAD,phase):mix(-rotation*DEG2RAD,0.0,phase);float newScale=progress<0.5?mix(1.0,scale,phase):mix(scale,1.0,phase);vec2 center=vec2(0,0);float maxRes=max(resolution.x,resolution.y);float resX=resolution.x/maxRes*0.5;float resY=resolution.y/maxRes*0.5;vec2 p=(gl_FragCoord.xy/maxRes-vec2(resX,resY))/newScale;float angle=atan(p.y,p.x)+angleOffset;float dist=distance(center,p);p.x=cos(angle)*dist+resX;p.y=sin(angle)*dist+resY;vec4 c=progress<0.5?texture2D(from,p):texture2D(to,p);gl_FragColor=c+(progress<0.5?mix(0.0,1.0,phase):mix(1.0,0.0,phase));}"},{id:"b6720916aa3f035949bc",name:"squareswipe",owner:"gre",uniforms:{squares:[10,10],direction:[1,-.5],smoothness:1.6},html_url:"https://gist.github.com/b6720916aa3f035949bc",created_at:"2014-05-23T12:09:38Z",updated_at:"2015-04-17T02:56:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform ivec2 squares;uniform vec2 direction;uniform float smoothness;const vec2 center=vec2(0.5,0.5);void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 v=normalize(direction);if(v!=vec2(0.0)) v/=abs(v.x)+abs(v.y);float d=v.x*center.x+v.y*center.y;float offset=smoothness;float pr=smoothstep(-offset,0.0,v.x*p.x+v.y*p.y-(d-0.5+progress*(1.+offset)));vec2 squarep=fract(p*vec2(squares));vec2 squaremin=vec2(pr/2.0);vec2 squaremax=vec2(1.0-pr/2.0);float a=all(lessThan(squaremin,squarep))&&all(lessThan(squarep,squaremax))?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),a);}"},{id:"169781bb76f310e2bfde",name:"TilesWaveBottomLeftToTopRight",owner:"numb3r23",uniforms:{},html_url:"https://gist.github.com/169781bb76f310e2bfde",created_at:"2014-05-21T22:50:48Z",updated_at:"2015-04-17T02:52:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const vec2 tileSize=vec2(64,64);const float checkerDistance=0.015;const bool flipX=true;const bool flipY=false;const bool preTileSingleColor=false;const bool postTileSingleColor=false;vec2 tile2Global(vec2 tex,vec2 tileNum,bool tileSingleColor){vec2 perTile=tileSize/resolution.xy;return tileNum*perTile+(tileSingleColor?vec2(0):tex*perTile);}void main(void){vec2 uv=gl_FragCoord.xy/resolution.xy;vec4 fragColor=vec4(1,1,0,1);vec2 posInTile=mod(vec2(gl_FragCoord),tileSize);vec2 tileNum=floor(vec2(gl_FragCoord)/tileSize);int num=int(tileNum.x);vec2 totalTiles=ceil(resolution.xy/tileSize);float countTiles=totalTiles.x*totalTiles.y;vec2 perTile=ceil(tileSize/resolution.xy);float offset=0.0;offset=(tileNum.y+tileNum.x*perTile.y)/(sqrt(countTiles)*2.0);float timeOffset=(progress-offset)*countTiles;timeOffset=clamp(timeOffset,0.0,0.5);float sinTime=1.0-abs(cos(fract(timeOffset)*3.1415926));fragColor.rg=uv;fragColor.b=sinTime;vec2 texC=posInTile/tileSize;if(sinTime<=0.5){if(flipX){if((texC.x<sinTime)||(texC.x>1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}}if(flipY){if((texC.y<sinTime)||(texC.y>1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}}fragColor=texture2D(from,tile2Global(texC,tileNum,preTileSingleColor));}else{if(flipX){if((texC.x>sinTime)||(texC.x<1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}texC.x=1.0-texC.x;}if(flipY){if((texC.y>sinTime)||(texC.y<1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}texC.y=1.0-texC.y;}fragColor.rgb=texture2D(to,tile2Global(texC,tileNum,postTileSingleColor)).rgb;}gl_FragColor=fragColor;}"},{id:"5ebd3442a208861c7a8a",name:"TilesScanline",owner:"numb3r23",uniforms:{},html_url:"https://gist.github.com/5ebd3442a208861c7a8a",created_at:"2014-05-21T22:49:22Z",updated_at:"2015-04-17T02:57:17Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const vec2 tileSize=vec2(64,64);const float checkerDistance=0.015;const bool flipX=true;const bool flipY=false;const bool preTileSingleColor=false;const bool postTileSingleColor=false;vec2 tile2Global(vec2 tex,vec2 tileNum,bool tileSingleColor){vec2 perTile=tileSize/resolution.xy;return tileNum*perTile+(tileSingleColor?vec2(0):tex*perTile);}void main(void){vec2 uv=gl_FragCoord.xy/resolution.xy;vec4 fragColor=vec4(1,1,0,1);vec2 posInTile=mod(vec2(gl_FragCoord),tileSize);vec2 tileNum=floor(vec2(gl_FragCoord)/tileSize);int num=int(tileNum.x);vec2 totalTiles=ceil(resolution.xy/tileSize);float countTiles=totalTiles.x*totalTiles.y;vec2 perTile=ceil(tileSize/resolution.xy);float offset=0.0;offset=(tileNum.x+tileNum.y*totalTiles.x)/countTiles;float timeOffset=(progress-offset)*countTiles;timeOffset=clamp(timeOffset,0.0,0.5);float sinTime=1.0-abs(cos(fract(timeOffset)*3.1415926));fragColor.rg=uv;fragColor.b=sinTime;vec2 texC=posInTile/tileSize;if(sinTime<=0.5){if(flipX){if((texC.x<sinTime)||(texC.x>1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}}if(flipY){if((texC.y<sinTime)||(texC.y>1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}}fragColor=texture2D(from,tile2Global(texC,tileNum,preTileSingleColor));}else{if(flipX){if((texC.x>sinTime)||(texC.x<1.0-sinTime)){discard;}if(texC.x<0.5){texC.x=(texC.x-sinTime)*0.5/(0.5-sinTime);}else{texC.x=(texC.x-0.5)*0.5/(0.5-sinTime)+0.5;}texC.x=1.0-texC.x;}if(flipY){if((texC.y>sinTime)||(texC.y<1.0-sinTime)){discard;}if(texC.y<0.5){texC.y=(texC.y-sinTime)*0.5/(0.5-sinTime);}else{texC.y=(texC.y-0.5)*0.5/(0.5-sinTime)+0.5;}texC.y=1.0-texC.y;}fragColor.rgb=texture2D(to,tile2Global(texC,tileNum,postTileSingleColor)).rgb;}gl_FragColor=fragColor;}"},{id:"9e86d2712e123542758b",name:"Dreamy",owner:"mikolalysenko",uniforms:{},html_url:"https://gist.github.com/9e86d2712e123542758b",created_at:"2014-05-21T14:55:01Z",updated_at:"2015-04-17T02:56:19Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec2 offset(float progress,float x,float theta){float phase=progress*progress+progress+theta;float shifty=0.03*progress*cos(10.0*(progress+x));return vec2(0,shifty);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p+offset(progress,p.x,0.0)),texture2D(to,p+offset(1.0-progress,p.x,3.14)),progress);}"},{id:"21d2fdd24c706952dc8c",name:"AdvancedMosaic",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/21d2fdd24c706952dc8c",created_at:"2014-05-21T14:45:52Z",updated_at:"2015-04-17T02:58:58Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(void){vec2 p=gl_FragCoord.xy/resolution.xy;float T=progress;float S0=1.0;float S1=50.0;float S2=1.0;float Half=0.5;float PixelSize=(T<Half)?mix(S0,S1,T/Half):mix(S1,S2,(T-Half)/Half);vec2 D=PixelSize/resolution.xy;vec2 UV=(p+vec2(-0.5))/D;vec2 Coord=clamp(D*(ceil(UV+vec2(-0.5)))+vec2(0.5),vec2(0.0),vec2(1.0));vec4 C0=texture2D(from,Coord);vec4 C1=texture2D(to,Coord);gl_FragColor=mix(C0,C1,T);}"},{id:"cacfedb8cca0f5ce3f7c",name:"Swirl",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/cacfedb8cca0f5ce3f7c",created_at:"2014-05-21T14:43:04Z",updated_at:"2015-04-17T02:57:50Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(void){float Radius=1.0;float T=progress;vec2 UV=gl_FragCoord.xy/resolution.xy;UV-=vec2(0.5,0.5);float Dist=length(UV);if(Dist<Radius){float Percent=(Radius-Dist)/Radius;float A=(T<=0.5)?mix(0.0,1.0,T/0.5):mix(1.0,0.0,(T-0.5)/0.5);float Theta=Percent*Percent*A*8.0*3.14159;float S=sin(Theta);float C=cos(Theta);UV=vec2(dot(UV,vec2(C,-S)),dot(UV,vec2(S,C)));}UV+=vec2(0.5,0.5);vec4 C0=texture2D(from,UV);vec4 C1=texture2D(to,UV);gl_FragColor=mix(C0,C1,T);}"},{id:"b9f8e5675c647e615419",name:"DefocusBlur",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/b9f8e5675c647e615419",created_at:"2014-05-21T10:12:14Z",updated_at:"2015-04-17T02:55:46Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform float progress;uniform vec2 resolution;uniform sampler2D from;uniform sampler2D to;void main(void){vec2 p=gl_FragCoord.xy/resolution.xy;float T=progress;float S0=1.0;float S1=50.0;float S2=1.0;float Half=0.5;float PixelSize=(T<Half)?mix(S0,S1,T/Half):mix(S1,S2,(T-Half)/Half);vec2 D=PixelSize/resolution.xy;vec2 UV=(gl_FragCoord.xy/resolution.xy);const int NumTaps=12;vec2 Disk[NumTaps];Disk[0]=vec2(-.326,-.406);Disk[1]=vec2(-.840,-.074);Disk[2]=vec2(-.696,.457);Disk[3]=vec2(-.203,.621);Disk[4]=vec2(.962,-.195);Disk[5]=vec2(.473,-.480);Disk[6]=vec2(.519,.767);Disk[7]=vec2(.185,-.893);Disk[8]=vec2(.507,.064);Disk[9]=vec2(.896,.412);Disk[10]=vec2(-.322,-.933);Disk[11]=vec2(-.792,-.598);vec4 C0=texture2D(from,UV);vec4 C1=texture2D(to,UV);for(int i=0;i!=NumTaps;i++){C0+=texture2D(from,Disk[i]*D+UV);C1+=texture2D(to,Disk[i]*D+UV);}C0/=float(NumTaps+1);C1/=float(NumTaps+1);gl_FragColor=mix(C0,C1,T);}"},{id:"2a5fa2f77c883dd661f9",name:"colourDistance",owner:"P-Seebauer",uniforms:{interpolationPower:5},html_url:"https://gist.github.com/2a5fa2f77c883dd661f9",created_at:"2014-05-21T07:10:21Z",updated_at:"2015-04-17T02:51:29Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float interpolationPower;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fTex=texture2D(from,p);vec4 tTex=texture2D(to,p);gl_FragColor=mix(distance(fTex,tTex)>progress?fTex:tTex,tTex,pow(progress,interpolationPower));}"},{id:"b93818de23d4511fde10",name:"Dissolve",owner:"nwoeanhinnogaehr",uniforms:{blocksize:1},html_url:"https://gist.github.com/b93818de23d4511fde10",created_at:"2014-05-20T23:40:57Z",updated_at:"2015-04-17T03:00:06Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float blocksize;float rand(vec2 co){return fract(sin(dot(co,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),step(rand(floor(gl_FragCoord.xy/blocksize)),progress));}"},{id:"b185145363d65751009b",name:"HSVfade",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/b185145363d65751009b",created_at:"2014-05-20T23:21:27Z",updated_at:"2015-04-17T02:58:24Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;vec3 hsv2rgb(vec3 c){const vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb2hsv(vec3 c){const vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);return vec3(abs(q.z+(q.w-q.y)/(6.0*d+0.001)),d/(q.x+0.001),q.x);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec3 a=rgb2hsv(texture2D(from,p).rgb);vec3 b=rgb2hsv(texture2D(to,p).rgb);vec3 m=mix(a,b,progress);gl_FragColor=vec4(hsv2rgb(m),1.0);}"},{id:"f6fc39f4cfcbb97f96a6",name:"Fold",owner:"nwoeanhinnogaehr",uniforms:{},html_url:"https://gist.github.com/f6fc39f4cfcbb97f96a6",created_at:"2014-05-20T23:14:23Z",updated_at:"2015-04-17T02:57:16Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 a=texture2D(from,(p-vec2(progress,0.0))/vec2(1.0-progress,1.0));vec4 b=texture2D(to,p/vec2(progress,1.0));gl_FragColor=mix(a,b,step(p.x,progress));}"},{id:"80c2d40cac3f98453176",name:"linearblur",owner:"gre",uniforms:{intensity:.1},html_url:"https://gist.github.com/80c2d40cac3f98453176",created_at:"2014-05-20T22:02:35Z",updated_at:"2015-04-17T02:56:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float intensity;const int PASSES=8;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 c1=vec4(0.0),c2=vec4(0.0);float disp=intensity*(0.5-distance(0.5,progress));for(int xi=0;xi<PASSES;++xi){float x=float(xi)/float(PASSES)-0.5;for(int yi=0;yi<PASSES;++yi){float y=float(yi)/float(PASSES)-0.5;vec2 v=vec2(x,y);float d=disp;c1+=texture2D(from,p+d*v);c2+=texture2D(to,p+d*v);}}c1/=float(PASSES*PASSES);c2/=float(PASSES*PASSES);gl_FragColor=mix(c1,c2,progress);}"},{id:"c528607361d90a072e98",name:"pixelize",owner:"benraziel",uniforms:{},html_url:"https://gist.github.com/c528607361d90a072e98",created_at:"2014-05-20T19:32:42Z",updated_at:"2015-04-17T02:56:48Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){float revProgress=(1.0-progress);float distFromEdges=min(progress,revProgress);float squareSize=(50.0*distFromEdges)+1.0;vec2 p=(floor((gl_FragCoord.xy+squareSize*0.5)/squareSize)*squareSize)/resolution.xy;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);gl_FragColor=mix(fromColor,toColor,progress);}"},{id:"abd06f4d23ab2ff4ed7a",name:"random_squares",owner:"benraziel",uniforms:{},html_url:"https://gist.github.com/abd06f4d23ab2ff4ed7a",created_at:"2014-05-20T19:07:25Z",updated_at:"2015-04-17T02:52:17Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){float revProgress=(1.0-progress);float distFromEdges=min(progress,revProgress);vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fromColor=texture2D(from,p);vec4 toColor=texture2D(to,p);float squareSize=20.0;float flickerSpeed=60.0;vec2 seed=floor(gl_FragCoord.xy/squareSize)*floor(distFromEdges*flickerSpeed);gl_FragColor=mix(fromColor,toColor,progress)+rand(seed)*distFromEdges*0.5;}"},{id:"791d0f058ae6a83e0c15",name:"PolkaDotsCurtain",owner:"bobylito",uniforms:{center:[1,1],dots:20},html_url:"https://gist.github.com/791d0f058ae6a83e0c15",created_at:"2014-05-20T16:55:46Z",updated_at:"2015-04-17T02:59:23Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float SQRT_2=1.414213562373;uniform float dots;uniform vec2 center;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=progress/2.0;bool nextImage=distance(fract(p*dots),vec2(0.5,0.5))<(2.0*x/distance(p,center));if(nextImage) gl_FragColor=texture2D(to,p);else gl_FragColor=texture2D(from,p);}"},{id:"166e496a19a4fdbf1aae",name:"PageCurl",owner:"corporateshark",uniforms:{},html_url:"https://gist.github.com/166e496a19a4fdbf1aae",created_at:"2014-05-20T12:37:15Z",updated_at:"2015-04-17T02:56:42Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;const float MIN_AMOUNT=-0.16;const float MAX_AMOUNT=1.3;float amount=progress*(MAX_AMOUNT-MIN_AMOUNT)+MIN_AMOUNT;const float PI=3.141592653589793;const float scale=512.0;const float sharpness=3.0;float cylinderCenter=amount;float cylinderAngle=2.0*PI*amount;const float cylinderRadius=1.0/PI/2.0;vec3 hitPoint(float hitAngle,float yc,vec3 point,mat3 rrotation){float hitPoint=hitAngle/(2.0*PI);point.y=hitPoint;return rrotation*point;}vec4 antiAlias(vec4 color1,vec4 color2,float distanc){distanc*=scale;if(distanc<0.0) return color2;if(distanc>2.0) return color1;float dd=pow(1.0-distanc/2.0,sharpness);return ((color2-color1)*dd)+color1;}float distanceToEdge(vec3 point){float dx=abs(point.x>0.5?1.0-point.x:point.x);float dy=abs(point.y>0.5?1.0-point.y:point.y);if(point.x<0.0) dx=-point.x;if(point.x>1.0) dx=point.x-1.0;if(point.y<0.0) dy=-point.y;if(point.y>1.0) dy=point.y-1.0;if((point.x<0.0||point.x>1.0)&&(point.y<0.0||point.y>1.0)) return sqrt(dx*dx+dy*dy);return min(dx,dy);}vec4 seeThrough(float yc,vec2 p,mat3 rotation,mat3 rrotation){float hitAngle=PI-(acos(yc/cylinderRadius)-cylinderAngle);vec3 point=hitPoint(hitAngle,yc,rotation*vec3(p,1.0),rrotation);if(yc<=0.0&&(point.x<0.0||point.y<0.0||point.x>1.0||point.y>1.0)){vec2 texCoord=gl_FragCoord.xy/resolution.xy;return texture2D(to,texCoord);}if(yc>0.0) return texture2D(from,p);vec4 color=texture2D(from,point.xy);vec4 tcolor=vec4(0.0);return antiAlias(color,tcolor,distanceToEdge(point));}vec4 seeThroughWithShadow(float yc,vec2 p,vec3 point,mat3 rotation,mat3 rrotation){float shadow=distanceToEdge(point)*30.0;shadow=(1.0-shadow)/3.0;if(shadow<0.0) shadow=0.0;else shadow*=amount;vec4 shadowColor=seeThrough(yc,p,rotation,rrotation);shadowColor.r-=shadow;shadowColor.g-=shadow;shadowColor.b-=shadow;return shadowColor;}vec4 backside(float yc,vec3 point){vec4 color=texture2D(from,point.xy);float gray=(color.r+color.b+color.g)/15.0;gray+=(8.0/10.0)*(pow(1.0-abs(yc/cylinderRadius),2.0/10.0)/2.0+(5.0/10.0));color.rgb=vec3(gray);return color;}vec4 behindSurface(float yc,vec3 point,mat3 rrotation){float shado=(1.0-((-cylinderRadius-yc)/amount*7.0))/6.0;shado*=1.0-abs(point.x-0.5);yc=(-cylinderRadius-cylinderRadius-yc);float hitAngle=(acos(yc/cylinderRadius)+cylinderAngle)-PI;point=hitPoint(hitAngle,yc,point,rrotation);if(yc<0.0&&point.x>=0.0&&point.y>=0.0&&point.x<=1.0&&point.y<=1.0&&(hitAngle<PI||amount>0.5)){shado=1.0-(sqrt(pow(point.x-0.5,2.0)+pow(point.y-0.5,2.0))/(71.0/100.0));shado*=pow(-yc/cylinderRadius,3.0);shado*=0.5;}else{shado=0.0;}vec2 texCoord=gl_FragCoord.xy/resolution.xy;return vec4(texture2D(to,texCoord).rgb-shado,1.0);}void main(){vec2 texCoord=gl_FragCoord.xy/resolution.xy;const float angle=30.0*PI/180.0;float c=cos(-angle);float s=sin(-angle);mat3 rotation=mat3(c,s,0,-s,c,0,0.12,0.258,1);c=cos(angle);s=sin(angle);mat3 rrotation=mat3(c,s,0,-s,c,0,0.15,-0.5,1);vec3 point=rotation*vec3(texCoord,1.0);float yc=point.y-cylinderCenter;if(yc<-cylinderRadius){gl_FragColor=behindSurface(yc,point,rrotation);return;}if(yc>cylinderRadius){gl_FragColor=texture2D(from,texCoord);return;}float hitAngle=(acos(yc/cylinderRadius)+cylinderAngle)-PI;float hitAngleMod=mod(hitAngle,2.0*PI);if((hitAngleMod>PI&&amount<0.5)||(hitAngleMod>PI/2.0&&amount<0.0)){gl_FragColor=seeThrough(yc,texCoord,rotation,rrotation);return;}point=hitPoint(hitAngle,yc,point,rrotation);if(point.x<0.0||point.y<0.0||point.x>1.0||point.y>1.0){gl_FragColor=seeThroughWithShadow(yc,texCoord,point,rotation,rrotation);return;}vec4 color=backside(yc,point);vec4 otherColor;if(yc<0.0){float shado=1.0-(sqrt(pow(point.x-0.5,2.0)+pow(point.y-0.5,2.0))/0.71);shado*=pow(-yc/cylinderRadius,3.0);shado*=0.5;otherColor=vec4(0.0,0.0,0.0,shado);}else{otherColor=texture2D(from,texCoord);}color=antiAlias(color,otherColor,cylinderRadius-abs(yc));vec4 cl=seeThroughWithShadow(yc,texCoord,point,rotation,rrotation);float dist=distanceToEdge(point);gl_FragColor=antiAlias(color,cl,dist);}"},{id:"06450f79cab706705bf9",name:"Polka_dots",owner:"bobylito",uniforms:{dots:5},html_url:"https://gist.github.com/06450f79cab706705bf9",created_at:"2014-05-20T12:09:38Z",updated_at:"2015-04-17T02:55:49Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float dots;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=progress;bool nextImage=distance(fract(p*dots),vec2(0.5,0.5))<x;if(nextImage) gl_FragColor=texture2D(to,p);else gl_FragColor=texture2D(from,p);}"},{id:"3da654388c3f3cd031c0",name:"burn",owner:"gre",uniforms:{color:[.9,.4,.2]},html_url:"https://gist.github.com/3da654388c3f3cd031c0",created_at:"2014-05-20T09:06:02Z",updated_at:"2015-04-17T02:55:55Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform vec3 color;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(texture2D(from,p)+vec4(progress*color,1.0),texture2D(to,p)+vec4((1.0-progress)*color,1.0),progress);}"},{id:"e5f807b5dffb09fc7527",name:"FinalGaussianNoise",owner:"mandubian",uniforms:{},html_url:"https://gist.github.com/e5f807b5dffb09fc7527",created_at:"2014-05-19T21:34:07Z",updated_at:"2015-04-17T02:59:02Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;float Rand(vec2 v){return fract(sin(dot(v.xy,vec2(12.9898,78.233)))*43758.5453);}float Gaussian(float p,float center,float c){return 0.75*exp(-pow((p-center)/c,2.));}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float c=cos(Gaussian(progress*(1.+Gaussian(progress*Rand(p),0.5,0.5)),0.5,0.25));vec2 d=p*c;gl_FragColor=mix(texture2D(from,d),texture2D(to,d),progress);}"},{id:"130bb7b7affedbda9df5",name:"Mosaic",owner:"Xaychru",uniforms:{endx:0,endy:-1},html_url:"https://gist.github.com/130bb7b7affedbda9df5",created_at:"2014-05-19T16:51:58Z",updated_at:"2015-04-17T02:56:19Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define PI 3.14159265358979323\n\n#define POW2(X) X*X\n\n#define POW3(X) X*X*X\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform int endx;uniform int endy;float Rand(vec2 v){return fract(sin(dot(v.xy,vec2(12.9898,78.233)))*43758.5453);}vec2 Rotate(vec2 v,float a){mat2 rm=mat2(cos(a),-sin(a),sin(a),cos(a));return rm*v;}float CosInterpolation(float x){return -cos(x*PI)/2.+.5;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy-.5;vec2 rp=p;float rpr=(progress*2.-1.);float z=-(rpr*rpr*2.)+3.;float az=abs(z);rp*=az;rp+=mix(vec2(.5,.5),vec2(float(endx)+.5,float(endy)+.5),POW2(CosInterpolation(progress)));vec2 mrp=mod(rp,1.);vec2 crp=rp;bool onEnd=int(floor(crp.x))==endx&&int(floor(crp.y))==endy;if(!onEnd){float ang=float(int(Rand(floor(crp))*4.))*.5*PI;mrp=vec2(.5)+Rotate(mrp-vec2(.5),ang);}if(onEnd||Rand(floor(crp))>.5){gl_FragColor=texture2D(to,mrp);}else{gl_FragColor=texture2D(from,mrp);}}"},{id:"ce1d48f0ce00bb379750",name:"Radial",owner:"Xaychru",uniforms:{},html_url:"https://gist.github.com/ce1d48f0ce00bb379750",created_at:"2014-05-19T15:18:28Z",updated_at:"2015-04-17T02:59:31Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define PI 3.141592653589\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 rp=p*2.-1.;float a=atan(rp.y,rp.x);float pa=progress*PI*2.5-PI*1.25;vec4 fromc=texture2D(from,p);vec4 toc=texture2D(to,p);if(a>pa){gl_FragColor=mix(toc,fromc,smoothstep(0.,1.,(a-pa)));}else{gl_FragColor=toc;}}"},{id:"c3bc914de09227713787",name:"ButterflyWaveScrawler",owner:"mandubian",uniforms:{amplitude:1,waves:30,colorSeparation:.3},html_url:"https://gist.github.com/c3bc914de09227713787",created_at:"2014-05-19T11:48:15Z",updated_at:"2015-04-17T02:59:13Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float amplitude;uniform float waves;uniform float colorSeparation;float PI=3.14159265358979323846264;float compute(vec2 p,float progress,vec2 center){vec2 o=p*sin(progress*amplitude)-center;vec2 h=vec2(1.,0.);float theta=acos(dot(o,h))*waves;return (exp(cos(theta))-2.*cos(4.*theta)+pow(sin((2.*theta-PI)/24.),5.))/10.;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;vec2 dir=p-vec2(.5);float dist=length(dir);float disp=compute(p,progress,vec2(0.5,0.5));vec4 texTo=texture2D(to,p+inv*disp);vec4 texFrom=vec4(texture2D(from,p+progress*disp*(1.0-colorSeparation)).r,texture2D(from,p+progress*disp).g,texture2D(from,p+progress*disp*(1.0+colorSeparation)).b,1.0);gl_FragColor=texTo*progress+texFrom*inv;}"},{id:"4268c81d39bd4ca00ae2",name:"CrazyParametricFun",owner:"mandubian",uniforms:{a:4,b:1,amplitude:120,smoothness:.1},html_url:"https://gist.github.com/4268c81d39bd4ca00ae2",created_at:"2014-05-19T08:04:52Z",updated_at:"2015-04-17T02:56:13Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float a;uniform float b;uniform float amplitude;uniform float smoothness;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 dir=p-vec2(.5);float dist=length(dir);float x=(a-b)*cos(progress)+b*cos(progress*((a/b)-1.));float y=(a-b)*sin(progress)-b*sin(progress*((a/b)-1.));vec2 offset=dir*vec2(sin(progress*dist*amplitude*x),sin(progress*dist*amplitude*y))/smoothness;gl_FragColor=mix(texture2D(from,p+offset),texture2D(to,p),smoothstep(0.2,1.0,progress));}"},{id:"2bcfb59096fcaed82355",name:"powerdisformation",owner:"gre",uniforms:{power:3,powerDest:!0},html_url:"https://gist.github.com/2bcfb59096fcaed82355",created_at:"2014-05-17T10:58:29Z",updated_at:"2015-04-17T02:59:28Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from,to;uniform float progress;uniform vec2 resolution;uniform float power;uniform bool powerDest;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 p2=mix(p,vec2(pow(p.x,power),pow(p.y,power)),(powerDest?0.5:1.0)-distance(progress,powerDest?0.5:1.0));gl_FragColor=mix(texture2D(from,p2),texture2D(to,powerDest?p2:p),progress);}"},{id:"2a3f2e907e1c0a152e60",name:"swap",owner:"gre",uniforms:{reflection:.4,perspective:.2,depth:3},html_url:"https://gist.github.com/2a3f2e907e1c0a152e60",created_at:"2014-05-16T13:59:07Z",updated_at:"2015-04-17T02:54:44Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float reflection;uniform float perspective;uniform float depth;const vec4 black=vec4(0.0,0.0,0.0,1.0);const vec2 boundMin=vec2(0.0,0.0);const vec2 boundMax=vec2(1.0,1.0);bool inBounds(vec2 p){return all(lessThan(boundMin,p))&&all(lessThan(p,boundMax));}vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-0.02);}vec4 bgColor(vec2 p,vec2 pfr,vec2 pto){vec4 c=black;pfr=project(pfr);if(inBounds(pfr)){c+=mix(black,texture2D(from,pfr),reflection*mix(1.0,0.0,pfr.y));}pto=project(pto);if(inBounds(pto)){c+=mix(black,texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 pfr,pto=vec2(-1.);float size=mix(1.0,depth,progress);float persp=perspective*progress;pfr=(p+vec2(-0.0,-0.5))*vec2(size/(1.0-perspective*progress),size/(1.0-size*persp*p.x))+vec2(0.0,0.5);size=mix(1.0,depth,1.-progress);persp=perspective*(1.-progress);pto=(p+vec2(-1.0,-0.5))*vec2(size/(1.0-perspective*(1.0-progress)),size/(1.0-size*persp*(0.5-p.x)))+vec2(1.0,0.5);bool fromOver=progress<0.5;if(fromOver){if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else{gl_FragColor=bgColor(p,pfr,pto);}}else{if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else{gl_FragColor=bgColor(p,pfr,pto);}}}"},{id:"94ffa2725b65aa8b9979",name:"ripple",owner:"gre",uniforms:{amplitude:100,speed:50},html_url:"https://gist.github.com/94ffa2725b65aa8b9979",created_at:"2014-05-16T13:58:42Z",updated_at:"2015-04-17T02:53:18Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float amplitude;uniform float speed;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 dir=p-vec2(.5);float dist=length(dir);vec2 offset=dir*(sin(progress*dist*amplitude-progress*speed)+.5)/30.;gl_FragColor=mix(texture2D(from,p+offset),texture2D(to,p),smoothstep(0.2,1.0,progress));}"},{id:"99bced7d9b5311fd166e",name:"flash",owner:"gre",uniforms:{flashPhase:.3,flashIntensity:3,flashZoomEffect:.5},html_url:"https://gist.github.com/99bced7d9b5311fd166e",created_at:"2014-05-16T13:58:17Z",updated_at:"2015-04-17T02:52:58Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float flashPhase;uniform float flashIntensity;uniform float flashZoomEffect;const vec3 flashColor=vec3(1.0,0.8,0.3);const float flashVelocity=3.0;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fc=texture2D(from,p);vec4 tc=texture2D(to,p);float intensity=mix(1.0,2.0*distance(p,vec2(0.5,0.5)),flashZoomEffect)*flashIntensity*pow(smoothstep(flashPhase,0.0,distance(0.5,progress)),flashVelocity);vec4 c=mix(texture2D(from,p),texture2D(to,p),smoothstep(0.5*(1.0-flashPhase),0.5*(1.0+flashPhase),progress));c+=intensity*vec4(flashColor,1.0);gl_FragColor=c;}"
},{id:"81c6f2e6fce88f9075d2",name:"flyeye",owner:"gre",uniforms:{size:.04,zoom:30,colorSeparation:.3},html_url:"https://gist.github.com/81c6f2e6fce88f9075d2",created_at:"2014-05-16T13:56:53Z",updated_at:"2015-04-17T02:56:15Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;uniform float zoom;uniform float colorSeparation;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;vec2 disp=size*vec2(cos(zoom*p.x),sin(zoom*p.y));vec4 texTo=texture2D(to,p+inv*disp);vec4 texFrom=vec4(texture2D(from,p+progress*disp*(1.0-colorSeparation)).r,texture2D(from,p+progress*disp).g,texture2D(from,p+progress*disp*(1.0+colorSeparation)).b,1.0);gl_FragColor=texTo*progress+texFrom*inv;}"},{id:"979934722820b5e715fa",name:"doorway",owner:"gre",uniforms:{reflection:.4,perspective:.4,depth:3},html_url:"https://gist.github.com/979934722820b5e715fa",created_at:"2014-05-16T13:54:38Z",updated_at:"2015-04-17T02:51:25Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float reflection;uniform float perspective;uniform float depth;const vec4 black=vec4(0.0,0.0,0.0,1.0);const vec2 boundMin=vec2(0.0,0.0);const vec2 boundMax=vec2(1.0,1.0);bool inBounds(vec2 p){return all(lessThan(boundMin,p))&&all(lessThan(p,boundMax));}vec2 project(vec2 p){return p*vec2(1.0,-1.2)+vec2(0.0,-0.02);}vec4 bgColor(vec2 p,vec2 pto){vec4 c=black;pto=project(pto);if(inBounds(pto)){c+=mix(black,texture2D(to,pto),reflection*mix(1.0,0.0,pto.y));}return c;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 pfr=vec2(-1.),pto=vec2(-1.);float middleSlit=2.0*abs(p.x-0.5)-progress;if(middleSlit>0.0){pfr=p+(p.x>0.5?-1.0:1.0)*vec2(0.5*progress,0.0);float d=1.0/(1.0+perspective*progress*(1.0-middleSlit));pfr.y-=d/2.;pfr.y*=d;pfr.y+=d/2.;}float size=mix(1.0,depth,1.-progress);pto=(p+vec2(-0.5,-0.5))*vec2(size,size)+vec2(0.5,0.5);if(inBounds(pfr)){gl_FragColor=texture2D(from,pfr);}else if(inBounds(pto)){gl_FragColor=texture2D(to,pto);}else{gl_FragColor=bgColor(p,pto);}}"},{id:"731fcad4f8956866f34a",name:"randomsquares",owner:"gre",uniforms:{size:[10,10],smoothness:.5},html_url:"https://gist.github.com/731fcad4f8956866f34a",created_at:"2014-05-16T13:52:46Z",updated_at:"2015-04-17T02:58:04Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform ivec2 size;uniform float smoothness;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float r=rand(floor(vec2(size)*p));float m=smoothstep(0.0,-smoothness,r-(progress*(1.0+smoothness)));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"df8797fd112e8e429064",name:"squeeze",owner:"gre",uniforms:{colorSeparation:.02},html_url:"https://gist.github.com/df8797fd112e8e429064",created_at:"2014-05-16T13:51:39Z",updated_at:"2015-04-17T02:54:05Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float colorSeparation;float progressY(float y){return 0.5+(y-0.5)/(1.0-progress);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float y=progressY(p.y);if(y<0.0||y>1.0){gl_FragColor=texture2D(to,p);}else{vec2 fp=vec2(p.x,y);vec3 c=vec3(texture2D(from,fp-progress*vec2(0.0,colorSeparation)).r,texture2D(from,fp).g,texture2D(from,fp+progress*vec2(0.0,colorSeparation)).b);gl_FragColor=vec4(c,1.0);}}"},{id:"90000743fedc953f11a4",name:"directionalwipe",owner:"gre",uniforms:{direction:[1,-1],smoothness:.5},html_url:"https://gist.github.com/90000743fedc953f11a4",created_at:"2014-05-16T13:50:51Z",updated_at:"2015-04-17T02:57:09Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform vec2 direction;uniform float smoothness;const vec2 center=vec2(0.5,0.5);void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec2 v=normalize(direction);v/=abs(v.x)+abs(v.y);float d=v.x*center.x+v.y*center.y;float m=smoothstep(-smoothness,0.0,v.x*p.x+v.y*p.y-(d-0.5+progress*(1.+smoothness)));gl_FragColor=mix(texture2D(to,p),texture2D(from,p),m);}"},{id:"7de3f4b9482d2b0bf7bb",name:"wind",owner:"gre",uniforms:{size:.2},html_url:"https://gist.github.com/7de3f4b9482d2b0bf7bb",created_at:"2014-05-16T13:49:36Z",updated_at:"2015-04-17T02:56:20Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float r=rand(vec2(0,p.y));float m=smoothstep(0.0,-size,p.x*(1.0-size)+size*r-(progress*(1.0+size)));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"d9f8b4df19584f1f0474",name:"fadegrayscale",owner:"gre",uniforms:{grayPhase:.3},html_url:"https://gist.github.com/d9f8b4df19584f1f0474",created_at:"2014-05-16T13:49:13Z",updated_at:"2015-04-17T02:59:50Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float grayPhase;vec3 grayscale(vec3 color){return vec3(0.2126*color.r+0.7152*color.g+0.0722*color.b);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;vec4 fc=texture2D(from,p);vec4 tc=texture2D(to,p);gl_FragColor=mix(mix(vec4(grayscale(fc.rgb),1.0),texture2D(from,p),smoothstep(1.0-grayPhase,0.0,progress)),mix(vec4(grayscale(tc.rgb),1.0),texture2D(to,p),smoothstep(grayPhase,1.0,progress)),progress);}"},{id:"206b96128ad6085f9911",name:"dispersionblur",owner:"gre",uniforms:{size:.6},html_url:"https://gist.github.com/206b96128ad6085f9911",created_at:"2014-05-16T13:47:09Z",updated_at:"2015-04-17T02:57:31Z",stars:1,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define QUALITY 32\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float size;const float GOLDEN_ANGLE=2.399963229728653;vec4 blur(sampler2D t,vec2 c,float radius){vec4 sum=vec4(0.0);float q=float(QUALITY);for(int i=0;i<QUALITY;++i){float fi=float(i);float a=fi*GOLDEN_ANGLE;float r=sqrt(fi/q)*radius;vec2 p=c+r*vec2(cos(a),sin(a));sum+=texture2D(t,p);}return sum/q;}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float inv=1.-progress;gl_FragColor=inv*blur(from,p,progress*size)+progress*blur(to,p,inv*size);}"},{id:"d71472a550601b96d69d",name:"heartwipe",owner:"gre",uniforms:{},html_url:"https://gist.github.com/d71472a550601b96d69d",created_at:"2014-05-16T13:46:31Z",updated_at:"2015-04-17T02:55:52Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;bool inHeart(vec2 p,vec2 center,float size){if(size==0.0) return false;vec2 o=(p-center)/(1.6*size);return pow(o.x*o.x+o.y*o.y-0.3,3.0)<o.x*o.x*pow(o.y,3.0);}void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float m=inHeart(p,vec2(0.5,0.4),progress)?1.0:0.0;gl_FragColor=mix(texture2D(from,p),texture2D(to,p),m);}"},{id:"f24651a01bf574e90122",name:"fadecolor",owner:"gre",uniforms:{color:[0,0,0],colorPhase:.4},html_url:"https://gist.github.com/f24651a01bf574e90122",created_at:"2014-05-16T13:45:46Z",updated_at:"2015-04-17T02:53:54Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform vec3 color;uniform float colorPhase;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;gl_FragColor=mix(mix(vec4(color,1.0),texture2D(from,p),smoothstep(1.0-colorPhase,0.0,progress)),mix(vec4(color,1.0),texture2D(to,p),smoothstep(colorPhase,1.0,progress)),progress);}"},{id:"35e8c18557995c77278e",name:"circleopen",owner:"gre",uniforms:{smoothness:.3,opening:!0},html_url:"https://gist.github.com/35e8c18557995c77278e",created_at:"2014-05-16T13:40:51Z",updated_at:"2015-04-17T02:58:26Z",stars:0,glsl:"\n#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D from;uniform sampler2D to;uniform float progress;uniform vec2 resolution;uniform float smoothness;uniform bool opening;const vec2 center=vec2(0.5,0.5);const float SQRT_2=1.414213562373;void main(){vec2 p=gl_FragCoord.xy/resolution.xy;float x=opening?progress:1.-progress;float m=smoothstep(-smoothness,0.0,SQRT_2*distance(center,p)-x*(1.+smoothness));gl_FragColor=mix(texture2D(from,p),texture2D(to,p),opening?1.-m:m);}"}]},{}]},{},[8]);